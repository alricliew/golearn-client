<!doctype html>
<html lang="en">

<head>
  <!-- Meta -->
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <title>GoLearn School</title>
  <meta name=description content="GoLearn School&trade; is Malaysia #1 learning platform to manage tuition lessons for you and your children. Start now for Free!">
  <meta property=og:title content="GoLearn School">
  <meta property=og:site_name content="GoLearn School">
  <meta property=og:type content=website>
  <meta property=og:url content=https://app.golearn.com.my/client/payment/view.html >
  <meta property=og:image content=https://app.golearn.com.my/assets/img/icon-apple-touch-180x180.png>
  <meta property=og:description content="GoLearn School&trade; is Malaysia #1 learning platform to manage tuition lessons for you and your children. Start now for Free!">
  <link rel=apple-touch-icon sizes=180x180 href=https://app.golearn.com.my/assets/img/icon-apple-touch-180x180.png>
  <link rel=icon type=image/png sizes=32x32 href=https://app.golearn.com.my/assets/img/icon-32x32.png>
  <link rel=icon type=image/png sizes=16x16 href=https://app.golearn.com.my/assets/img/icon-16x16.png>
  <!-- Fonts and icons -->
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
  <script src="https://kit.fontawesome.com/2bdd669e92.js" crossorigin="anonymous"></script>
  <!-- Material Kit CSS -->
  <link href="../../assets/css/material-dashboard.css?v=2.1.2" rel="stylesheet"/>
  <!-- Firebase Init -->
  <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-storage.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-firestore.js"></script>
  <script src="../../assets/js/firebase.js"></script>
  <!-- Tutor Portal specific CSS -->
  <link href="../../assets/css/tutor-portal.css" rel="stylesheet" />
  <!-- Date Picker -->
  <link href="../../assets/css/mc-calendar.min.css" rel="stylesheet"/>
  <link href="../../assets/css/intlTelInput.css" rel="stylesheet" >
  <!-- Rich Text Editor Init -->
  <!-- <script src="https://cdn.tiny.cloud/1/5dm77axvxwkliu22hg2ejlaqh4s246uo83bz98ogo4c3yeev/tinymce/5/tinymce.min.js" referrerpolicy="origin"></script> -->

  <!-- TinyMce -->
  <script src="../../assets/js/plugins/tinymce/tinymce.min.js" type="text/javascript"></script>
  <!-- Tinymce init -->
  <script>
    tinymce.init({
      mode : "exact",
      selector:'#invNotes',
      plugins: "link",
      max_chars: 400,
      setup: function (ed) {
        var allowedKeys = [8, 13, 16, 17, 18, 20, 33, 34, 35, 36, 37, 38, 39, 40, 46];
        ed.on('keydown', function (e) {
          console.log(tinymce_getContentLength());
          invNotesOnChangeHandler();
          if (allowedKeys.indexOf(e.keyCode) != -1){
            return true;
          }
          if (tinymce_getContentLength() + 1 > this.settings.max_chars) {
            func.showNotification('top','center', 'warning', 'error_outline', 'You have reach maximum allowed number of ' + ed.settings.max_chars + ' characters.' );
            e.preventDefault();
            e.stopPropagation();
            return false;
          }
          return true;
        });
      },
           
      init_instance_callback: function () { // initialize counter div
        $('#' + this.id).prev().append('<div class="char_count" style="text-align:right"></div>');
        tinymce_updateCharCounter(this, tinymce_getContentLength());
      },
      paste_preprocess: function (plugin, args) {
        var editor = tinymce.get(tinymce.activeEditor.id);
        var len = editor.contentDocument.body.innerText.length;
        var text = $(args.content).text();
        if (len + text.length > editor.settings.max_chars) {
            func.showNotification('top','center', 'warning', 'error_outline', 'Pasting this exceeds the maximum allowed number of ' + editor.settings.max_chars + ' characters.' );
            args.content = '';
        } else {
            tinymce_updateCharCounter(editor, len + text.length);
        }
      }

    });
    tinymce.init({
      mode : "exact",
      selector:'#invFooterNotes',
      plugins: "link",
      max_chars: 200,
      setup: function (ed) {
        var allowedKeys = [8, 13, 16, 17, 18, 20, 33, 34, 35, 36, 37, 38, 39, 40, 46];

        ed.on('keydown', function (e) {
          console.log(tinymce_getContentLength());
          invFooterNotesOnChangeHandler();
          if (allowedKeys.indexOf(e.keyCode) != -1){
            return true;
          }
          if (tinymce_getContentLength() + 1 > this.settings.max_chars) {
            func.showNotification('top','center', 'warning', 'error_outline', 'You have reach maximum allowed number of ' + ed.settings.max_chars + ' characters.' );
            e.preventDefault();
            e.stopPropagation();
            return false;
          }
          return true;
        });

      },
      
      init_instance_callback: function () { // initialize counter div
        $('#' + this.id).prev().append('<div class="char_count" style="text-align:right"></div>');
        tinymce_updateCharCounter(this, tinymce_getContentLength());
      },
      paste_preprocess: function (plugin, args) {
        var editor = tinymce.get(tinymce.activeEditor.id);
        var len = editor.contentDocument.body.innerText.length;
        var text = $(args.content).text();
        if (len + text.length > editor.settings.max_chars) {
            func.showNotification('top','center', 'warning', 'error_outline', 'Pasting this exceeds the maximum allowed number of ' + editor.settings.max_chars + ' characters.' );
            args.content = '';
        } else {
            tinymce_updateCharCounter(editor, len + text.length);
        }
      },
    });

    function tinymce_updateCharCounter(el, len) {
      $('#' + el.id).prev().find('.char_count').text(len + '/' + el.settings.max_chars);
    }

    function tinymce_getContentLength() {
      return tinymce.get(tinymce.activeEditor.id).contentDocument.body.innerText.length;
    }
  </script>


  <style>
    .table {
        border: 1px solid #ccc;
        border-collapse: collapse;
    }
    .table th,
    .table td {
        border: 1px solid #ccc;
    }
    .table th,
    .table td {
        padding: 0.5rem;
    }
    .draggable {
        cursor: move;
        user-select: none;
    }
    .placeholder {
        background-color: #edf2f7;
        border: 2px dashed #cbd5e0;
    }
    .clone-list {
        border-top: 1px solid #ccc;
    }
    .clone-table {
        border-collapse: collapse;
        border: none;
    }
    .clone-table th{
        border: 1px solid #ccc;
        border-top: none;
        padding: 0.5rem;
        font-size: 1.2em;
        font-weight: 300;
    }

    .clone-table td {
        border: 1px solid #ccc;
        border-top: none;
        padding: 0.5rem;

        font-weight: 300;
    }
    .dragging {
        background: #fff;
        border-top: 1px solid #ccc;
        z-index: 999;
    }

    /* page view for A4  */
    page {
      background: white;
      display: block;
      margin: 0 auto;
      /* margin-bottom: 0.5cm; */
      box-shadow: 0 0 0.5cm rgba(0,0,0,0.5);
    }
    page[size="A4"] {  
      width: 21cm;
      height: auto; 
      min-height: 29.65cm; 
      /* Use a  height value slightly lower than 29.7 to avoid page break  */
      /* height: 29.7cm;  */
    }
    page[size="A4"][layout="landscape"] {
      width: 29.7cm;
      height: 21cm;  
    }

    
    /* .card-body footer1 {
        position: fixed;
    }
    
    .card-body footer1 {
        bottom: 0;
    } */
    .textarea1 {
      display: block;
      width: 100%;
      overflow: hidden;
      resize: both;
      min-height: 40px;
      line-height: 20px;
    }

    .textarea[contenteditable]:empty::before {
      content: "Placeholder still possible";
      color: gray;
    }
  </style>
</head>

<body>

  <div class="wrapper ">
    <div class="sidebar" data-color="purple" data-background-color="white" data-image="../../assets/img/sidebar-3.jpg">
      <div class="logo">
        <a href="../" class="simple-text logo-mini" style="padding: 0.5rem">
			    <img src="../../assets/img/golearn-school-logo.svg" style="width: 200px; height: auto;" alt=""></img>
        </a>
      </div>
      <div class="sidebar-wrapper">
        <ul class="nav">
		  		<li class="nav-item">
            <a class="nav-link" href="../class/">
              <i class="fas fa-chalkboard fa-fw nav-icon"></i>
              <p>My Classes</p>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../dependant/">
              <i class="fas fa-user-graduate fa-fw nav-icon"></i>
              <p>My Dependants</p>
            </a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="./">
              <i class="fas fa-file-invoice-dollar fa-fw nav-icon"></i>
              <p>Payments</p>
            </a>
          </li>
		  		<!-- <li class="nav-item">
            <a class="nav-link" href="../request/">
              <i class="fas fa-briefcase fa-fw nav-icon"></i>
              <p>Lesson Requests</p>
            </a>
          </li> -->
        </ul>
      </div>
    </div>
    <div class="main-panel">
      <!-- Navbar -->
      <nav class="navbar navbar-expand-lg navbar-transparent navbar-absolute fixed-top ">
        <div class="container-fluid">
          <div class="navbar-wrapper">
            <a class="navbar-brand" href="javascript:;">Payments <span><i class="material-icons" style="color: gray;">chevron_right</i></span> View</a>
          </div>
          <button class="navbar-toggler" type="button" data-toggle="collapse" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
            <span class="sr-only">Toggle navigation</span>
            <span class="navbar-toggler-icon icon-bar"></span>
            <span class="navbar-toggler-icon icon-bar"></span>
            <span class="navbar-toggler-icon icon-bar"></span>
          </button>
          <div class="collapse navbar-collapse justify-content-end">
            <form class="navbar-form">
              <!-- Put empty placeholder here -->
            </form>

            <ul class="navbar-nav">
              <li class="nav-item" id="activationNavItem">
                <a href="#" class="btn btn-danger btn-round" style="visibility: hidden;" id="btnActivateAccount" ></a>
              </li>
              <li class="nav-item">
                <a class="navbar-brand" href="javascript:;">
                   Hi <span id="user"></span> !
                </a> 
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link" href="javascript:;" id="navbarDropdownNotification" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <i class="material-icons">notifications</i> Notifications
                </a>
                <!-- <a class="nav-link" href="http://example.com" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <i class="material-icons">notifications</i>
                  <span class="notification">5</span>
                  <p class="d-lg-none d-md-block">
                    Some Actions
                  </p>
                </a> -->
								<div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
									<p style="padding: 1em;" >No notification</p>
                  <!-- <a class="dropdown-item" href="#">Mike John responded to your email</a>
                  <a class="dropdown-item" href="#">You have 5 new tasks</a>
                  <a class="dropdown-item" href="#">You're now friend with Andrew</a>
                  <a class="dropdown-item" href="#">Another Notification</a>
                  <a class="dropdown-item" href="#">Another One</a> -->
                </div>
              </li>
              <!-- your navbar here -->
			  
			  			<li class="nav-item dropdown">
                <a class="nav-link" href="javascript:;" id="navbarDropdownProfile" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <i class="material-icons">person</i>
                  <p class="d-lg-none d-md-block">
                    Account
                  </p>
                </a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownProfile">
                  <a class="dropdown-item" href="../edit-profile.html">Edit Profile</a>
                  <a id="navPublicProfile" class="dropdown-item" href="#">My Public Profile</a>
									<a class="display:block; dropdown-item" href="../about.html">About</a>
									<div class="dropdown-divider"></div>
                  <a class="dropdown-item" href="javascript:;" data-toggle="modal" data-target="#signOutModal" onclick="signOutFunction()" id="btn-logout">Log out</a>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <!-- End Navbar -->

			<!-- Modal Start -->

      <!-- Loading Modal -->
      <div class="row">
        <div class="modal fade" tabindex="-1" role="dialog" id="loadingModal" aria-labelledby="staticBackdropLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered text-center" role="document">
            <div class="container-fluid">
              <div class="row d-flex">
                <span class="fa fa-spinner fa-spin fa-5x w-100" style="color: #fff ;"></span>
                <div class="col align-self-center">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Sign Out modal -->
      <div class="row">
        <div class="modal fade" id="signOutModal" tabindex="-1" role="dialog" aria-labelledby="signOutModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="signOutLabel">Logging Out</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body" id="signOutModalBody">
                Are you sure you want to continue?
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" id="btnSignOutModalUpdate">Confirm</button>
              </div>
            </div>
          </div>
        </div>
      </div>

 
      <!-- Main content -->
      <div class="content">
        <div class="container-fluid">
          <!-- Main content -->
          <!-- Button -->
          <div class="row d-flex">
            <div class="p-2" style="padding-right: 0!important;">
              <a href="./" class="btn btn-outline-primary btn-round" id="btnBack"><i class="material-icons" style="color: #2e74b6; margin-right: 5px;">west</i> Back</a>
            </div>
            <div class="p-2">
              <a href="javascript:;" class="btn btn-outline-primary btn-round" id="" onclick="generatePDFeKoopmans('invTemplate')" disabled> Save as PDF</a>
            </div>
          </div>

          <!-- Preview -->
          <page size="A4" id="invTemplate" style="position: relative;">

            <div class="card-body" >
              <div class="row">
                <div class="col-4 text-center">

                  <div class="form-group">
                    <!-- <canvas id="myCanvas" style="height: 150px;width: 225px; object-fit: cover;" ></canvas> -->
                    <div style="height: 115px;width: auto; display: inline-block; position: relative; overflow: hidden; cursor: pointer;">
                      <img id="previewTutorImgUrl" style="height: 100%; width: auto; " src="../../assets/img/empty-photo.png" crossorigin="anonymous" alt = ""/>
                      <!-- <canvas id="myCanvas" ></canvas> -->
                    </div>
                  </div>
                </div>

                <div class="col-2">
                  <!--  Do nothing -->
                </div>

                <div class="col-6 text-right">
                  <h4 style="font-size: xx-large;margin-top: 1rem;">INVOICE</h4> 
                  <h5 id="previewInvTitle"  style="font-weight: 500;"></h5>
                  <h4 id="previewInvBizName" style="font-weight: 500;">Your Name</h4>
                  <h6 id="previewInvBizDetails" style="text-transform: none; font-weight: 300;"></p>
                </div>

              </div>
            
            </div>

            <hr style="margin: 0rem">
            <!-- style="position: relative; bottom: 35px; width: 100%; margin-top: 2rem;" -->
            <div class="card-body" style="position: relative; bottom: 35px; width: 100%; margin-top: 2rem;"> 
              <div class="row">
                <div class="col-4">
                  <h6>Billed To:</h6>
                  <h4 id="previewInvClientName" style="font-weight: 500;"></h4>
                  <h6 id="previewInvClientDetails"  style="text-transform: none; font-weight: 300;"></h6>
                </div>

                <div class="col-4"></div>
                <div class="col-4">
                  <div class="row">
                    <div class="col-6 text-right" style="padding-right: 0;">
                      <h6>Invoice Number</h6>
                      <h6>Invoice Date</h6>
                      <h6 style="color: red;">Payment Due</h6>
                      <h6>Status</h6>
                      
                      <!-- <p style="margin: 0.3rem; font-weight: bold;">Invoice Number</p>                            
                      <p style="margin: 0.3rem; font-weight: bold;">Invoice Date</p>                           
                      <p style="margin: 0.3rem; font-weight: bold;">Payment Due</p>                            
                      <p style="margin: 0.3rem; font-weight: bold;">Status</p> -->
                    </div>
                    <div class="col-6 text-right">
                      <h6 id="previewInvNum" style="font-weight: normal; text-transform: none;"> - </h6>
                      <h6 id="previewInvIssueDate" style="font-weight: normal; text-transform: none;"> - </h6>
                      <h6 id="previewInvPaymentDue" style="color: red; font-weight: normal; text-transform: none;"> - </h6>
                      <h6 id="previewInvStatus" style="font-weight: normal; text-transform: none;"> - </h6>
                      <!-- <p style="margin: 0.3rem;">0100010101</p>  
                      <p style="margin: 0.3rem;">Status</p>  
                      <p style="margin: 0.3rem;">Status</p>  
                      <p style="margin: 0.3rem;">Status</p>   -->
                     </div>
                  </div>
                </div>
              </div>

              <div style="margin-top: 1rem;"></div>
              
              <div class="row">
                <div class="col-12"  style="overflow-x:auto;">
                  <span class="" style="font-size: x-small; font-weight: 300; color: gray; margin-bottom: 0;">Note*: Quantity - Number of hour of lessons conducted, number of classes, or relevant other items</span>
                  <table id="tablePreview" class="table-light table-sm" cellspacing="0" width="100%" >
                    <thead style="background-color: grey; color: white;">
                      <tr>
                        <th style="min-width: 200px; font-size: small;">Items</th>
                        <th style="width: 100px; min-width: 100px;text-align: right; font-size: small;">Quantity</th>
                        <th style="width: 100px; min-width: 100px;text-align: right; font-size: small;">Price</th>
                        <th style="width: 100px; min-width: 100px;text-align: right; font-size: small;">Amount</th>
                      </tr>
                    </thead>
                    <tbody id="previewItemBody">
                      <!-- <tr class="item">
                        <td style="font-size: small;"></td>
                        <td style="text-align: right; font-size: small;"></td>
                        <td style="text-align: right; font-size: small;"></td>
                        <td style="text-align: right; font-size: small;"></td>
                      </tr> -->
                      <tr class="subtotal" id='previewItemSubtotal'>
                        <td></td>
                        <td></td>
                        <td style="text-align: right; font-weight: 500; font-size: small;">Subtotal</td>
                        <td style="text-align: right; font-weight: 500; font-size: small;" id="previewSubtotalItem"></td>
                      </tr>
                    </tbody>
                  </table>

                  <table id="tableAdditionalItemPreview" class="table-light table-sm" cellspacing="0" width="100%">
                    <thead style="visibility: collapse;">
                      <tr>
                        <th style="min-width: 200px;">Items</th>
                        <th style="width: 100px; min-width: 100px;text-align: right;">Quantity</th>
                        <th style="width: 100px; min-width: 100px;text-align: right;">Price</th>
                        <th style="width: 100px; min-width: 100px;text-align: right;">Amount</th>
                      </tr>
                    </thead>
                    <tbody id="previewAdditionalItemBody">
                      <tr class="additional">
                        <td></td>
                        <td></td>
                        <td style="text-align: right; font-size: small;"></td>
                        <td style="text-align: right; font-size: small;"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <div class="col-12">
                  <h4 style="text-align: right; font-weight: 500;">Total <span style="margin-left: 2rem;" id="previewGrandTotal">RM0.00</span></h4>
                </div>

                <div class="col-12">
                  <!-- <p><strong>Solution with JS (only deals with line breaks): </strong> <textarea class="textarea resize-ta"></textarea></p> -->

                  <!-- <div class="form-group"> -->
                    <span class="" style="font-size: smaller; font-weight: 300; color: gray; margin: 0;">Notes</span>
                    <span  id="previewInvNotes"></span>
                    <!-- <textarea class="form-control" maxlength="250" rows='3' oninput="console.log(this.scrollHeight); this.style.height = (this.scrollHeight) + 'px';// this.setAttribute('rows', 12)" style="height: 4300px; max-height: max-content; overflow: hidden;" id="previewInvNotes" data-compulsory="false" placeholder="Enter notes that are visible to your client. (e.g payment guidelines) " ></textarea> -->

                  <!-- </div> -->
                </div>
              </div>
            </div>
            
            <div class="card-body" id="preview-footer" style="padding-top: 0; margin-top: 0; position: absolute; bottom: 0; width: 100%;">
              <p id="previewInvFooterNotes" ></p>
            </div>

          </page>


        </div>

        <footer class="footer">
          <div class="container-fluid">
            <nav class="float-left">
            <ul>
              <!-- <li>
              <a href="https://golearn.com.my/join-us" target="_blank">
                Visit GoLearn Tutor
              </a>
              </li> -->
            </ul>
            </nav>
          </div>
        </footer>
      </div>
    </div>

  </div>

  
  <script src="../../assets/js/core/jquery.min.js"></script>
  <script src="../../assets/js/core/popper.min.js"></script>
  <script src="../../assets/js/core/bootstrap-material-design.min.js"></script>
  <script src="../../assets/js/plugins/perfect-scrollbar.jquery.min.js"></script>
  <!-- Plugin for the momentJs  -->
  <script src="../../assets/js/plugins/moment.min.js"></script>
  <!--  Plugin for Sweet Alert -->
  <script src="../../assets/js/plugins/sweetalert2.js"></script>
  <!-- Forms Validations Plugin -->
  <script src="../../assets/js/plugins/jquery.validate.min.js"></script>
  <!-- Plugin for the Wizard, full documentation here: https://github.com/VinceG/twitter-bootstrap-wizard -->
  <!-- <script src="assets/js/plugins/jquery.bootstrap-wizard.js"></script> -->
  <!-- 	Plugin for Select, full documentation here: http://silviomoreto.github.io/bootstrap-select -->
  <!-- <script src="assets/js/plugins/bootstrap-selectpicker.js"></script> -->
  <!--  Plugin for the DateTimePicker, full documentation here: https://eonasdan.github.io/bootstrap-datetimepicker/ -->
  <!-- <script src="assets/js/plugins/bootstrap-datetimepicker.min.js"></script> -->
  <!--  DataTables.net Plugin, full documentation here: https://datatables.net/  -->
  <!-- <script src="assets/js/plugins/jquery.dataTables.min.js"></script> -->
  <!-- 	Plugin for Tags, full documentation here: https://github.com/bootstrap-tagsinput/bootstrap-tagsinputs  -->
  <!-- <script src="assets/js/plugins/bootstrap-tagsinput.js"></script> -->
  <!-- Plugin for Fileupload, full documentation here: http://www.jasny.net/bootstrap/javascript/#fileinput -->
  <!-- <script src="assets/js/plugins/jasny-bootstrap.min.js"></script> -->
  <!--  Full Calendar Plugin, full documentation here: https://github.com/fullcalendar/fullcalendar    -->
  <!-- <script src="assets/js/plugins/fullcalendar.min.js"></script> -->
  <!-- Vector Map plugin, full documentation here: http://jvectormap.com/documentation/ -->
  <!-- <script src="assets/js/plugins/jquery-jvectormap.js"></script> -->
  <!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
  <!-- <script src="assets/js/plugins/nouislider.min.js"></script> -->
  <!-- Include a polyfill for ES6 Promises (optional) for IE11, UC Browser and Android browser support SweetAlert -->
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/core-js/2.4.1/core.js"></script> -->
  <!-- Library for adding dinamically elements -->
  <!-- <script src="assets/js/plugins/arrive.min.js"></script> -->
  <!--  Google Maps Plugin    -->
  <!-- <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE"></script> -->
  <!-- Chartist JS -->
  <!-- <script src="assets/js/plugins/chartist.min.js"></script> -->
  <!--  Notifications Plugin    -->
  <script src="../../assets/js/plugins/bootstrap-notify.js"></script>
  <!-- Control Center for Material Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="../../assets/js/material-dashboard.js?v=2.1.2" type="text/javascript"></script>

  <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.min.js" integrity="sha384-lpyLfhYuitXl2zRZ5Bn2fqnhNAKOAaM/0Kr9laMspuaMiZfGmfwRNFh8HlMy49eQ"  crossorigin="anonymous"></script>    -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8" crossorigin="anonymous"></script> -->
  
  <!-- Common constants -->
  <script src="../../assets/js/common.js" type="text/javascript"></script>
  <!-- Global Var -->
  <script src="../../assets/js/client-globalvar.js" type="text/javascript"></script>
  <!-- Core Client Js -->
  <script src="../../assets/js/client-core.js" type="text/javascript"></script>
  <!-- Datepicker -->
  <script src="../../assets/js/mc-calendar.min.js" type="text/javascript"></script>
  <!-- International Telephone Input -->
  <script src="../../assets/js/plugins/intlTelInput/intlTelInput.js"></script>

  <script src="https://raw.githack.com/eKoopmans/html2pdf/master/dist/html2pdf.bundle.js"></script> 
  
	<script>
    // // Global Variables
    // var tutorId;
    // var current_name, current_email, current_phone, current_age, current_gender, current_imgUri, current_nric,
    //   current_address1, current_address2, current_addressPostCode, current_addressState,
    //   current_rating, current_ratingTimes, current_ratingFinal, current_profileStatus,
    //   current_token, current_agent, current_accountStatus;
    // var currentYearsExperience, currentTutoringExperience, currentTutoringApproach, currentQualification, 
    //   current_preferedAreaList, current_preferedSubjectList;
    // // Depreciated
    // // var current_chk_homeTutor, current_chk_privateTutor, current_chk_groupTutor, current_chk_onlineTutor;
    // var isModeHomeStudentToTutor, isModeHomeTutorToStudent, isModeGroup, isModeOnline, isModeOnlineGroup;
    // var isLanEng, isLanBm, isLanBc, isLanBt, isLanOther;
    // var current_chk_homeStudentToTutor, current_chk_homeTutorToStudent, current_chk_group, current_chk_online, current_chk_onlineGroup;
    // var current_mon_8am, current_mon_12pm, current_mon_3pm, current_mon_6pm, 
    //   current_tue_8am, current_tue_12pm, current_tue_3pm, current_tue_6pm, 
    //   current_wed_8am, current_wed_12pm, current_wed_3pm, current_wed_6pm, 
    //   current_thu_8am, current_thu_12pm, current_thu_3pm, current_thu_6pm, 
    //   current_fri_8am, current_fri_12pm, current_fri_3pm, current_fri_6pm,
    //   current_sat_8am, current_sat_12pm, current_sat_3pm, current_sat_6pm, 
    //   current_sun_8am, current_sun_12pm, current_sun_3pm, current_sun_6pm;
    // var current_aweburl, current_aPremiumSubjectLimit, current_aPremiumConnectLimit, current_aTotalSubjectLimit, 
    //  current_aTotalConnectLimit, current_aPreferredSubjectLimit, current_aPreferredAreaLimit;


    var latestAdminStuDoc = null;// Store last document - Used for Admin's Student Load More btn in Add Student Modal

    var allItemsArr = [];

    var invId, transId; // Global variable for selected invoice and transaction id

    const table = document.getElementById('table');
    const tableAdditionalItem = document.getElementById('tableAdditionalItem');
    const tablePreview = document.getElementById('tablePreview');
    const tableAdditionalItemPreview = document.getElementById('tableAdditionalItemPreview');

		// var db = firebase.firestore();
		// db.settings({ timestampsInSnapshots: true });

    // Check the current Invoice in session Storage - Valid only if user come from class.html
    var currentInvoiceObj = null;
    getInvoiceObject()

    // Initialization
    AuthCheck();

    // Page Specific Initialization
    function loadPageInitFunc(){
      // Do nothing
      

    }

    function getInvoiceObject(){
      // Check if there are valid class data in session storage.
      if (JSON.parse(sessionStorage.getItem(SESSION_STORAGE_CLIENT_INVOICE_CURRENT_DOC_KEY)) == null || 
        JSON.parse(sessionStorage.getItem(SESSION_STORAGE_CLIENT_INVOICE_CURRENT_DOC_KEY)).id == null || 
        JSON.parse(sessionStorage.getItem(SESSION_STORAGE_CLIENT_INVOICE_CURRENT_DOC_KEY)).id == '' ){
        // Return to class.html if invalid class obj
        func.showNotification('top','center', 'danger', 'error_outline', "Error: No invoice selected." );
        window.location.href='./';

      }else{
        // Set the fields
        currentInvoiceObj = JSON.parse(sessionStorage.getItem(SESSION_STORAGE_CLIENT_INVOICE_CURRENT_DOC_KEY));
        console.log(currentInvoiceObj);
        invId = currentInvoiceObj[INV_ID]
        
        updatePageContent(currentInvoiceObj);

      }

    }


    // // Set the nav name and global var, if user already login and have session Storage 
    // var tutorInfoObj = null;
    // if (JSON.parse(sessionStorage.getItem("tutorInfoObj")) == null ){
    //   // Do nothing
    // }
    // else{
    //   // Set the nav user name
    //   tutorInfoObj = JSON.parse(sessionStorage.getItem("tutorInfoObj"));
    //   document.getElementById("user").textContent = tutorInfoObj.name;

    //   current_name = (tutorInfoObj.name == null || tutorInfoObj.name == "")? "New Tutor" : tutorInfoObj.name;
    //   // current_email, 
    //   // current_phone, 
    //   current_age = (tutorInfoObj.age == null || tutorInfoObj.age == "")? "18" : tutorInfoObj.age; 
    //   current_gender= (tutorInfoObj.gender == 0)? "Male" : "Female"; 
    //   current_imgUri = (tutorInfoObj.imgUrl == null || tutorInfoObj.imgUrl == "")? "../assets/img/hello.gif" : tutorInfoObj.imgUrl;
    //   current_accountStatus = tutorInfoObj.accountStatus; // bool
    //   currentYearsExperience = tutorInfoObj.yearsExperience; // number
    //   currentTutoringExperience = tutorInfoObj.tutoringExperience;
    //   currentTutoringApproach = tutorInfoObj.tutoringApproach;
    //   currentQualification= tutorInfoObj.qualification;
    //   current_aweburl = tutorInfoObj.aWebUrl

    // }

		// firebase.auth().onAuthStateChanged(function(user){
      
		// 	if(!user){
    //     // Return to login if user does not exist.
		// 		window.location.href = "../login.html"
		// 	}else{
    //     // if the displayName is null, it means user register using Phone
    //     if (firebase.auth().currentUser.displayName == null ){
    //         tutorId = firebase.auth().currentUser.phoneNumber;
    //     }else{
    //       tutorId = firebase.auth().currentUser.email.replace("[^a-zA-Z0-9]", "_").toLowerCase();
    //     }
    //     loadUserInfo(tutorId);
    //     // loadUserSettings(tutorId);

    //     // Enable Add Student Modal
    //     document.getElementById("invAllStudentLink").setAttribute('data-target', '#addStudentModal');
        
    //     // Enable Save Inv Modal
    //     document.getElementById("btnSave").removeAttribute('disabled');

		// 	}
		// });

    // // Load Tutor Settings
    // function loadUserSettings(tutorId){
      
    //   // Tutor Id must be a phone with +60, no spacing or other chars
    //   var docRef = db.collection("Settings").doc(tutorId);
      
    //   docRef.get().then((doc) => {
    //     updatePageContent(doc);
    //     // $('#loadingModal').modal('hide');
    //   })
    // }

    // Init Page View
    function updatePageContent(invObj){

      if (invObj[INV_SENDER_IMG_URL] == null ||invObj[INV_SENDER_IMG_URL] == ""|| invObj[INV_SENDER_IMG_URL] == "data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D"){
        document.getElementById("previewTutorImgUrl").style.display = 'none';
        document.getElementById("previewTutorImgUrl").src = "data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D";

      }
      else {
        toDataURL(
         invObj[INV_SENDER_IMG_URL] == null ||invObj[INV_SENDER_IMG_URL] == '' ?  'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D' : 'https://murmuring-headland-66106.herokuapp.com/'+invObj[INV_SENDER_IMG_URL],
          function(dataUrl) {
          },
        );
      }

      document.getElementById("previewInvTitle").textContent =invObj[INV_TITLE];
      document.getElementById("previewInvBizName").textContent = invObj[INV_SENDER_NAME];
      document.getElementById("previewInvBizDetails").innerHTML = invObj[INV_SENDER_DETAILS];
      document.getElementById("previewInvNum").textContent = invObj[INV_NUMBER];
      document.getElementById("previewInvIssueDate").textContent = new Date(invObj[INV_ISSUE_DATE].seconds*1000).toLocaleDateString("en-GB");
      document.getElementById("previewInvPaymentDue").textContent = new Date(invObj[INV_DUE_DATE].seconds*1000).toLocaleDateString("en-GB");
      let status = ''
      if (invObj[INV_INV_STATUS] === INV_STATUS_DRAFT)
        status = 'Draft'
      else if (invObj[INV_INV_STATUS] === INV_STATUS_NEW)
        status = 'Unpaid'
      else if (invObj[INV_INV_STATUS] === INV_STATUS_PAID)
        status = 'Paid'
      else  status = 'Unknown'

      

      document.getElementById("previewInvClientName").textContent = invObj[INV_RECEIVER_NAME];
      document.getElementById("previewInvClientDetails").textContent = invObj[INV_RECEIVER_DETAILS];

      document.getElementById("previewInvStatus").textContent = status;
      document.getElementById("previewInvNotes").innerHTML = invObj[INV_NOTES];
      document.getElementById("previewInvFooterNotes").innerHTML = invObj[INV_FOOTER_NOTES];

      printPreview(invObj[INV_ITEMS_ARR]);

    }

    // Print Preview
    function printPreview(invData){

      // init the preview template size 
      document.getElementById('invTemplate').style.height = 'auto';

      // clear all spaces details in preview
      // let totalPreviewItem = tablePreview.querySelectorAll('.item').length;
      // console.log('totalPreviewItem ' + totalPreviewItem);
      tablePreview.querySelectorAll('.item').forEach(function (row, index) {
        row.remove();
      });

      tablePreview.querySelectorAll('.subtotal').forEach(function (row, index) {
        row.remove();
      });

      // let totalAdditionalItemPreview = tableAdditionalItemPreview.querySelectorAll('.additional').length;
      // console.log('totalPreviewItem ' + totalPreviewItem);
      tableAdditionalItemPreview.querySelectorAll('.additional').forEach(function (row, index) {
        row.remove();
      });

      // document.getElementById('previewSubtotalItem').textContent='';
      document.getElementById('previewGrandTotal').textContent='';


      // Get the inv data
      // let invData = getAllItems2();
      console.log('invData')
      console.log(invData)


      // Step 2: Print Items & Additional Items
      let itemStartIndex= invData.indexOf('ITEMLIST');
      let itemIndex= invData.indexOf('ITEM');
      let additionalItemStartIndex= invData.indexOf('ADDITIONAL_ITEM');
      let totalStartIndex= invData.indexOf('TOTAL');

      // console.log(itemStartIndex, additionalItemStartIndex, subtotalStartIndex, totalStartIndex)

      // let type = payslipDataArr[0];
      let itemList = invData.slice(itemStartIndex+1, additionalItemStartIndex); //+1 to ignore the first indentifier, ITEMLIST
      // let subTotal = payslipDataArr[subtotalStartIndex+1];
      let additionalItem = invData.slice(additionalItemStartIndex+1, totalStartIndex); //+1 to ignore the first indentifier
      let total = invData[totalStartIndex+1];

      var itemIndexArr = [];
      itemList.filter(function(item, index) {
      if(item === 'ITEM'){
        itemIndexArr.push(index)
      }
      });
      // console.log(itemIndexArr)



      // console.log(itemList)
      // console.log(itemIndex)
      console.log(additionalItem)
      // console.log(total)

      // Loop through each 'ITEM' index
      itemIndexArr.forEach((item, index) => {
        // Get the printable row. Skip the unused rows.
        // +1 is the header identifier, 'ITEM'
        // +4 is the name, refId, cat and tag rows
        let itemSingleList = itemList.slice(item + 1 + 4, itemIndexArr[index+1]);
        // console.log(itemSingleList);

        let subtotalItem = 0;
        let component = [];
        itemSingleList.forEach((item, index) => {

          component = item.split(";; ")
          printItem(component[0], component[1], component[2], component[3]);

          subtotalItem = isNaN(component[1] * component[2]) ? subtotalItem+ 0 : subtotalItem + component[1] * component[2];

        });

        printItemSubtotal(subtotalItem);
        
      })

      // Print Items
      // Print Additional Items
      additionalItem.forEach((item) => {
        console.log(item)
        let component = item.split(";; ")

        let additionalSelector = component[0];
        let additionalItem = component[1];
        let additionalItemValue = component[2];
        let amount = component[3];
        
        if (additionalSelector === 'Select one'){
          // Do nothing
        }
        else if (additionalSelector === 'Discount ( - )'){
          console.log(additionalItem, amount);
          printAdditionalItem(additionalItem, amount);
        }
        else if (additionalSelector === 'Tax Rate (%)'){
          console.log(additionalItem+' ('+additionalItemValue +'%)', amount);
          printAdditionalItem(additionalItem+' ('+additionalItemValue +'%)', amount);
        }
        else 
        {
          // Do nothing
        }
      });

      // Print Total
      let totalText = '';
      if (isNaN(total) ){
        totalText = 'INVALID';
        // console.log(totalText)
        document.getElementById('previewGrandTotal').textContent = totalText;
      }else {
        totalText = (total >= 0) ? 'RM'+total.toFixed(2) : '- RM'+ Math.abs(total).toFixed(2)
        // console.log(totalText)
        document.getElementById("previewGrandTotal").textContent = totalText;
      }

      // document.getElementById('previewSubtotalItem').textContent = document.getElementById('subtotalItem').textContent;
      // document.getElementById('previewGrandTotal').textContent = document.getElementById('grandTotal').textContent;

      let bounderies = document.getElementById('invTemplate').getBoundingClientRect();
      // console.log('item dim (h x w): '+ bounderies.height, bounderies.width );

      let width = document.getElementById('invTemplate').offsetWidth;
      let height = document.getElementById('invTemplate').offsetHeight;
      // console.log('item dim in cm (h x w): '+ height*0.02645833, width*0.02645833 );

      if ( height*0.02645833 >= 29.7 && height*0.02645833 < 59.4){
        document.getElementById('invTemplate').style.height = '59.35cm'; // Slightly smaller than 59.4 - 2page
      }
      else if ( height*0.02645833 >= 59.4 && height*0.02645833 < 89.1){
        document.getElementById('invTemplate').style.height = '89.05cm';
      }
      else if ( height*0.02645833 >= 89.1 && height*0.02645833 < 118.8){
        document.getElementById('invTemplate').style.height = '118.75cm';
      }
      else if ( height*0.02645833 >= 118.8 && height*0.02645833 < 148.5){
        document.getElementById('invTemplate').style.height = '148.45cm';
      }
      else{
        // document.getElementById('invTemplate').style.height = 'auto';
      }
      

    }

    // START HERE ...............
    function printItem(desc, quantity, price, amount){
      // <tr class="item">
      //   <td style="font-size: small;"></td>
      //   <td style="text-align: right; font-size: small;"></td>
      //   <td style="text-align: right; font-size: small;"></td>
      //   <td style="text-align: right; font-size: small;"></td>
      // </tr>

      let td1 = document.createElement('td');
      td1.setAttribute('style', "font-size: small;");
      td1.textContent = desc

      let td2 = document.createElement('td');
      td2.setAttribute('style', "text-align: right; font-size: small;");
      td2.textContent = quantity

      let td3 = document.createElement('td');
      td3.setAttribute('style', "text-align: right; font-size: small;");
      td3.textContent = price

      let td4 = document.createElement('td');
      td4.setAttribute('style', "text-align: right; font-size: small;");
      td4.textContent = amount

      // Tr top
      let tr = document.createElement('tr');
      tr.className = 'item';
      tr.appendChild(td1);
      tr.appendChild(td2);
      tr.appendChild(td3);
      tr.appendChild(td4);

      const previewItemBody = document.getElementById('previewItemBody');
      const previewItemSubtotal = document.getElementById('previewItemSubtotal');
      previewItemBody.insertBefore(tr, previewItemSubtotal)
      // previewItemBody.insertBefore('#previewItemBody tr:nth-last-child(2)')
      // $( "#previewItemBody tr:nth-last-child(2)" ).append(tr);

      // previewItemBody.appendChild(tr);
    }

    
    function printAdditionalItem(additionalItem, amount){
    // <tr class="additional">
    //   <td></td>
    //   <td></td>
    //   <td style="text-align: right; font-size: small;"></td>
    //   <td style="text-align: right; font-size: small;"></td>
    // </tr>

      let td1 = document.createElement('td');
      let td2 = document.createElement('td');
      let td3 = document.createElement('td');
      td3.setAttribute('style', "text-align: right; font-size: small;");
      td3.textContent = additionalItem

      let td4 = document.createElement('td');
      td4.setAttribute('style', "text-align: right; font-size: small;");
      td4.textContent = amount

      // Tr top
      let tr = document.createElement('tr');
      tr.className = 'additional';
      tr.appendChild(td1);
      tr.appendChild(td2);
      tr.appendChild(td3);
      tr.appendChild(td4);

      const previewAdditionalItemBody = document.getElementById('previewAdditionalItemBody');
      // const previewItemSubtotal = document.getElementById('previewItemSubtotal');
      previewAdditionalItemBody.appendChild(tr);
    }

    // Print Subtotal 
    function printItemSubtotal(amount){
      // <td></td>
      // <td></td>
      // <td style="text-align: right; font-weight: 500; font-size: small;">Subtotal</td>
      // <td style="text-align: right; font-weight: 500; font-size: small;" id="previewSubtotalItem">RM50.00</td>

      let td1 = document.createElement('td');
 
      let td2 = document.createElement('td');
 
      let td3 = document.createElement('td');
      td3.setAttribute('style', "text-align: right; font-weight: 500; font-size: small;");
      td3.textContent = 'Subtotal'

      let td4 = document.createElement('td');
      td4.setAttribute('style', "text-align: right; font-weight: 500; font-size: small;");
      let amountText = (amount >= 0) ? 'RM'+amount.toFixed(2) : '- RM'+ Math.abs(amount).toFixed(2)
      td4.textContent = amountText;

      // Tr top
      let tr = document.createElement('tr');
      tr.className = 'subtotal';
      tr.setAttribute("style", "border-bottom: solid #eeeeee thin;");
      tr.appendChild(td1);
      tr.appendChild(td2);
      tr.appendChild(td3);
      tr.appendChild(td4);

      const previewItemBody = document.getElementById('previewItemBody');
      previewItemBody.appendChild(tr);
    }

    // END HERE ...............


    // Rich Text Editor
    function invNotesOnChangeHandler() {
      // alert("Some one modified something");
      // alert("The HTML is now:" + inst.getBody().innerHTML);

      document.getElementById("previewInvNotes").innerHTML = tinymce.get("invNotes").getContent();
      let invNotesContent = tinymce.get("invNotes").getContent({ format: "text" });
      document.getElementById("countNotes").textContent = invNotesContent.length + '/400';

    }

    function invFooterNotesOnChangeHandler(inst) {
      // alert("Some one modified something");
      // alert("The HTML is now:" + inst.getBody().innerHTML);
      document.getElementById("previewInvFooterNotes").innerHTML = tinymce.get("invFooterNotes").getContent();
      let invFooterNotesContent = tinymce.get("invFooterNotes").getContent({ format: "text" });
      document.getElementById("countFooterNotes").textContent = invFooterNotesContent.length + '/200';

    }

    function toDataURL(src, callback, outputFormat) {
      var img = new Image();
      // var img = document.getElementById("tutorImgUrl");
      var dataURL;
      img.crossOrigin = 'Anonymous';
      img.src = src;
      img.onload = function() {
        var canvas = document.createElement('CANVAS');
        var ctx = canvas.getContext('2d');
        
        canvas.height = this.naturalHeight;
        canvas.width = this.naturalWidth;
        ctx.drawImage(this, 0, 0);
        dataURL = canvas.toDataURL(outputFormat);
        // img.src = dataURL;
        // console.log(dataURL)
        var imgTarget = document.getElementById("previewTutorImgUrl");
        imgTarget.src = dataURL;
        callback(dataURL);
      };
      // img.src = src;
      // img.src = dataURL;
      if (img.complete || img.complete === undefined) {
        img.src = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";
        img.src = src;
      }
    }

    // Generate PDF
    // https://ekoopmans.github.io/html2pdf.js/
    function generatePDFeKoopmans(id){

      element = document.getElementById(id);

      var opt = {
        margin:       [0, 0, 0, 0],
        filename:     'my_invoice.pdf',
        pagebreak:    { before: '.beforeClass', after: ['#after1', '#after2'], avoid: 'img' },
        image:        { type: 'jpeg', quality: 0.95 },
        html2canvas:  { scale: 2 },
        jsPDF:        { unit: 'in', format: 'a4', orientation: 'portrait' }
      };

      html2pdf().set(opt).from(element).save();
    }

  </script>

  <script>

		$( document ).ready(function() {

      // Active Register Class Modal
      $('#loadingModal').modal({
        backdrop:'static',
        keyboard:false,
        show: false
      });

      $('#btnSignOutModalUpdate').on('click', function (e) {
        firebase.auth().signOut().then(() => {
            // Sign-out successful.
          }).catch((error) => {
            func.showNotification('top','center', 'danger', 'error_outline', "Logging out failed." );

          });
      });

		});

  </script>
  
  <!-- More functions -->
  <script>

    // Dealing with Textarea Height
    function calcHeight(value) {
      let numberOfLineBreaks = (value.match(/\n/g) || []).length;
      // min-height + lines x line-height + padding + border
      let newHeight = 20 + numberOfLineBreaks * 20 + 12 + 2;
      return newHeight;
    }

    // let textarea = document.querySelector(".resize-ta");
    // textarea.addEventListener("keyup", () => {
    //   textarea.style.height = calcHeight(textarea.value) + "px";
    // });

	  function editClassFunction(elem){
      // Get attribute and 
      if (JSON.parse(sessionStorage.getItem(SESSION_STORAGE_CLASS_ALL_DOCS_KEY)) == null ){
        console.log("Error: Impossible to reach this state");
        // Because this func only trigger when there's active class loaded
        return;
      }else{

        let classObj = null;
        let allClassList = null;

        // Set the fields
        allClassList = JSON.parse(sessionStorage.getItem(SESSION_STORAGE_CLASS_ALL_DOCS_KEY));
        // allClassList = classObj[SESSION_STORAGE_ALL_DOCS_KEY];
        allClassList.forEach((item) => {
          if (item.id === elem.getAttribute('data-id')){
            sessionStorage.setItem(SESSION_STORAGE_CLASS_CURRENT_DOC_KEY, JSON.stringify(item));
            sessionStorage.setItem(SESSION_STORAGE_CLASS_LOAD_KEY, true);
          }
          // window.location = './edit-class.html?id='+elem.getAttribute('data-id');
          window.location = './edit-class.html?id=';

          // console.log(item);
        });
        
      }
		}

  </script>


</body>

</html>