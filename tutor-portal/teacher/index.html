<!doctype html>
<html lang="en">

<head>
  <title>GoLearn Tutor</title>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <!-- Fonts and icons -->
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
  <script src="https://kit.fontawesome.com/2bdd669e92.js" crossorigin="anonymous"></script>
  <!-- Material Kit CSS -->
  <link href="../assets/css/material-dashboard.css?v=2.1.2" rel="stylesheet" />
  <link href="../assets/demo/demo.css" rel="stylesheet" />
  <!-- Firebase Init -->
  <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-storage.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-firestore.js"></script>
  <script src="../js/firebase.js"></script>
  <!-- Tutor Portal specific CSS -->
  <link href="../css/tutor-portal.css" rel="stylesheet" />
</head>

<body>

  <div class="wrapper ">
    <div class="sidebar" data-color="purple" data-background-color="white" data-image="assets/img/sidebar-3.jpg">
      <!--
      Tip 1: You can change the color of the sidebar using: data-color="purple | azure | green | orange | danger"

      Tip 2: you can also add an image using data-image tag
  -->
      <div class="logo">
        <a href="#" class="simple-text logo-mini">
			<img src="../source/logo.png" style="width: 216px; height: auto;" alt=""></img>
          
        </a>
        <a href="#" class="simple-text logo-normal">
         Welcome!
        </a>
      </div>
      <div class="sidebar-wrapper">
        <ul class="nav">
          <li class="nav-item">
            <a class="nav-link" href="../class/class.html">
              <i class="material-icons">home</i>
              <p>Class</p>
            </a>
          </li>
		  		<li class="nav-item">
            <a class="nav-link" href="../student/student.html">
              <i class="material-icons">work_outline</i>
              <p>Students</p>
            </a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="./">
              <i class="material-icons">format_list_bulleted</i>
              <p>Teachers</p>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="main-panel">
      <!-- Navbar -->
      <nav class="navbar navbar-expand-lg navbar-transparent navbar-absolute fixed-top ">
        <div class="container-fluid">
          <div class="navbar-wrapper">
            <a class="navbar-brand" href="javascript:;">Teachers</a>
          </div>
          <button class="navbar-toggler" type="button" data-toggle="collapse" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
            <span class="sr-only">Toggle navigation</span>
            <span class="navbar-toggler-icon icon-bar"></span>
            <span class="navbar-toggler-icon icon-bar"></span>
            <span class="navbar-toggler-icon icon-bar"></span>
          </button>
          <div class="collapse navbar-collapse justify-content-end">
            <form class="navbar-form">
              <!-- Put empty placeholder here -->
            </form>

            <ul class="navbar-nav">
              <li class="nav-item" id="activationNavItem">
                <a href="#" class="btn btn-danger btn-round" style="visibility: hidden;" id="btnActivateAccount" ></a>
              </li>
              <li class="nav-item">
                <a class="navbar-brand" href="javascript:;">
                   Hi <span id="user"></span> !
                </a> 
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link" href="javascript:;" id="navbarDropdownNotification" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <i class="material-icons">notifications</i> Notifications
                </a>
                <!-- <a class="nav-link" href="http://example.com" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <i class="material-icons">notifications</i>
                  <span class="notification">5</span>
                  <p class="d-lg-none d-md-block">
                    Some Actions
                  </p>
                </a> -->
								<div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
									<p style="padding: 1em;" >No notification</p>
                  <!-- <a class="dropdown-item" href="#">Mike John responded to your email</a>
                  <a class="dropdown-item" href="#">You have 5 new tasks</a>
                  <a class="dropdown-item" href="#">You're now friend with Andrew</a>
                  <a class="dropdown-item" href="#">Another Notification</a>
                  <a class="dropdown-item" href="#">Another One</a> -->
                </div>
              </li>
              <!-- your navbar here -->
			  
			  			<li class="nav-item dropdown">
                <a class="nav-link" href="javascript:;" id="navbarDropdownProfile" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <i class="material-icons">person</i>
                  <p class="d-lg-none d-md-block">
                    Account
                  </p>
                </a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownProfile">
                  <a class="dropdown-item" href="./edit-profile.html">Edit Profile</a>
                  <a id="navPublicProfile" class="dropdown-item" href="#">My Public Profile</a>
									<a class="display:block; dropdown-item" href="./about.html">About</a>
									<div class="dropdown-divider"></div>
                  <a class="dropdown-item" href="javascript:;" onclick="signOutFunction()" id="btn-logout">Log out</a>
									<div class="dropdown-divider"></div>
									<a style="font-weight: 500 ;padding: 0.5em ;text-align: center; width: 200px; background-color: #428dd4 ;display: block; color: #fff;" href="https://golearn.com.my/pricing/" target="_blank" id="btnUpgradeToPro">Upgrade to Pro</a>

                </div>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <!-- End Navbar -->

			<!-- Modal Start -->
      
      <!-- Add Tutor modal -->
      <div class="row">
        <div class="modal fade" id="addTutorModal" tabindex="-1" role="dialog" aria-labelledby="addTutorModalLabel" aria-hidden="true">
          <div class="modal-dialog  modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="addTutorModalLabel">Invite New Teacher</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="btnAddTutorModalClose1">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body" id="addTutorModalBody">

                <div class="form-group" style="margin-top: 0rem;">
                  <span class="" style="font-size: smaller; font-weight: 300; color: gray; margin-bottom: 0;">New Teacher Registration Link</span> 
                  <div class="input-group">
                    <span class="d-flex align-items-center input-group-addon" style="margin-right: 0.5em; cursor: pointer;" onclick="copyText('inAutoJoinLink')">
                      <span class="material-icons">
                        content_copy
                      </span>
                    </span>
                    <input type="text" value='' class="form-control" style="background-color: #f5f5f5; pointer-events: none;" id="inAutoJoinLink">
                  </div>
                </div>

              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal" id="btnAddTutorModalClose2">Not Now</button>
                <!-- <button type="button" class="btn btn-primary" data-dismiss="modal" id="btnAddTutorModalUpdate"></button> -->
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Activation modal -->
      <div class="row">
        <div class="modal fade" id="activationModal" tabindex="-1" role="dialog" aria-labelledby="activationModalLabel" aria-hidden="true">
          <div class="modal-dialog  modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="activationModalLabel">New message</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="btnActivationModalClose1">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body" id="activationModalBody">
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal" id="btnActivationModalClose2">Not Now</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" id="btnActivationModalUpdate">Join Us</button>
              </div>
            </div>
          </div>
        </div>
      </div>
			
      <!-- Sign Out modal -->
      <div class="row">
        <div class="modal fade" id="signOutModal" tabindex="-1" role="dialog" aria-labelledby="signOutModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="signOutLabel">Logging Out</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="btnSignOutModalClose1">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body" id="signOutModalBody">
                Are you sure you want to continue?
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal" id="btnSignOutModalClose2">Cancel</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" id="btnSignOutModalUpdate">Confirm</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- View Tutor Modal -->
       <div class="row">
        <div class="modal fade" id="viewTutorModal" tabindex="-1" role="dialog" aria-labelledby="viewTutorModalLabel" aria-hidden="true">
          <div class="modal-dialog  modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="viewTutorModalLabel">Tutor Profile</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <div class="row">
                  <div class="col-md-4 text-center">
                    <div style="height: 140px;width: 140px; display: inline-block; position: relative; overflow: hidden; border-radius: 50%;">
                      <img id="viewTutorImgUrl" style="height: 100%;width: 100%; object-fit: cover;" src="../../assets/img/test.jpg"/>
                    </div>

                  </div>

                  <div class="col-md-8">
                    <span class="" style="font-size: smaller; font-weight: 300; color: gray; padding-right: 2rem;">Name</span> 
                    <input id="viewTutorName"  type="text" value='' class="form-control" style="pointer-events: none;" readonly>

                    <div class="row">
                      <div class="col-md-6">
                        <span class="" style="font-size: smaller; font-weight: 300; color: gray; padding-right: 2rem;">Phone</span> 
                        <input id="viewTutorPhone"  type="text" value='' class="form-control" style="pointer-events: none;" readonly>
    
                      </div>
                      <div class="col-md-6">
                        <span class="" style="font-size: smaller; font-weight: 300; color: gray; padding-right: 2rem;">Email</span> 
                        <input id="viewTutorEmail"  type="text" value='' class="form-control" style="pointer-events: none;" readonly>
    
                      </div>
                    </div>

   
                    <div class="row">
                      <div class="col-md-6">
                        <span class="" style="font-size: smaller; font-weight: 300; color: gray; padding-right: 2rem;">Gender</span> 
                        <div class="form-group">
                          <div class="form-check form-check-radio form-check-inline">
                            <label class="form-check-label">
                              <input class="form-check-input" type="radio" name="tutorGender" id="viewTutorGenderRadioMale" value="optionActive" data-compulsory="false" disabled>
                              Male
                              <span class="circle">
                                <span class="check"></span>
                              </span>
                            </label>
                          </div>
                          <div class="form-check form-check-radio form-check-inline">
                            <label class="form-check-label">
                              <input class="form-check-input" type="radio" name="tutorGender" id="viewTutorGenderRadioFemale" value="optionInactive" data-compulsory="false" disabled>
                              Female
                              <span class="circle">
                                <span class="check"></span>
                              </span>
                            </label>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <span class="" style="font-size: smaller; font-weight: 300; color: gray; padding-right: 2rem;">Age</span> 
                        <input id="viewTutorAge"  type="text" value='' class="form-control" style="pointer-events: none;" readonly>
    
                      </div>
                    </div>

                  </div>

                </div>
              </div>
              <div class="modal-footer">
                <a type="button" class="btn btn-primary" href="#" id="btnViewTutorModalFullProfile" disabled>View Full Profile</a>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <!-- <button type="button" class="btn btn-primary" data-dismiss="modal" id="btnViewTutorModalUpdate">Update</button> -->
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Main content -->
      <div class="content">
        <div class="container-fluid">
          <!-- your content here -->

          <!-- Main content -->
          <div class="row" id="desciption-row" >
            <!-- button -->
            <div class="d-flex flex-row">
              <a href="#" class="btn btn-primary btn-round" style="background-color: #2e74b6;" data-target="#addTutorModal" data-toggle="modal">Add Teacher <i class="material-icons" style="color: white; margin-left: 0.5em; padding-bottom: 0.2em;">east</i></a>
            </div>

            <div class="col-lg-6 col-md-6 col-sm-6 ">
              <!-- <a class="d-flex justify-content-end" href="javascript:;" id="btnUpdate" style="margin-top: 1rem;" >About Premium Subjects</a> -->
            </div>
          </div>

          <!-- All Class -->
          <div class="row" id="card-all-tutor">
            <!-- <div class="col-lg-2 col-md-3 col-6">
              <div class="card-tutor text-center ">
                <div style="height: 100px;width: 100px; display: inline-block; position: relative; overflow: hidden; border-radius: 50%;">
                  <img id="tutorImgUrl" style="height: 100%;width: 100%; object-fit: cover;" src="../../assets/img/test.jpg"/>
                </div>
                <div style="margin-top:1rem">
                  <h4 id="className">Alric Liew </h4>
                </div>
              </div>
            </div> -->
          </div>
        </div>

        <footer class="footer">
          <div class="container-fluid">
            <nav class="float-left">
            <ul>
              <!-- <li>
              <a href="https://golearn.com.my/join-us" target="_blank">
                Visit GoLearn Tutor
              </a>
              </li> -->
            </ul>
            </nav>
          </div>
        </footer>
      </div>
    </div>

  <div class="fixed-plugin">
    <div class="dropdown show-dropdown">
      <a href="#" data-toggle="dropdown">
				<i class="material-icons" style="font-size: 36px; padding: 0.2em; color: white;">apps</i>
      </a>
      <ul class="dropdown-menu">
		    <br>
        <li class="header-title">Get More Tuition Jobs?</li>
        <li class="button-container">
          <a href="https://golearn.com.my/job/" target="_blank" class="btn btn-primary btn-block">Apply Now</a>
        </li>
        
        <li class="button-container">
          <a href="https://golearn.com.my/" target="_blank" class="btn btn-default btn-block">
            Visit our website
          </a>
        </li>
       
        <li class="header-title">Follow and Like Us!</li>
        <li class="button-container text-center">
			    <button id="facebook" class="btn btn-round btn-facebook" onclick="window.open('https://www.facebook.com/FindTutorInMalaysia/', '_blank');"><i class="fa fa-facebook-f"></i> &middot; facebook</button>
          <button id="twitter"  class="btn btn-round btn-twitter" onclick="window.open('https://twitter.com/golearnmalaysia', '_blank');"><i class="fa fa-twitter"></i> &middot; twitter</button>
          <button id="instagram"  class="btn btn-round btn-twitter" style="background: linear-gradient(45deg, #f09433 0%,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%); " onclick="window.open('https://www.instagram.com/golearn.education/', '_blank');"><i class="fa fa-instagram"></i> &middot; instagram</button>
          <br>
          <br>
        </li>
        <li class="header-title">Found a problem? </li>
        <li class="button-container">
          <a href="https://golearn.com.my/submit-anything-to-us/" target="_blank" class="btn btn-warning btn-block">
            Let us know
          </a>
          <br>
        </li>
      </ul>
    </div>
  </div>
  
  <script src="../assets/js/core/jquery.min.js"></script>
  <script src="../assets/js/core/popper.min.js"></script>
  <script src="../assets/js/core/bootstrap-material-design.min.js"></script>
  <script src="../assets/js/plugins/perfect-scrollbar.jquery.min.js"></script>
  <!-- Plugin for the momentJs  -->
  <script src="../assets/js/plugins/moment.min.js"></script>
  <!--  Plugin for Sweet Alert -->
  <script src="../assets/js/plugins/sweetalert2.js"></script>
  <!-- Forms Validations Plugin -->
  <script src="../assets/js/plugins/jquery.validate.min.js"></script>
  <!-- Plugin for the Wizard, full documentation here: https://github.com/VinceG/twitter-bootstrap-wizard -->
  <!-- <script src="assets/js/plugins/jquery.bootstrap-wizard.js"></script> -->
  <!-- 	Plugin for Select, full documentation here: http://silviomoreto.github.io/bootstrap-select -->
  <!-- <script src="assets/js/plugins/bootstrap-selectpicker.js"></script> -->
  <!--  Plugin for the DateTimePicker, full documentation here: https://eonasdan.github.io/bootstrap-datetimepicker/ -->
  <!-- <script src="assets/js/plugins/bootstrap-datetimepicker.min.js"></script> -->
  <!--  DataTables.net Plugin, full documentation here: https://datatables.net/  -->
  <!-- <script src="assets/js/plugins/jquery.dataTables.min.js"></script> -->
  <!-- 	Plugin for Tags, full documentation here: https://github.com/bootstrap-tagsinput/bootstrap-tagsinputs  -->
  <!-- <script src="assets/js/plugins/bootstrap-tagsinput.js"></script> -->
  <!-- Plugin for Fileupload, full documentation here: http://www.jasny.net/bootstrap/javascript/#fileinput -->
  <!-- <script src="assets/js/plugins/jasny-bootstrap.min.js"></script> -->
  <!--  Full Calendar Plugin, full documentation here: https://github.com/fullcalendar/fullcalendar    -->
  <!-- <script src="assets/js/plugins/fullcalendar.min.js"></script> -->
  <!-- Vector Map plugin, full documentation here: http://jvectormap.com/documentation/ -->
  <!-- <script src="assets/js/plugins/jquery-jvectormap.js"></script> -->
  <!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
  <!-- <script src="assets/js/plugins/nouislider.min.js"></script> -->
  <!-- Include a polyfill for ES6 Promises (optional) for IE11, UC Browser and Android browser support SweetAlert -->
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/core-js/2.4.1/core.js"></script> -->
  <!-- Library for adding dinamically elements -->
  <!-- <script src="assets/js/plugins/arrive.min.js"></script> -->
  <!--  Google Maps Plugin    -->
  <!-- <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE"></script> -->
  <!-- Chartist JS -->
  <!-- <script src="assets/js/plugins/chartist.min.js"></script> -->
  <!--  Notifications Plugin    -->
  <script src="../assets/js/plugins/bootstrap-notify.js"></script>
  <!-- Control Center for Material Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="../assets/js/material-dashboard.js?v=2.1.2" type="text/javascript"></script>
  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.min.js" integrity="sha384-lpyLfhYuitXl2zRZ5Bn2fqnhNAKOAaM/0Kr9laMspuaMiZfGmfwRNFh8HlMy49eQ"     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8" crossorigin="anonymous"></script>
  <!-- Common constants -->
  <script src="../../assets/js/common.js" type="text/javascript"></script>
  <!-- Core Tutor Js -->
  <script src="../../assets/js/tutor-core.js" type="text/javascript"></script>
	<script>
    // Global Variables
    var tutorId;
    var current_name, current_email, current_phone, current_age, current_gender, current_imgUri, current_nric,
      current_address1, current_address2, current_addressPostCode, current_addressState,
      current_rating, current_ratingTimes, current_ratingFinal, current_profileStatus,
      current_token, current_agent, current_accountStatus;
    var currentYearsExperience, currentTutoringExperience, currentTutoringApproach, currentQualification, 
      current_preferedAreaList, current_preferedSubjectList;
    // Depreciated
    // var current_chk_homeTutor, current_chk_privateTutor, current_chk_groupTutor, current_chk_onlineTutor;
    var isModeHomeStudentToTutor, isModeHomeTutorToStudent, isModeGroup, isModeOnline, isModeOnlineGroup;
    var isLanEng, isLanBm, isLanBc, isLanBt, isLanOther;
    var current_chk_homeStudentToTutor, current_chk_homeTutorToStudent, current_chk_group, current_chk_online, current_chk_onlineGroup;
    var current_mon_8am, current_mon_12pm, current_mon_3pm, current_mon_6pm, 
      current_tue_8am, current_tue_12pm, current_tue_3pm, current_tue_6pm, 
      current_wed_8am, current_wed_12pm, current_wed_3pm, current_wed_6pm, 
      current_thu_8am, current_thu_12pm, current_thu_3pm, current_thu_6pm, 
      current_fri_8am, current_fri_12pm, current_fri_3pm, current_fri_6pm,
      current_sat_8am, current_sat_12pm, current_sat_3pm, current_sat_6pm, 
      current_sun_8am, current_sun_12pm, current_sun_3pm, current_sun_6pm;
    var current_aweburl, current_aPremiumSubjectLimit, current_aPremiumConnectLimit, current_aTotalSubjectLimit, 
     current_aTotalConnectLimit, current_aPreferredSubjectLimit, current_aPreferredAreaLimit;
     
    // Course-specific var
    var allCourseSize;
		var db = firebase.firestore();
		db.settings({ timestampsInSnapshots: true });

    // Set the nav name and global var, if user already login and have session Storage 
    var tutorInfoObj = null;
    if (JSON.parse(sessionStorage.getItem("tutorInfoObj")) == null ){
      // Do nothing
    }
    else{
      // Set the nav user name
      tutorInfoObj = JSON.parse(sessionStorage.getItem("tutorInfoObj"));
      document.getElementById("user").textContent = tutorInfoObj.name;

      current_name = (tutorInfoObj.name == null || tutorInfoObj.name == "")? "New Tutor" : tutorInfoObj.name;
      // current_email, 
      // current_phone, 
      current_age = (tutorInfoObj.age == null || tutorInfoObj.age == "")? "18" : tutorInfoObj.age; 
      current_gender= (tutorInfoObj.gender == 0)? "Male" : "Female"; 
      current_imgUri = (tutorInfoObj.imgUrl == null || tutorInfoObj.imgUrl == "")? "../assets/img/hello.gif" : tutorInfoObj.imgUrl;
      current_accountStatus = tutorInfoObj.accountStatus; // bool
      currentYearsExperience = tutorInfoObj.yearsExperience; // number
      currentTutoringExperience = tutorInfoObj.tutoringExperience;
      currentTutoringApproach = tutorInfoObj.tutoringApproach;
      currentQualification= tutorInfoObj.qualification;
      
      current_aweburl = tutorInfoObj.aWebUrl

      // updatePageView(current_accountStatus);
    }

		firebase.auth().onAuthStateChanged(function(user){
      
			if(!user){
        // Return to login if user does not exist.
				window.location.href = "login.html"
			}else{
        // if the displayName is null, it means user register using Phone
        if (firebase.auth().currentUser.displayName == null ){
            tutorId = firebase.auth().currentUser.phoneNumber;
        }else{
          tutorId = firebase.auth().currentUser.email.replace("[^a-zA-Z0-9]", "_").toLowerCase();
        }
          loadAllTutorInfo()

          // Update Add Teacher Registration Link
          let uriAdminId = encodeURIComponent(tutorId);
          document.getElementById("inAutoJoinLink").value = 'http://192.168.43.47:8080/tutor-portal/tutor-registration.html?aid='+uriAdminId;

          
			}
		});

    // Tutor Specific
    function loadAllTutorInfo(){
      let docRef = db.collection("Class")
          .doc("v1")
          .collection("Tutor")
          .where("adminId", "==", tutorId)
          .where("statusAdmin", "==", true);
      

      docRef
      .get()
      .then((querySnapshot) => {

        // Session Storage data
        let docsObj = [];

        querySnapshot.forEach((doc) => {

          docsObj.push(doc.data());
          // courseId = doc.id;
          console.log(doc.data())
          renderAllActiveTutor(doc);

        });

        // Store all docs data to sessionStorage
        sessionStorage.setItem(SESSION_STORAGE_TUTOR_ALL_DOCS_KEY, JSON.stringify(docsObj));
        sessionStorage.setItem(SESSION_STORAGE_TUTOR_CURRENT_DOC_KEY, null);
 
      });

    };

    function renderAllActiveTutor(doc){
      // <div class="col-lg-2 col-md-3 col-6">
      //   <div class="card-tutor text-center" >
          // <div style="height: 100px;width: 100px; display: inline-block; position: relative; overflow: hidden; border-radius: 50%;">
          //   <img id="tutorImgUrl" style="height: 100% ;width: 100%; object-fit: cover;" src="../../assets/img/sidebar-1.jpg"/>
          // </div>
      //     <div style="margin-top:1rem">
      //       <h4 id="className">Alric Liew </h4>
      //     </div>
      //   </div>
      // </div>

      let img = document.createElement('img');
      img.setAttribute('style', 'height: 100%; width: 100%; object-fit: cover;');
      img.setAttribute('src', doc.data()[TUTOR_TUTOR_IMG_URL]);
      let img_div = document.createElement('div');
      img_div.setAttribute('style', 'height: 100px;width: 100px; display: inline-block; position: relative; overflow: hidden; border-radius: 50%;')
      img_div.appendChild(img)

      let name_h4 = document.createElement('h4');
      name_h4.textContent = doc.data()[TUTOR_TUTOR_NAME];
      let name_div = document.createElement('div');
      name_div.setAttribute('style', 'margin-top:1rem;');
      name_div.appendChild(name_h4);
      
      let tutor_div = document.createElement('div');
      tutor_div.className = "card-tutor text-center";
      tutor_div.appendChild(img_div);
      tutor_div.appendChild(name_div);

      let tutor_card_div = document.createElement('div');
      tutor_card_div.className = 'col-lg-2 col-md-3 col-6';
      tutor_card_div.setAttribute('onclick', 'viewTutorFunction(this)');
      tutor_card_div.setAttribute('data-target', '#viewTutorModal');
      tutor_card_div.setAttribute('data-toggle', 'modal');
      tutor_card_div.setAttribute('data-id', doc.data()[TUTOR_ID]);
      tutor_card_div.appendChild(tutor_div)
        
      const card_all_tutor = document.getElementById("card-all-tutor");
      card_all_tutor.appendChild(tutor_card_div);
    }

	  function viewTutorFunction(elem){
      // Get attribute and 
      if (JSON.parse(sessionStorage.getItem(SESSION_STORAGE_TUTOR_ALL_DOCS_KEY)) == null ){
        console.log("Error: Impossible to reach this state");
        // Because this func only trigger when there's active class loaded
        return;
      }else{

        let allClassList = null;

        // Set the fields
        allClassList = JSON.parse(sessionStorage.getItem(SESSION_STORAGE_TUTOR_ALL_DOCS_KEY));
        allClassList.forEach((item) => {
          if (item.id === elem.getAttribute('data-id')){
            // Assign the data to viewTutorModal
            document.getElementById("viewTutorName").value = item[TUTOR_TUTOR_NAME];
            document.getElementById("viewTutorPhone").value = item[TUTOR_TUTOR_PHONE];
            document.getElementById("viewTutorEmail").value = item[TUTOR_TUTOR_EMAIL];
            document.getElementById("viewTutorGenderRadioMale").checked = item[TUTOR_TUTOR_GENDER] == 0 ? true: false;
            document.getElementById("viewTutorGenderRadioFemale").checked = item[TUTOR_TUTOR_GENDER] == 1 ? true: false;
            document.getElementById("viewTutorAge").value = item[TUTOR_TUTOR_AGE];
            document.getElementById("viewTutorImgUrl").src = item[TUTOR_TUTOR_IMG_URL];
            console.log(item[TUTOR_TUTOR_WEB_URL])
            if (item[TUTOR_TUTOR_WEB_URL] == null || item[TUTOR_TUTOR_WEB_URL] == ''){
              document.getElementById("btnViewTutorModalFullProfile").disabled = true;  
              document.getElementById("btnViewTutorModalFullProfile").setAttribute('href','#'); 
              document.getElementById("btnViewTutorModalFullProfile").setAttribute('target',''); 
            }
            else{
              document.getElementById("btnViewTutorModalFullProfile").disabled = false;      
              document.getElementById("btnViewTutorModalFullProfile").setAttribute('href','https://golearn.com.my/tutor/'+item[TUTOR_TUTOR_WEB_URL]); 
              document.getElementById("btnViewTutorModalFullProfile").setAttribute('target','_blank'); 
            }

            // sessionStorage.setItem(SESSION_STORAGE_TUTOR_CURRENT_DOC_KEY, JSON.stringify(item));
            // sessionStorage.setItem(SESSION_STORAGE_CLASS_LOAD_KEY, true);
          }
          // window.location = './edit-class.html?id=';

          // console.log(item);
        });
        
      }
		}
    // Copy a text based on element ID
    function copyText(targetElemId){
      /* Get the text field */
      let copyText = document.getElementById(targetElemId);
      console.log(copyText)
      console.log(copyText.select())
      /* Select the text field */
      copyText.focus();
      copyText.select();
      copyText.setSelectionRange(0, 99999); /* For mobile devices */

      /* Copy the text inside the text field */
      navigator.clipboard.writeText(copyText.value);

    }

    // Sign out
    function signOutFunction(){
      $('#signOutModal').modal('show');
      $("#signOutModal").appendTo("body");
    }
  
  </script>

  <script>
		$( document ).ready(function() {

      // Class Announcement
      // KEY, DATETIME, ID, JOB_STATUS and JOB_EXPLANATION var is global var used to simplify modal fire and hide.
      var KEY = ""; // Extract info from data-* attributes
      var DATETIME = ""; // Extract info from data-* attributes
      var ID = ""; // Extract info from data-* attributes
      var ANNOUNCEMENT = ""; // Extract info from data-* attributes

      // Update Class Annoucement
      $('#btnEditClassModalUpdate').on('click', function (e) {
        var docData = {
          [CLASS_ANNOUNCEMENT]: document.getElementById("modalClassAnnouncement").value,
        }
        // Set data
        db.collection("Class")        
          .doc("v1")
          .collection("Class")
          .doc(ID)
          .set(docData, {merge: true})
          .then(() => {
            window.location = './class.html';
          })
          .catch((error) => {
              console.error("Error writing document: ", error);
          });;

			  $('#editClassModal').modal('hide');
		  });

      $('#editClassModal').on('show.bs.modal', function (event) {
        var button = $(event.relatedTarget) // Button/Components that triggered the modal
        ID = button.data('id') // Extract info from data-* attributes
        ANNOUNCEMENT = button.data('announcement') // Extract info from data-* attributes
        // Load Desription 
        document.getElementById("modalClassAnnouncement").textContent = ANNOUNCEMENT;

      });
      
      // Clear key and fields in modal when modal dismiss
      $('#editClassModal').on('hide.bs.modal', function (event) {
        ID = "";
        ANNOUNCEMENT = "";
        document.getElementById("modalClassAnnouncement").textContent = "";
      });


      $('#btnSignOutModalUpdate').on('click', function (e) {
      
        firebase.auth().signOut().then(() => {
            // Sign-out successful.
          }).catch((error) => {
            // window.alert("Logging out failed");
            func.showNotification('top','center', 'danger', 'error_outline', "Logging out failed." );

          });
        // Do something
        $('#signOutModal').modal('hide');
      });

      $('#btnSignOutModalClose1').on('click', function (e) {
        $('#signOutModal').modal('hide');
      });
      $('#btnSignOutModalClose2').on('click', function (e) {
        $('#signOutModal').modal('hide');
      });

			// Add New Course
			$("#btnAddClass").click(function(){
        window.location = "./add-class.html"

        // if (current_accountStatus == DEACTIVATED_ACCOUNT_STATUS_KEY || current_accountStatus == SUSPENDED_ACCOUNT_STATUS_KEY){
        //   func.showNotification('top','center', 'danger', 'error_outline', "Activate your account to add new courses." );
        // }else if  (allCourseSize >= current_aTotalSubjectLimit){
        //   func.showNotification('top','center', 'danger', 'error_outline', "You have reach maximum ("+current_aTotalSubjectLimit+") subjects. Upgrade to Pro now!" );
        // }else if (current_preferedAreaList == null || current_preferedAreaList.length == 0){
        //   func.showNotification('top','center', 'danger', 'error_outline', "Please fill in Update Information > Preferred Area");
        // }
        // else{
        //   window.location = "./add-class.html"
        // }
			});
    
		});

  </script>
  
  <!-- More functions -->
  <script>
	  function editClassFunction(elem){
      // Get attribute and 
      if (JSON.parse(sessionStorage.getItem(SESSION_STORAGE_CLASS_ALL_DOCS_KEY)) == null ){
        console.log("Error: Impossible to reach this state");
        // Because this func only trigger when there's active class loaded
        return;
      }else{

        let classObj = null;
        let allClassList = null;

        // Set the fields
        allClassList = JSON.parse(sessionStorage.getItem(SESSION_STORAGE_CLASS_ALL_DOCS_KEY));
        // allClassList = classObj[SESSION_STORAGE_ALL_DOCS_KEY];
        allClassList.forEach((item) => {
          if (item.id === elem.getAttribute('data-id')){
            sessionStorage.setItem(SESSION_STORAGE_CLASS_CURRENT_DOC_KEY, JSON.stringify(item));
            sessionStorage.setItem(SESSION_STORAGE_CLASS_LOAD_KEY, true);
          }
          // window.location = './edit-class.html?id='+elem.getAttribute('data-id');
          window.location = './edit-class.html?id=';

          // console.log(item);
        });
        
      }
		}

  </script>
 
</body>

</html>