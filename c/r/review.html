
<!doctype html>
<html lang="en">

<head>
  <!-- Meta -->
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <title>GoLearn School</title>
  <meta name=description content="GoLearn School&trade; is Malaysia #1 teaching platform to run your tuition business and manage your lessons. Start now for Free!">
  <meta property=og:title content=GoLearn>
  <meta property=og:site_name content=GoLearn>
  <meta property=og:type content=website>
  <meta property=og:url content=https://app.golearn.com.my/c/r/ >
  <meta property=og:image content=https://app.golearn.com.my/assets/img/icon-apple-touch-180x180.png>
  <meta property=og:description content="GoLearn School&trade; is Malaysia #1 teaching platform to run your tuition business and manage your lessons. Start now for Free!">
  <link rel=apple-touch-icon sizes=180x180 href=https://app.golearn.com.my/assets/img/icon-apple-touch-180x180.png>
  <link rel=icon type=image/png sizes=32x32 href=https://app.golearn.com.my/assets/img/icon-32x32.png>
  <link rel=icon type=image/png sizes=16x16 href=https://app.golearn.com.my/assets/img/icon-16x16.png>
  <!--     Fonts and icons     -->
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
  <script src="https://kit.fontawesome.com/2bdd669e92.js" crossorigin="anonymous"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-firestore.js"></script>
  <script src="../../assets/js/firebase.js"></script>
  <!-- Material Kit CSS -->
  <link href="../../assets/css/material-dashboard.css?v=2.1.2" rel="stylesheet" />
  <link  href="../../assets/css/intlTelInput.css" rel="stylesheet">

  <style>
    .rating {
      display: flex;
      width: 100%;
      justify-content: center;
      overflow: hidden;
      flex-direction: row-reverse;
      height: 150px;
      position: relative;
    }

    .rating-0 {
      filter: grayscale(100%);
    }

    .rating > input {
      display: none;
    }

    .rating > label {
      cursor: pointer;
      width: 40px;
      height: 40px;
      margin-top: auto;
      background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' width='126.729' height='126.73'%3e%3cpath fill='%23e3e3e3' d='M121.215 44.212l-34.899-3.3c-2.2-.2-4.101-1.6-5-3.7l-12.5-30.3c-2-5-9.101-5-11.101 0l-12.4 30.3c-.8 2.1-2.8 3.5-5 3.7l-34.9 3.3c-5.2.5-7.3 7-3.4 10.5l26.3 23.1c1.7 1.5 2.4 3.7 1.9 5.9l-7.9 32.399c-1.2 5.101 4.3 9.3 8.9 6.601l29.1-17.101c1.9-1.1 4.2-1.1 6.1 0l29.101 17.101c4.6 2.699 10.1-1.4 8.899-6.601l-7.8-32.399c-.5-2.2.2-4.4 1.9-5.9l26.3-23.1c3.8-3.5 1.6-10-3.6-10.5z'/%3e%3c/svg%3e");
      background-repeat: no-repeat;
      background-position: center;
      background-size: 76%;
      transition: .3s;
    }

    .rating > input:checked ~ label,
    .rating > input:checked ~ label ~ label {
      background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' width='126.729' height='126.73'%3e%3cpath fill='%23fcd93a' d='M121.215 44.212l-34.899-3.3c-2.2-.2-4.101-1.6-5-3.7l-12.5-30.3c-2-5-9.101-5-11.101 0l-12.4 30.3c-.8 2.1-2.8 3.5-5 3.7l-34.9 3.3c-5.2.5-7.3 7-3.4 10.5l26.3 23.1c1.7 1.5 2.4 3.7 1.9 5.9l-7.9 32.399c-1.2 5.101 4.3 9.3 8.9 6.601l29.1-17.101c1.9-1.1 4.2-1.1 6.1 0l29.101 17.101c4.6 2.699 10.1-1.4 8.899-6.601l-7.8-32.399c-.5-2.2.2-4.4 1.9-5.9l26.3-23.1c3.8-3.5 1.6-10-3.6-10.5z'/%3e%3c/svg%3e");
    }


    .rating > input:not(:checked) ~ label:hover,
    .rating > input:not(:checked) ~ label:hover ~ label {
      background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' width='126.729' height='126.73'%3e%3cpath fill='%23d8b11e' d='M121.215 44.212l-34.899-3.3c-2.2-.2-4.101-1.6-5-3.7l-12.5-30.3c-2-5-9.101-5-11.101 0l-12.4 30.3c-.8 2.1-2.8 3.5-5 3.7l-34.9 3.3c-5.2.5-7.3 7-3.4 10.5l26.3 23.1c1.7 1.5 2.4 3.7 1.9 5.9l-7.9 32.399c-1.2 5.101 4.3 9.3 8.9 6.601l29.1-17.101c1.9-1.1 4.2-1.1 6.1 0l29.101 17.101c4.6 2.699 10.1-1.4 8.899-6.601l-7.8-32.399c-.5-2.2.2-4.4 1.9-5.9l26.3-23.1c3.8-3.5 1.6-10-3.6-10.5z'/%3e%3c/svg%3e");
    }

    .emoji-wrapper {
      width: 100%;
      text-align: center;
      height: 100px;
      overflow: hidden;
      position: absolute;
      top: 0;
      left: 0;
    }

    .emoji-wrapper:before,
    .emoji-wrapper:after{
      content: "";
      height: 15px;
      width: 100%;
      position: absolute;
      left: 0;
      z-index: 1;
    }

    .emoji-wrapper:before {
      top: 0;
      background: linear-gradient(to bottom, rgba(255,255,255,1) 0%,rgba(255,255,255,1) 35%,rgba(255,255,255,0) 100%);
    }

    .emoji-wrapper:after{
      bottom: 0;
      background: linear-gradient(to top, rgba(255,255,255,1) 0%,rgba(255,255,255,1) 35%,rgba(255,255,255,0) 100%);
    }

    .emoji {
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: .3s;
    }

    .emoji > svg {
      margin: 15px 0; 
      width: 70px;
      height: 70px;
      flex-shrink: 0;
    }

    #rating-1:checked ~ .emoji-wrapper > .emoji { transform: translateY(-100px); }
    #rating-2:checked ~ .emoji-wrapper > .emoji { transform: translateY(-200px); }
    #rating-3:checked ~ .emoji-wrapper > .emoji { transform: translateY(-300px); }
    #rating-4:checked ~ .emoji-wrapper > .emoji { transform: translateY(-400px); }
    #rating-5:checked ~ .emoji-wrapper > .emoji { transform: translateY(-500px); }

    .feedback {
      max-width: 360px;
      background-color: #fff;
      width: 100%;
      padding: 30px;
      border-radius: 8px;
      display: flex;
      flex-direction: column;
      flex-wrap: wrap;
      align-items: center;
      box-shadow: 0 4px 30px rgba(0,0,0,.05);
    }
  </style>
</head>

<body>

  <div class="wrapper" style="background: #fff!important;">
   
    <div class="main-panel">
      <!-- Navbar -->
      <nav class="navbar navbar-expand-lg navbar-transparent navbar-absolute fixed-top ">
        <div class="container-fluid">
          <div class="navbar-wrapper">
            <!-- <a class="navbar-brand" href="javascript:;">Login  |  Create Account</a> -->
          </div>
          <button class="navbar-toggler" type="button" data-toggle="collapse" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
            <span class="sr-only">Toggle navigation</span>
            <span class="navbar-toggler-icon icon-bar"></span>
            <span class="navbar-toggler-icon icon-bar"></span>
            <span class="navbar-toggler-icon icon-bar"></span>
          </button>
          
        </div>
      </nav>
      <!-- End Navbar -->

      <!-- Login modal -->
      <div class="row">
        <div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="signOutModalLabel" aria-hidden="true">
          <div class="modal-dialog  modal-dialog-centered" role="document">
            <div class="modal-content">

              <div class="modal-body" >
                
                <div class="row">
                  <div class="col-md-12">
    
                    <div class="social">
            
                      <h4><span> <button class="btn btn-just-icon btn-round btn-primary">
                        <p>1</p>
                        </button></span> Enter Your Contact Number</h4>
                    </div>
                    <div class="card-body"  style="padding-left: 0; padding-right: 0;">
                      <div class="form-group  d-flex justify-content-center">
                        <div class="input-group">
                          <input id="phone" name="phone" type="tel"  class="form-control">
                          <span id="valid-msg" class="hide" style="color: #42ba96;">âœ“ Valid</span>
                          <span id="error-msg" class="hide" style="color: #F32013;"></span>
                        </div>
                      </div>
                      <div class="form-group">
                        <div class="input-group">
                          <div id="recaptcha-container"></div>
                        </div>
                      </div>
                      <div class="form-group">
                        <div class="input-group">
                          <button id="btnVerify" class="btn btn-primary btn-round" type="button">
                            Verify
                          </button>
                        </div>
                      </div>
                    </div>
                    <div class="social">
                      <h4 ><span> <button class="btn btn-just-icon btn-round btn-primary">
                        <p>2</p>
                        </button></span> Verification </h4>
                      <p>Enter the 6-digit verification code from your SMS.</p>
                    </div>
                    <div class="card-body" style="padding-left: 0; padding-right: 0;">
                      <div class="form-group">
                        <div class="input-group">
                          <div id="divOuter" style="width: 230px; overflow: hidden;">
                            <div id="divInner" style="left: 0; position: sticky;">
                              <input style="background-color: transparent; border: 0; width: 280px; overflow: hidden; letter-spacing: 30px;  padding-left: 10px; margin-left:0em; background-position-x: 25px!important;  background-repeat: repeat-x; background-size: 40px 1px;  background-position: bottom; background-image: linear-gradient(to left, black 70%, rgba(255, 255, 255, 0) 0%);" type="text" id="verificationCode" maxlength="6" placeholder="">                            
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="form-group">
                        <div class="input-group">
                          <button class="btn btn-primary btn-round" id="btnLogin" type="button">Confirm and Login</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>


              </div>
  
            </div>
          </div>
        </div>
      </div>

      <!-- Lock screen modal -->
      <div class="row">
        <div class="modal fade" id="lockScreenModal" tabindex="-1" role="dialog" aria-labelledby="signOutModalLabel" aria-hidden="true">
          <div class="modal-dialog  modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-body">
                <div class="row" style="margin-top: 2rem; margin-bottom: 1rem;">
                  <div class="col-md-5 align-items-center">
                    <div style="height:auto; width: fit-content;">
                      <img class="img" style="height: 100%; width:100%; object-fit: cover; pointer-events: none; " src="../../assets/img/maintenance.gif"/>
                    </div>
                  </div>
                  <div class="col-md-7">
                    <h3 id="lockScreenH2Mssg">Ops, Invalid Link </h3>
                    <h5 id="lockScreenH5Mssg">Please try again by using a valid link.</h5>
                  </div>
                  <div class="col-md-12 text-center" style="margin-top:1rem;" >
                    <a href="https://app.golearn.com.my/client/" class="btn btn-primary btn-round" id="btnGoToMyProfile">Go to my profile <i class="material-icons" style="color: white; margin-left: 0.5em;">east</i></a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>


      <div class="content">
        <div class="container-fluid">
          <!-- your content here -->
          <div class="row">
            <div class="col-md-9 text-center" style="padding-left: 5px; padding-right: 5px;padding-bottom: 10px;">
              <div style="height: 60px;width: 60px; display: inline-block; position: relative; overflow: hidden; border-radius: 50%;">
                <img id="tutorImgUrl" style="height: 100%;width: 100%; object-fit: cover;" src="../../assets/img/empty-photo.png"/>
              </div>
            </div>

            <div class="col-md-9 text-center">
              <h4>Tell us your experience with 
                <span id="tutorName"></span>
              </h4>
            </div>

          </div>
          
          <div class="row">
            <div class="col-md-9">
              <hr>
            </div>
          </div> 
          
          
          <div class="row">
            <div class="col-md-9 ">
              <div class="container" style="align-items: center; justify-content: center; display: flex; flex-wrap: wrap;">
                <div class="feedback">
                  <div class="rating">
                    <input type="radio" name="rating" id="rating-5">
                    <label for="rating-5"></label>
                    <input type="radio" name="rating" id="rating-4">
                    <label for="rating-4"></label>
                    <input type="radio" name="rating" id="rating-3">
                    <label for="rating-3"></label>
                    <input type="radio" name="rating" id="rating-2">
                    <label for="rating-2"></label>
                    <input type="radio" name="rating" id="rating-1">
                    <label for="rating-1"></label>
                    <div class="emoji-wrapper">
                      <div class="emoji">
                        <svg class="rating-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                        <circle cx="256" cy="256" r="256" fill="#ffd93b"/>
                        <path d="M512 256c0 141.44-114.64 256-256 256-80.48 0-152.32-37.12-199.28-95.28 43.92 35.52 99.84 56.72 160.72 56.72 141.36 0 256-114.56 256-256 0-60.88-21.2-116.8-56.72-160.72C474.8 103.68 512 175.52 512 256z" fill="#f4c534"/>
                        <ellipse transform="scale(-1) rotate(31.21 715.433 -595.455)" cx="166.318" cy="199.829" rx="56.146" ry="56.13" fill="#fff"/>
                        <ellipse transform="rotate(-148.804 180.87 175.82)" cx="180.871" cy="175.822" rx="28.048" ry="28.08" fill="#3e4347"/>
                        <ellipse transform="rotate(-113.778 194.434 165.995)" cx="194.433" cy="165.993" rx="8.016" ry="5.296" fill="#5a5f63"/>
                        <ellipse transform="scale(-1) rotate(31.21 715.397 -1237.664)" cx="345.695" cy="199.819" rx="56.146" ry="56.13" fill="#fff"/>
                        <ellipse transform="rotate(-148.804 360.25 175.837)" cx="360.252" cy="175.84" rx="28.048" ry="28.08" fill="#3e4347"/>
                        <ellipse transform="scale(-1) rotate(66.227 254.508 -573.138)" cx="373.794" cy="165.987" rx="8.016" ry="5.296" fill="#5a5f63"/>
                        <path d="M370.56 344.4c0 7.696-6.224 13.92-13.92 13.92H155.36c-7.616 0-13.92-6.224-13.92-13.92s6.304-13.92 13.92-13.92h201.296c7.696.016 13.904 6.224 13.904 13.92z" fill="#3e4347"/>
                      </svg>
                        <svg class="rating-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                        <circle cx="256" cy="256" r="256" fill="#ffd93b"/>
                        <path d="M512 256A256 256 0 0 1 56.7 416.7a256 256 0 0 0 360-360c58.1 47 95.3 118.8 95.3 199.3z" fill="#f4c534"/>
                        <path d="M328.4 428a92.8 92.8 0 0 0-145-.1 6.8 6.8 0 0 1-12-5.8 86.6 86.6 0 0 1 84.5-69 86.6 86.6 0 0 1 84.7 69.8c1.3 6.9-7.7 10.6-12.2 5.1z" fill="#3e4347"/>
                        <path d="M269.2 222.3c5.3 62.8 52 113.9 104.8 113.9 52.3 0 90.8-51.1 85.6-113.9-2-25-10.8-47.9-23.7-66.7-4.1-6.1-12.2-8-18.5-4.2a111.8 111.8 0 0 1-60.1 16.2c-22.8 0-42.1-5.6-57.8-14.8-6.8-4-15.4-1.5-18.9 5.4-9 18.2-13.2 40.3-11.4 64.1z" fill="#f4c534"/>
                        <path d="M357 189.5c25.8 0 47-7.1 63.7-18.7 10 14.6 17 32.1 18.7 51.6 4 49.6-26.1 89.7-67.5 89.7-41.6 0-78.4-40.1-82.5-89.7A95 95 0 0 1 298 174c16 9.7 35.6 15.5 59 15.5z" fill="#fff"/>
                        <path d="M396.2 246.1a38.5 38.5 0 0 1-38.7 38.6 38.5 38.5 0 0 1-38.6-38.6 38.6 38.6 0 1 1 77.3 0z" fill="#3e4347"/>
                        <path d="M380.4 241.1c-3.2 3.2-9.9 1.7-14.9-3.2-4.8-4.8-6.2-11.5-3-14.7 3.3-3.4 10-2 14.9 2.9 4.9 5 6.4 11.7 3 15z" fill="#fff"/>
                        <path d="M242.8 222.3c-5.3 62.8-52 113.9-104.8 113.9-52.3 0-90.8-51.1-85.6-113.9 2-25 10.8-47.9 23.7-66.7 4.1-6.1 12.2-8 18.5-4.2 16.2 10.1 36.2 16.2 60.1 16.2 22.8 0 42.1-5.6 57.8-14.8 6.8-4 15.4-1.5 18.9 5.4 9 18.2 13.2 40.3 11.4 64.1z" fill="#f4c534"/>
                        <path d="M155 189.5c-25.8 0-47-7.1-63.7-18.7-10 14.6-17 32.1-18.7 51.6-4 49.6 26.1 89.7 67.5 89.7 41.6 0 78.4-40.1 82.5-89.7A95 95 0 0 0 214 174c-16 9.7-35.6 15.5-59 15.5z" fill="#fff"/>
                        <path d="M115.8 246.1a38.5 38.5 0 0 0 38.7 38.6 38.5 38.5 0 0 0 38.6-38.6 38.6 38.6 0 1 0-77.3 0z" fill="#3e4347"/>
                        <path d="M131.6 241.1c3.2 3.2 9.9 1.7 14.9-3.2 4.8-4.8 6.2-11.5 3-14.7-3.3-3.4-10-2-14.9 2.9-4.9 5-6.4 11.7-3 15z" fill="#fff"/>
                      </svg>
                        <svg class="rating-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                        <circle cx="256" cy="256" r="256" fill="#ffd93b"/>
                        <path d="M512 256A256 256 0 0 1 56.7 416.7a256 256 0 0 0 360-360c58.1 47 95.3 118.8 95.3 199.3z" fill="#f4c534"/>
                        <path d="M336.6 403.2c-6.5 8-16 10-25.5 5.2a117.6 117.6 0 0 0-110.2 0c-9.4 4.9-19 3.3-25.6-4.6-6.5-7.7-4.7-21.1 8.4-28 45.1-24 99.5-24 144.6 0 13 7 14.8 19.7 8.3 27.4z" fill="#3e4347"/>
                        <path d="M276.6 244.3a79.3 79.3 0 1 1 158.8 0 79.5 79.5 0 1 1-158.8 0z" fill="#fff"/>
                        <circle cx="340" cy="260.4" r="36.2" fill="#3e4347"/>
                        <g fill="#fff">
                          <ellipse transform="rotate(-135 326.4 246.6)" cx="326.4" cy="246.6" rx="6.5" ry="10"/>
                          <path d="M231.9 244.3a79.3 79.3 0 1 0-158.8 0 79.5 79.5 0 1 0 158.8 0z"/>
                        </g>
                        <circle cx="168.5" cy="260.4" r="36.2" fill="#3e4347"/>
                        <ellipse transform="rotate(-135 182.1 246.7)" cx="182.1" cy="246.7" rx="10" ry="6.5" fill="#fff"/>
                      </svg>
                        <svg class="rating-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                  <circle cx="256" cy="256" r="256" fill="#ffd93b"/>
                  <path d="M407.7 352.8a163.9 163.9 0 0 1-303.5 0c-2.3-5.5 1.5-12 7.5-13.2a780.8 780.8 0 0 1 288.4 0c6 1.2 9.9 7.7 7.6 13.2z" fill="#3e4347"/>
                  <path d="M512 256A256 256 0 0 1 56.7 416.7a256 256 0 0 0 360-360c58.1 47 95.3 118.8 95.3 199.3z" fill="#f4c534"/>
                  <g fill="#fff">
                    <path d="M115.3 339c18.2 29.6 75.1 32.8 143.1 32.8 67.1 0 124.2-3.2 143.2-31.6l-1.5-.6a780.6 780.6 0 0 0-284.8-.6z"/>
                    <ellipse cx="356.4" cy="205.3" rx="81.1" ry="81"/>
                  </g>
                  <ellipse cx="356.4" cy="205.3" rx="44.2" ry="44.2" fill="#3e4347"/>
                  <g fill="#fff">
                    <ellipse transform="scale(-1) rotate(45 454 -906)" cx="375.3" cy="188.1" rx="12" ry="8.1"/>
                    <ellipse cx="155.6" cy="205.3" rx="81.1" ry="81"/>
                  </g>
                  <ellipse cx="155.6" cy="205.3" rx="44.2" ry="44.2" fill="#3e4347"/>
                  <ellipse transform="scale(-1) rotate(45 454 -421.3)" cx="174.5" cy="188" rx="12" ry="8.1" fill="#fff"/>
                </svg>
                        <svg class="rating-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                        <circle cx="256" cy="256" r="256" fill="#ffd93b"/>
                        <path d="M512 256A256 256 0 0 1 56.7 416.7a256 256 0 0 0 360-360c58.1 47 95.3 118.8 95.3 199.3z" fill="#f4c534"/>
                        <path d="M232.3 201.3c0 49.2-74.3 94.2-74.3 94.2s-74.4-45-74.4-94.2a38 38 0 0 1 74.4-11.1 38 38 0 0 1 74.3 11.1z" fill="#e24b4b"/>
                        <path d="M96.1 173.3a37.7 37.7 0 0 0-12.4 28c0 49.2 74.3 94.2 74.3 94.2C80.2 229.8 95.6 175.2 96 173.3z" fill="#d03f3f"/>
                        <path d="M215.2 200c-3.6 3-9.8 1-13.8-4.1-4.2-5.2-4.6-11.5-1.2-14.1 3.6-2.8 9.7-.7 13.9 4.4 4 5.2 4.6 11.4 1.1 13.8z" fill="#fff"/>
                        <path d="M428.4 201.3c0 49.2-74.4 94.2-74.4 94.2s-74.3-45-74.3-94.2a38 38 0 0 1 74.4-11.1 38 38 0 0 1 74.3 11.1z" fill="#e24b4b"/>
                        <path d="M292.2 173.3a37.7 37.7 0 0 0-12.4 28c0 49.2 74.3 94.2 74.3 94.2-77.8-65.7-62.4-120.3-61.9-122.2z" fill="#d03f3f"/>
                        <path d="M411.3 200c-3.6 3-9.8 1-13.8-4.1-4.2-5.2-4.6-11.5-1.2-14.1 3.6-2.8 9.7-.7 13.9 4.4 4 5.2 4.6 11.4 1.1 13.8z" fill="#fff"/>
                        <path d="M381.7 374.1c-30.2 35.9-75.3 64.4-125.7 64.4s-95.4-28.5-125.8-64.2a17.6 17.6 0 0 1 16.5-28.7 627.7 627.7 0 0 0 218.7-.1c16.2-2.7 27 16.1 16.3 28.6z" fill="#3e4347"/>
                        <path d="M256 438.5c25.7 0 50-7.5 71.7-19.5-9-33.7-40.7-43.3-62.6-31.7-29.7 15.8-62.8-4.7-75.6 34.3 20.3 10.4 42.8 17 66.5 17z" fill="#e24b4b"/>
                      </svg>
                        <svg class="rating-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                        <g fill="#ffd93b">
                          <circle cx="256" cy="256" r="256"/>
                          <path d="M512 256A256 256 0 0 1 56.8 416.7a256 256 0 0 0 360-360c58 47 95.2 118.8 95.2 199.3z"/>
                        </g>
                        <path d="M512 99.4v165.1c0 11-8.9 19.9-19.7 19.9h-187c-13 0-23.5-10.5-23.5-23.5v-21.3c0-12.9-8.9-24.8-21.6-26.7-16.2-2.5-30 10-30 25.5V261c0 13-10.5 23.5-23.5 23.5h-187A19.7 19.7 0 0 1 0 264.7V99.4c0-10.9 8.8-19.7 19.7-19.7h472.6c10.8 0 19.7 8.7 19.7 19.7z" fill="#e9eff4"/>
                        <path d="M204.6 138v88.2a23 23 0 0 1-23 23H58.2a23 23 0 0 1-23-23v-88.3a23 23 0 0 1 23-23h123.4a23 23 0 0 1 23 23z" fill="#45cbea"/>
                        <path d="M476.9 138v88.2a23 23 0 0 1-23 23H330.3a23 23 0 0 1-23-23v-88.3a23 23 0 0 1 23-23h123.4a23 23 0 0 1 23 23z" fill="#e84d88"/>
                        <g fill="#38c0dc">
                          <path d="M95.2 114.9l-60 60v15.2l75.2-75.2zM123.3 114.9L35.1 203v23.2c0 1.8.3 3.7.7 5.4l116.8-116.7h-29.3z"/>
                        </g>
                        <g fill="#d23f77">
                          <path d="M373.3 114.9l-66 66V196l81.3-81.2zM401.5 114.9l-94.1 94v17.3c0 3.5.8 6.8 2.2 9.8l121.1-121.1h-29.2z"/>
                        </g>
                        <path d="M329.5 395.2c0 44.7-33 81-73.4 81-40.7 0-73.5-36.3-73.5-81s32.8-81 73.5-81c40.5 0 73.4 36.3 73.4 81z" fill="#3e4347"/>
                        <path d="M256 476.2a70 70 0 0 0 53.3-25.5 34.6 34.6 0 0 0-58-25 34.4 34.4 0 0 0-47.8 26 69.9 69.9 0 0 0 52.6 24.5z" fill="#e24b4b"/>
                        <path d="M290.3 434.8c-1 3.4-5.8 5.2-11 3.9s-8.4-5.1-7.4-8.7c.8-3.3 5.7-5 10.7-3.8 5.1 1.4 8.5 5.3 7.7 8.6z" fill="#fff" opacity=".2"/>
                      </svg>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
 

          <div class="row">
            <div class="col-md-9">
              <div class="form-group" style="margin-top: 2rem;">
                <span class="" style="font-size: smaller; font-weight: 300; color: gray; margin-bottom: 0;">Share your experience engaging the tutor. What are the things you like about him/her?  <span id="countReview" style="color: grey; margin-left: 1rem;">0/500</span></span> 
                <textarea class="form-control" maxlength="500" rows="5"  id="inReview" data-compulsory="false"></textarea>
              </div>
            </div>
          </div> 

          <div class="row">
            <div class="col-md-9 text-center">
              <button href="javascript:;" class="btn btn-default btn-round" id="btnSubmit" style="pointer-events: none;">Submit</button>
            </div>
          </div>
		    </div>
      </div>

    </div>
	  
  </div>

  <script src="../../assets/js/core/jquery.min.js"></script>
  <script src="../../assets/js/core/popper.min.js"></script>
  <script src="../../assets/js/core/bootstrap-material-design.min.js"></script>
  <script src="../../assets/js/plugins/perfect-scrollbar.jquery.min.js"></script>
  <!-- Plugin for the momentJs  -->
  <script src="../../assets/js/plugins/moment.min.js"></script>
  <!--  Plugin for Sweet Alert -->
  <script src="../../assets/js/plugins/sweetalert2.js"></script>
  <!-- Forms Validations Plugin -->
  <script src="../../assets/js/plugins/jquery.validate.min.js"></script>
  <!--  Notifications Plugin    -->
  <script src="../../assets/js/plugins/bootstrap-notify.js"></script>
  <!-- Control Center for Material Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="../../assets/js/material-dashboard.js?v=2.1.2" type="text/javascript"></script>
  <!-- Common constants -->
  <script src="../../assets/js/common.js" type="text/javascript"></script>
  <!-- General Info -->
  <script src="../../assets/js/const.js" type="text/javascript"></script>
  <!-- International Telephone Input -->
  <script src="../../assets/js/plugins/intlTelInput/intlTelInput.js"></script>
  <!-- Login specific -->
  <script src="js/tutor-portal-auth.js" type="text/javascript"></script>

  <script>
    // Global Variables
    var userId, tutorId;
    var current_name, current_email, current_phone, current_imgUri, current_nric,
      current_address1, current_address2, current_addressPostCode, current_addressState, current_address;
     
    var tutorName;
    var tutorImgUri, tutorRating, tutorRatingTimes, tutorRatingFinal;

		var db = firebase.firestore();
		db.settings({ timestampsInSnapshots: true });


    var url_string = window.location.href;
    var url = new URL(url_string);
    var tid = url.searchParams.get("tid");
    console.log("tid: "+ tid)

    if (tid == null || tid == ""){

      // Lock screen
      $('#lockScreenModal').modal({
        backdrop:'static',
        keyboard:false,
        show: true
      }); 
      document.getElementById("lockScreenH2Mssg").textContent = "Ops, Invalid Link";
      document.getElementById("lockScreenH5Mssg").textContent = "Please try again by using a valid link.";

      console.log("User Not Found. Redirect to somewhere...")

    }
    else {

      //TEMPORARY ADDED TO SUPPLY ID
      // tid = encode64("+60138252818")
      // console.log("Temporary enforced a new ID: "+ "+60138252818")
      // console.log("Encode ID: "+ tid)
      //tid=KzYwMTM4MjUyODE4

      tutorId = decode64(tid);
      console.log(tutorId)

      // Load tutor 
      loadTutorInfo(tutorId);

    }
    
		firebase.auth().onAuthStateChanged(function(user){
			if(!user){
        // Return to login if user does not exist.
				// window.location.href = "https://app.golearn.com.my/"
        console.log("User not login")
        $('#loginModal').modal('show');
			}else{
        // if the displayName is null, it means user register using Phone
        if (firebase.auth().currentUser.displayName == null ){
            userId = firebase.auth().currentUser.phoneNumber;
        }else
            userId = firebase.auth().currentUser.email.replace("[^a-zA-Z0-9]", "_").toLowerCase();

        console.log("User logged in")

        // If userId == tutorId, lockscreen
        if (userId == tutorId){
          // Lock screen
          $('#lockScreenModal').modal({
            backdrop:'static',
            keyboard:false,
            show: true
          }); 
          document.getElementById("lockScreenH2Mssg").textContent = "You Cannot Review Yourself";
          document.getElementById("lockScreenH5Mssg").textContent = "Try sharing this link with your existing clients.";
        }
        else {
                    
          // Check eligibility of user to review
          checkUserEligibility();

          // Load user 
          loadUserInfo(userId);


        }

			}
		});

    // Load user info
    function loadUserInfo(userId){
      var docRef = db.collection("Users").doc(userId);
      
      // docRef.get().then((doc) => {
      docRef.onSnapshot((doc) => {
        if (doc.exists) {
          current_name = (doc.data().name == null || doc.data().name == "")? "New User" : doc.data().name;
          current_email = (doc.data().email == null || doc.data().email == "")? "" : doc.data().email;
          current_phone = (doc.data().phone == null || doc.data().phone == "")? "" : doc.data().phone; 
          current_imgUri = (doc.data().imgUrl == null || doc.data().imgUrl == "")? "" : doc.data().imgUrl;
          current_address1= (doc.data().address1 == null || doc.data().address1 == "")? '' : doc.data().address1 + ', ';
          current_address2= (doc.data().address2 == null || doc.data().address2 == "")? '' : doc.data().address2 + ', '; 
          current_addressPostCode= (doc.data().addressPostCode == null || doc.data().addressPostCode == "")? '' : doc.data().addressPostCode + ', ';
          current_addressState= (doc.data().addressState == null || doc.data().addressState == "")? '' : doc.data().addressState;
          current_address = current_address1 + current_address2 + current_addressPostCode + current_addressState;

        } else {
          console.log("No user! Redirecting to login");
          $('#loginModal').modal('show');
        }
      });

    };    
 

    // Load tutor info
    function loadTutorInfo(tutorId){

      var docRef = db.collection("Tutor").doc(tutorId);
      
      docRef.get().then((doc) => {

        if (doc.exists) {
          tutorName = (doc.data().name == null || doc.data().name == "")? "New User" : doc.data().name;
          tutorImgUri = (doc.data().imgUrl == null || doc.data().imgUrl == "")? "../assets/img/empty-photo.png" : doc.data().imgUrl;
          tutorRating = (doc.data()[RATING_KEY] == null || doc.data()[RATING_KEY] == "")?  0 : doc.data()[RATING_KEY];
          tutorRatingTimes = (doc.data()[RATING_TIMES_KEY] == null || doc.data()[RATING_TIMES_KEY] == "")?  0 : doc.data()[RATING_TIMES_KEY];
          tutorRatingFinal = (doc.data()[RATING_FINAL_KEY] == null || doc.data()[RATING_FINAL_KEY] == "")?  0 : doc.data()[RATING_FINAL_KEY];

          console.log(tutorRating, tutorRatingTimes, tutorRatingFinal) 
          // Load Tutor info 
          document.getElementById("tutorName").textContent = tutorName;
          document.getElementById("tutorImgUrl").src = tutorImgUri;

        } else {
          console.log("No user! Redirecting to login");
          $('#lockScreenModal').modal({
            backdrop:'static',
            keyboard:false,
            show: true
          }); 
          document.getElementById("lockScreenH2Mssg").textContent = "Ops, Invalid Link";
          document.getElementById("lockScreenH5Mssg").textContent = "Please try again by using a valid link.";

        }
      });

    };    
 

    // Check eligibility of user to review
    function checkUserEligibility(){

      let docRef = db.collection("Review")
        .doc("v1")
        .collection("Review")
        .where(REVIEW_RECEIVER_ID, "==", tutorId)
        .where(REVIEW_REVIEWER_ID, "==", userId)

      docRef.get().then((querySnapshot) => {

        querySnapshot.forEach((doc) => {

          let dateAdded = doc.data()[REVIEW_DATE_ADDED]
          // console.log("Date: "+doc.data()[REVIEW_DATE_ADDED].toMillis());
          const currentDate = new Date();
          const timestamp = currentDate.getTime();
          // console.log("Now: "+timestamp);

          // Get the time different in Hours
          let timeDiff = (timestamp-dateAdded.toMillis())/1000/60/60;
          // console.log(timeDiff)


          // Check 60 Day limit. If there's a review done within 60D / 1440hr , lock screen
          if (timeDiff < 1440){
            // Lock screen
            $('#lockScreenModal').modal({
              backdrop:'static',
              keyboard:false,
              show: true
            }); 
            document.getElementById("lockScreenH2Mssg").textContent = "You Have Reviewed This Tutor Recently";
            document.getElementById("lockScreenH5Mssg").textContent = "Please try again next time.";
          }

        });


        document.getElementById("btnSubmit").style.pointerEvents='auto';
        document.getElementById("btnSubmit").className = "btn btn-primary btn-round";
      });    
    
    }

    function submitReview() {
      let rate1 = document.getElementById("rating-1").checked;
      let rate2 = document.getElementById("rating-2").checked;
      let rate3 = document.getElementById("rating-3").checked;
      let rate4 = document.getElementById("rating-4").checked;
      let rate5 = document.getElementById("rating-5").checked;
      let reviewText = document.getElementById("inReview").value;

      let rating = 0;
      if (rate1) rating = 1;
      else if (rate2) rating = 2;
      else if (rate3) rating = 3;
      else if (rate4) rating = 4;
      else if (rate5) rating = 5;
      else rating = 0;

      console.log(rate1, rate2, rate3, rate4, rate5, rating)

      let notRated = rate1 || rate2 || rate3 || rate4 || rate5;

      if (!notRated){
        console.log("No rating");
        func.showNotification('top','center', 'warning', 'error_outline', "Please enter a rating." );

        // Disable the submit button
        document.getElementById("btnSubmit").removeAttribute('disabled');
        // Change the "Submit" text
        document.getElementById("btnSubmit").textContent = 'Submit';
        
      } 
      else {
        var batch = db.batch(); 

        var docRef = db.collection("Review")
          .doc("v1")
          .collection("Review")
          .doc();

        let docData = {
          [REVIEW_ID]: docRef.id,
          [REVIEW_RECEIVER_ID]: tutorId,
          [REVIEW_REVIEWER_ID]: userId,
          [REVIEW_REVIEWER_NAME]: current_name,
          [REVIEW_REVIEWER_IMG]: current_imgUri,
          [REVIEW_RATE]: rating,
          [REVIEW_COMMENT]: reviewText,
          [REVIEW_DATE_ADDED]: new Date()
        }

        console.log("Review Data");
        console.log(docData);
        batch.set(docRef, docData, { merge: true });

        // Update the total rating in user Profile
        var tutorDocRef = db.collection("Tutor")
          .doc(tutorId);

        let tutorRating_temp = tutorRating + rating;
        let tutorRatingTimes_temp = tutorRatingTimes + 1;
        let tutorRatingFinal_temp = tutorRating_temp / tutorRatingTimes_temp;

        console.log(tutorRating_temp, tutorRatingTimes_temp, tutorRatingFinal_temp)

        tutorDocData = {
          [RATING_KEY]: tutorRating_temp,
          [RATING_TIMES_KEY]: tutorRatingTimes_temp,
          [RATING_FINAL_KEY]: tutorRatingFinal_temp
        }
        console.log("Tutor Rating Data Update");
        console.log(tutorDocData);

        batch.set(tutorDocRef, tutorDocData, { merge: true });

        // Commit the batch
        batch.commit().then(() => {

          func.showNotification('top','center', 'success', 'check_circle', "Review submited.");
          // Report: Update the class num in Reporting
          $('#lockScreenModal').modal({
            backdrop:'static',
            keyboard:false,
            show: true
          }); 
          document.getElementById("lockScreenH2Mssg").textContent = "Thank you!";
          document.getElementById("lockScreenH5Mssg").textContent = "Your review meant a lot to me.";

          // Show Go To My Profile Button
          document.getElementById("btnGoToMyProfile").removeAttribute('style')

          // Disable the submit button
          document.getElementById("btnSubmit").removeAttribute('disabled');
          // Change the "Submit" text
          document.getElementById("btnSubmit").textContent = 'Submitted';
          

        });

        // docRef.set(docData, { merge: true })
        // .then(() => {

        //   func.showNotification('top','center', 'success', 'check_circle', "Review submited.");
        //   // Report: Update the class num in Reporting
        //   $('#lockScreenModal').modal({
        //     backdrop:'static',
        //     keyboard:false,
        //     show: true
        //   }); 
        //   document.getElementById("lockScreenH2Mssg").textContent = "Thank you!";
        //   document.getElementById("lockScreenH5Mssg").textContent = "Your review meant a lot to me.";

        //   // Show Go To My Profile Button
        //   document.getElementById("btnGoToMyProfile").removeAttribute('style')

        //   // Disable the submit button
        //   document.getElementById("btnSubmit").removeAttribute('disabled');
        //   // Change the "Submit" text
        //   document.getElementById("btnSubmit").textContent = 'Submitted';
          
        // });


      }
    }


    // Function to show notification
    func = {
      showNotification: function(from, align, type, material_icon, message) {
        // type = ['', 'info', 'danger', 'success', 'warning', 'rose', 'primary'];
        // color = Math.floor((Math.random() * 6) + 1);
        $.notify({
          icon: material_icon,
          message: message

        }, {
          type: type,
          timer: 3000,
          placement: {
            from: from,
            align: align
          }
        });
      },
    }
 
 </script>
  <script>
    $( document ).ready(function() {


      // Active Register Class Modal
      $('#loginModal').modal({
        backdrop:'static',
        keyboard:false,
        show: false
      });

      // Active Register Class Modal
      $('#lockScreenModal').modal({
        backdrop:'static',
        keyboard:false,
        show: false
      });

			
      $('#inReview').on('input', function(){        
        document.getElementById("countReview").textContent = this.value.length + '/500'
      });

      $('#btnSubmit').on('click', function(){    
           
        // Disable the submit button
        document.getElementById("btnSubmit").setAttribute('disabled', 'disabled');
        // Change the "Submit" text
        document.getElementById("btnSubmit").textContent = 'Please wait...';
        
        submitReview();

      });

      // Enable submit button
      // $('#rating-1').on('change', function(){        
      //   document.getElementById("btnSubmit").style.pointerEvents='auto';
      //   document.getElementById("btnSubmit").className = "btn btn-primary btn-round";
      // });
      // $('#rating-2').on('change', function(){        
      //   document.getElementById("btnSubmit").style.pointerEvents='auto';
      //   document.getElementById("btnSubmit").className = "btn btn-primary btn-round";
      // });
      // $('#rating-3').on('change', function(){        
      //   document.getElementById("btnSubmit").style.pointerEvents='auto';
      //   document.getElementById("btnSubmit").className = "btn btn-primary btn-round";
      // });
      // $('#rating-4').on('change', function(){        
      //   document.getElementById("btnSubmit").style.pointerEvents='auto';
      //   document.getElementById("btnSubmit").className = "btn btn-primary btn-round";
      // });
      // $('#rating-5').on('change', function(){        
      //   document.getElementById("btnSubmit").style.pointerEvents='auto';
      //   document.getElementById("btnSubmit").className = "btn btn-primary btn-round";
      // });

      // Login specific
      //Disable the step 1 button
      document.getElementById("btnVerify").setAttribute("style", "background-color: #c1c1c1");
      document.getElementById("btnVerify").style.cursor='not-allowed';
      document.getElementById("btnVerify").disabled = true;

      //Disable the step 2 button
      document.getElementById("btnLogin").setAttribute("style", "background-color: #c1c1c1");
      document.getElementById("btnLogin").style.cursor='not-allowed';
      document.getElementById("btnLogin").disabled = true;

      $('#btnVerify').on('click', function(){

        phoneAuth();
        // console.log(inputPhone.getNumber())
        // console.log(document.getElementById("phone").value)

        document.getElementById("btnVerify").setAttribute("style", "background-color: #c1c1c1");
        document.getElementById("btnVerify").disabled = true;
        document.getElementById("phone").setAttribute("style", "background-color: #c1c1c1");
        document.getElementById("phone").disabled = true;
        
      });


      $('#btnLogin').on('click', function(){
        console.log("Running Code verify")
        codeverify();
      });


    });


  </script>

  <!-- Tel input script -->
  <script>
    // Phone
    var inputPhone = document.querySelector("#phone");
    var itiPhone = intlTelInput(inputPhone,{
      autoHideDialCode: false,
      nationalMode: false,
      // onlyCountries: ['MY', 'SG', 'TH', 'ID', 'VN', 'PH', 'BN', 'US', 'GB', 'SA'],
      preferredCountries: ['MY', 'SG'],
      separateDialCode: true,
      utilsScript: "js/utils.js",
    });

   
    var errorMsg = document.querySelector("#error-msg");
    var validMsg = document.querySelector("#valid-msg");


    // here, the index maps to the error code returned from getValidationError - see readme
    var errorMap = ["Invalid number", "Invalid country code", "Too short", "Too long", "Invalid number"];

    var reset = function() {
      inputPhone.classList.remove("error");
      errorMsg.innerHTML = "";
      errorMsg.classList.add("hide");
      validMsg.classList.add("hide");
    };

    // on blur: validate
    
    inputPhone.addEventListener('blur', function() {
      reset();
      
      if (inputPhone.value.trim()) {
        if (itiPhone.isValidNumber()) {
          validMsg.classList.remove("hide");
        } else {
          inputPhone.classList.add("error");
          var errorCode = itiPhone.getValidationError();
          errorMsg.innerHTML = errorMap[errorCode];
          errorMsg.classList.remove("hide");
        }
      }
    });


    // on keyup / change flag: reset
    inputPhone.addEventListener('change', reset);
    inputPhone.addEventListener('keyup', reset);
 
    // Validate fields in based on parents. 
    function ValidateFields(parentId){
      // This function deals with validation of the form fields with data-compulsory = 'true'
      var x, y, i, valid = true;
      x = document.getElementById(parentId);
      
      y =x.querySelectorAll('[data-compulsory="true"]');

      // A loop that checks every input field in the current tab:
      for (i = 0; i < y.length; i++) {
        // console.log(y[i].value)
        // If a field is empty...
        if (y[i].value == "") {
          // add an "invalid" class to the field:
          y[i].className += " invalid";
          // and set the current valid status to false:
          valid = false;
        }
      }
      return valid; // return the valid status
    }

    // Validate fields - Phone Input specific. 
    function ValidatePhone(phoneId){
      var valid = true;
      let inPhone = document.querySelector("#"+phoneId);
      // console.log(inPhone.value)
      if (inPhone.value.trim()) {
        if (itiGuardian.isValidNumber()) {
          // Do nothing
        } else {
          inPhone.className += " invalid";
          valid = false;
        }
      }
      return valid; // return the valid status
    }
  </script>

</body>

</html>