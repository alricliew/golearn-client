<!doctype html>
<html lang="en">

<head>
  <!-- Meta -->
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <title>GoLearn School</title>
  <meta name=description content="GoLearn School&trade; is Malaysia #1 teaching platform to run your tuition business and manage your lessons. Start now for Free!">
  <meta property=og:title content="GoLearn School">
  <meta property=og:site_name content="GoLearn School">
  <meta property=og:type content=website>
  <meta property=og:url content=https://app.golearn.com.my/school/course/manage.html>
  <meta property=og:image content=https://app.golearn.com.my/assets/img/icon-apple-touch-180x180.png>
  <meta property=og:description content="GoLearn School&trade; is Malaysia #1 teaching platform to run your tuition business and manage your lessons. Start now for Free!">
  <link rel=apple-touch-icon sizes=180x180 href=https://app.golearn.com.my/assets/img/icon-apple-touch-180x180.png>
  <link rel=icon type=image/png sizes=32x32 href=https://app.golearn.com.my/assets/img/icon-32x32.png>
  <link rel=icon type=image/png sizes=16x16 href=https://app.golearn.com.my/assets/img/icon-16x16.png>
  <!-- Fonts and icons -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" rel="stylesheet" type="text/css" />
  <script src="https://kit.fontawesome.com/2bdd669e92.js" crossorigin="anonymous"></script>
  <!-- Material Kit CSS -->
  <link href="../../assets/css/material-dashboard.css?v=2.1.2" rel="stylesheet" />
  <!-- Firebase Init -->
  <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-storage.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-firestore.js"></script>
  <script src="../../assets/js/firebase.js"></script>
  <link href="../../assets/css/multistepform.css" rel="stylesheet" />
  <!-- Tutor Portal specific CSS -->
  <link href="../../assets/css/tutor-portal.css" rel="stylesheet" />
  <!-- ClockPicker Stylesheet -->
  <link rel="stylesheet" type="text/css" href="../../assets/css/bootstrap-clockpicker.min.css">
  <!-- Loading -->
  <style>

    .br {
      border-radius: 8px;  
    }
    .w30 {
      width: 30%;
    }
    .w50 {
      width: 50%;
    }
    .w80 {
      width: 80%;
    }
    .card {
      border: 2px solid #fff;
      /* box-shadow:0px 0px 10px 0 #a9a9a9; */
      padding: 12px 20px;
      /* width: 80%; */
      /* margin: 50px auto; */
      margin-top: 0.2rem;
    }
    .card-shimmer-wrapper {
      width: 0px;
      animation: fullView 0.5s forwards cubic-bezier(0.250, 0.460, 0.450, 0.940);
    }
    .profilePic {
      height: 60px;
      width: 60px;
      border-radius: 50%;
    }
    .comment {
      height: 10px;
      background: #777;
      margin-top: 15px;
    }

    @keyframes fullView {
      100% {
        width: 100%;
      }
    }

    .animate {
      animation : shimmer 2s infinite linear;
      background: linear-gradient(to right, #eff1f3 4%, #e2e2e2 25%, #eff1f3 36%);
        background-size: 1000px 100%;
    }

    @keyframes shimmer {
      0% {
        background-position: -1000px 0;
      }
      100% {
        background-position: 1000px 0;
      }
    }
  </style>
  <!-- Ribbon -->
  <style>
    .full .clr-field button {
      width: 100%;
      height: 100%;
      border-radius: 5px;
    }
  </style>
  <!-- Ribbon -->
  <!-- https://freefrontend.com/css-ribbons/ -->
  <style>
    .ribbon {
      font-size: small;
      position: absolute;
      /* right: var(--right, 10px); */
      /* top: var(--top, -3px); */
      left: var(--left, -3px);
      top: var(--top, 5px);
      filter: drop-shadow(2px 3px 2px rgba(0, 0, 0, 0.2));
    }
    .ribbon > .content {
      color: white;
      font-size: 1rem;
      text-align: center;
      font-weight: 400;
      /* background: var(--color, #FA8072) linear-gradient(45deg, rgba(0, 0, 0, 0) 0%, rgba(255, 255, 255, 0.25) 100%); */
      background: rgba(0, 0, 0, 0.2);
      padding: 8px 2px 4px;
      clip-path: polygon(0 0, 100% 0, 100% 100%, 50% 100%, 0 100%);
      width: var(--width, 32px);
      min-height: var(--height, 32px);
      transition: clip-path 1s, padding 1s, background 1s;
    }
    .ribbon.slant-up > .content {
      clip-path: polygon(0 0, 100% 0, 100% calc(100% - 12px), 50% calc(100% - 6px), 0 100%);
    }
    .ribbon.slant-down > .content {
      clip-path: polygon(0 0, 100% 0, 100% 100%, 50% calc(100% - 6px), 0 calc(100% - 12px));
    }
    /* .ribbon.down > .content {
      clip-path: polygon(0 0, 100% 0, 100% calc(100% - 8px), 50% 100%, 0 calc(100% - 8px));
    } */
    .ribbon.up > .content {
      clip-path: polygon(0 0, 100% 0, 100% 100%, 50% calc(100% - 8px), 0 100%);
    }
    .ribbon.check > .content {
      clip-path: polygon(0 0, 100% 0, 100% calc(100% - 20px), 40% 100%, 0 calc(100% - 12px));
    }
    .ribbon.down > .content {
      /* clip-path: polygon(0 0, 100% 0, 100% calc(100% - 8px), 50% 100%, 0 calc(100% - 8px)); */
      clip-path: polygon(0% 0%, 75% 0%, 100% 50%, 75% 100%, 0% 100%)
    }
    
  </style>
  <!-- Loading -->
  <style>
    @keyframes load {
      50% {
        transform: translateY(1.5em);
      }
    }
    .loading {
      /* margin: 4em auto; */
      position: absolute;
      /* width: 5em; */
      top: 40%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 1;
      background: rgba(255, 255, 255, 0.137);

    }
    .loading > div, .loading:before, .loading:after {
      animation: load 1.2s ease-in-out infinite;
      background-color: rgb(211, 211, 211);
      border-radius: 50%;
      content: '';
      height: 1em;
      width: 1em;
    }
    .loading > div {
      animation-delay: 0.2s;
      left: 0;
      position: absolute;
    }
    .loading:before {
      left: -2em;
      position: absolute;
    }
    .loading:after {
      animation-delay: 0.4s;
      left: 2em;
      position: absolute;
    }
  </style>
</head>

<body>

  <div class="wrapper ">
    <div class="sidebar" data-color="purple" data-background-color="white" data-image="../../assets/img/sidebar-3.jpg">
      <div class="logo">
        <a href="../" class="simple-text logo-mini" style="padding: 0.5rem">
			    <img src="../../assets/img/golearn-school-logo.svg" style="width: 200px; height: auto;" alt=""></img>
        </a>
      </div>
      <div class="sidebar-wrapper">
        <ul class="nav" style="margin-bottom: 50px;">
          <li class="nav-item">
            <a class="nav-link" href="../">
              <i class="far fa-chart-bar fa-fw nav-icon"></i>
              <p>Dashboard</p>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../report/">
              <i class="far fa-lightbulb fa-fw nav-icon"></i>
              <p>Insight</p>
            </a>
          </li>
          <li class="nav-item">
            <h4 class="nav-link" style="margin-left: 1rem;">Teaching</h4>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../class/">
              <i class="fas fa-chalkboard fa-fw nav-icon"></i>
              <p>Classes</p>
            </a>
          </li>
		  		<li class="nav-item">
            <a class="nav-link" href="../student/">
              <i class="fas fa-user-graduate fa-fw nav-icon"></i>
              <p>Students</p>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../teacher/">
              <i class="fas fa-chalkboard-teacher fa-fw nav-icon"></i>
              <p>Teachers</p>
            </a>
          </li>
          <li class="nav-item">
            <h4 class="nav-link" style="margin-left: 1rem;">Financial</h4>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../invoice/">
              <i class="fas fa-file-invoice-dollar fa-fw nav-icon"></i>
              <p>Invoices</p>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../salary/">
              <i class="fas fa-money-bill-wave fa-fw nav-icon"></i>
              <p>Salaries</p>
            </a>
          </li>
          <li class="nav-item" id="navPayroll" style="display: none;">
            <a class="nav-link" href="../payroll/">
              <i class="fas fa-hand-holding-usd fa-fw nav-icon"></i>
              <p>Payroll <span style="visibility: hidden;">PRO</span></p>
            </a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" href="../transaction/">
              <i class="fas fa-exchange-alt fa-fw nav-icon"></i>
              <p>Transactions</p>
            </a>
          </li>
          <li class="nav-item">
            <h4 class="nav-link" style="margin-left: 1rem;">Public</h4>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="./">
              <i class="fas fa-book-open fa-fw nav-icon"></i>
              <p>My Public Courses 
                <span style="background-color: #2e74b6;padding: 0.2em 0.5em 0.2em 0.5em;color: white;border-radius: 3px;font-size: x-small;">New</span>
              </p>
            </a>
          </li>
		  		<li class="nav-item">
            <a class="nav-link" href="../job/">
              <i class="fas fa-briefcase fa-fw nav-icon"></i>
              <p>Tuition Jobs</p>
            </a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" href="../settings/">
              <i class="fas fa-user-cog fa-fw nav-icon"></i>
              <p>Update Information</p>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="main-panel">
      <!-- Navbar -->
      <nav class="navbar navbar-expand-lg navbar-transparent navbar-absolute fixed-top ">
        <div class="container-fluid">
          <div class="navbar-wrapper">
            <a class="navbar-brand" href="javascript:;">Courses <span><i class="material-icons" style="color: gray;">chevron_right</i></span> Create</a>
          </div>
          <button class="navbar-toggler" type="button" data-toggle="collapse" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
            <span class="sr-only">Toggle navigation</span>
            <span class="navbar-toggler-icon icon-bar"></span>
            <span class="navbar-toggler-icon icon-bar"></span>
            <span class="navbar-toggler-icon icon-bar"></span>
          </button>
          <div class="collapse navbar-collapse justify-content-end">
            <form class="navbar-form">
              <!-- Put empty placeholder here -->
            </form>

            <ul class="navbar-nav">
              <li class="nav-item" id="activationNavItem">
                <a href="#" class="btn btn-primary btn-round btn-sm" style="visibility: hidden;" id="btnActivateAccount"></a>
              </li>
              <li class="nav-item">
                <a class="navbar-brand" href="javascript:;">
                   Hi <span id="user"></span> !
                </a> 
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link" href="javascript:;" id="navbarDropdownNotification" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <i class="material-icons">notifications</i> Notifications
                </a>
                <!-- <a class="nav-link" href="http://example.com" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <i class="material-icons">notifications</i>
                  <span class="notification">5</span>
                  <p class="d-lg-none d-md-block">
                    Some Actions
                  </p>
                </a> -->
								<div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
									<p style="padding: 1em;" >No notification</p>
                  <!-- <a class="dropdown-item" href="#">Mike John responded to your email</a>
                  <a class="dropdown-item" href="#">You have 5 new tasks</a>
                  <a class="dropdown-item" href="#">You're now friend with Andrew</a>
                  <a class="dropdown-item" href="#">Another Notification</a>
                  <a class="dropdown-item" href="#">Another One</a> -->
                </div>
              </li>
              <!-- your navbar here -->
			  
			  			<li class="nav-item dropdown">
                <a class="nav-link" href="javascript:;" id="navbarDropdownProfile" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <i class="material-icons">person</i>
                  <p class="d-lg-none d-md-block">
                    Account
                  </p>
                </a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownProfile">
                  <a class="dropdown-item" href="../edit-profile.html">Edit Profile</a>
                  <a id="navPublicProfile" class="dropdown-item" href="#">My Public Profile</a>
									<a class="display:block; dropdown-item" href="../about.html">About</a>
									<div class="dropdown-divider"></div>
                  <a class="dropdown-item" href="javascript:;" data-toggle="modal" data-target="#signOutModal" onclick="signOutFunction()" id="btn-logout">Log out</a>
									<div class="dropdown-divider"></div>
									<a style="font-weight: 500 ;padding: 0.5em ;text-align: center; width: 200px; background-color: #428dd4 ;display: block; color: #fff;" href="https://golearn.com.my/pricing/" target="_blank" id="btnUpgradeToPro">Upgrade to Pro</a>

                </div>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <!-- End Navbar -->

			<!-- Modal Start -->
      <!-- List Admins's Class modal -->
      <div class="row">
        <div class="modal fade" id="addClassModal" tabindex="-1" role="dialog" aria-labelledby="addClassModalLabel" aria-hidden="true">
          <div class="modal-dialog  modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="addClassModalLabel">My Classes</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="btnAddClassModalClose1">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body" id="addClassModalBody">
                <div class="row">
                  <div class="col-md-12" id="studentTop">
                          
                    <div class="container" id="add-tutor-modal-container">
                      <!-- Tutor header -->
                      <div class="row lesson-header">
                        <div class="col-md-1">
                        </div>
                        <div class="col-md-6">
                          <p>Class Name</p>
                        </div>
                        <div class="col-md-3">
                          <p>Teacher(s)</p>
                        </div>
                        <div class="col-md-2">
                          <p>Action</p> 
                        </div>
                      </div>
   
                      <!-- Loading block -->
                      <div class="row">
                        <div class="card br" id="card-load" style="margin: auto 0;">
                          <div class="card-shimmer-wrapper">
                            <div class="row">
                              <div class="col-md-1 col-3">
                                <div class="profilePic animate din"></div>
                              </div>
                              <div class="col-md-11 col-9">
                                <div class="comment br animate w80"></div>
                                <div class="comment br animate w30"></div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
        

                      <!-- No data placeholder -->
                      <div class="row text-center" style="display: none; margin: 1rem;" id="noDataPlaceholder">
                        <p>No data</p>
                      </div>

                      <!-- Tutor List Start -->
                      <!-- <div class="row tutor-wrapper">
                        <div class="col-md-1">
                          <div style="height: 50px; width: 50px; display: inline-block; position: relative; overflow: hidden; border-radius: 50%;">
                            <img id="viewTutorImgUrl" style="height: 100%;width: 100%; object-fit: cover;" src="../../assets/img/empty-photo.png"/>
                          </div>
                        </div>
                        <div class="col-md-6">
                          <p class="tutor-item">Y3 English Class</p>
                        </div>
                        <div class="col-md-3">
                          <p class="tutor-item">Alric Liew </p>
                        </div>
                        <div class="col-md-2">
                          <button type="button" class="btn btn-primary btn-sm" data-dismiss="modal" id="btnSelectTutor">Select</button>
                        </div>
                      </div> -->

   
                    </div>

                  </div>
                </div>

                <!-- Load More -->
                <div class="row">
                  <div class="col-md-12" style="margin-top: 1rem;">
                    <a href="javascript:;" class="btn btn-outline-primary btn-round btn-sm" id="btnClassLoadMore">Load More <i class="material-icons" style="color: #2e74b6; margin-left: 0.5em; padding-bottom: 0.2em;">expand_more</i></a>
                  </div>
                </div>

              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary"  data-dismiss="modal" id="btnAddClassModalClose2">Close</button>
              </div>
            </div>
          </div>
        </div>
      </div>
			
      <!-- Loading Screen -->
      <div class="loading" id="loadingScreen">
        <!-- <p>loading sceen</p> -->
        <div>

        </div>
      </div>

       <!-- Sign-out modal -->
       <div class="row">
        <div class="modal fade" id="signOutModal" tabindex="-1" role="dialog" aria-labelledby="signOutModalLabel" aria-hidden="true">
          <div class="modal-dialog  modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="signOutLabel">Logging Out</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body" id="signOutModalBody">
                Are you sure you want to continue?
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" id="btnSignOutModalUpdate">Confirm</button>
              </div>
            </div>
          </div>
        </div>
      </div>


      <div class="content">
        <!-- your content here -->
        <div class="container overflow-hidden">
          <!-- Back button -->
          <div class="row">
            <div class="col-md-4">
              <a href="./" class="btn btn-outline-primary btn-round" id="btnBack"><i class="material-icons" style="color: #2e74b6; margin-right: 0.5em; padding-bottom: 0.2em;">west</i> Back</a>
            </div>
          </div>

          <div class="row">
            <div class="col-md-12">
              <div class="row">
                <div class="col-12 col-lg-8 ml-auto mr-auto mb-4">
                  <div class="multisteps-form__progress">
                    <button class="multisteps-form__progress-btn js-active" type="button" title="Start">Start</button>
                    <button class="multisteps-form__progress-btn" type="button" title="General Info">Subject</button>
                    <button class="multisteps-form__progress-btn" type="button" title="General Info">Title</button>
                    <button class="multisteps-form__progress-btn" type="button" title="Timeslot">Time</button>
                    <button class="multisteps-form__progress-btn" type="button" title="Fee">Fee</button>
                  </div>
                </div>
              </div>
              <!--multisteps-form-->
              <div class="multisteps-form">
                <!--form panels-->
                <div class="row">
                  <div class="col-12">
                    <form class="multisteps-form__form">
                      <!--Start panel-->
                      <div class="multisteps-form__panel shadow p-4 rounded bg-white js-active" data-animation="scaleIn">
                        <h4 class="multisteps-form__title">Choose One</h4>
                        <div class="multisteps-form__content">

                          <div class="row">
                            <div class="col-md-2">

                            </div>

                            <div class="col-md-4 d-flex justify-content-center">
                              <div id="step1NewCourse" class="text-center" style="border: solid gray 1px; width: 250px; padding: 2rem 0.5rem 1rem 0.5rem; margin: 1rem 1rem; cursor: auto; pointer-events: none;"  onclick="updateStep1(this);"> 
                                <i class="fas fa-chalkboard fa-2x  fa-fw"></i>
                                <h4 style="font-weight: bold; margin-top: 0.5rem;">New Course</h4>
                                <p style="font-size: small; margin-top: 0.5rem;">Start selling your course. <br> It can be a tutoring lesson, exam tips sharing, revision class  & any course of any formal subjects. </p>

                              </div>
              
                            </div>

                            <div class="col-md-4 d-flex justify-content-center" >
                              <div id="step1LinkToAClass" class="text-center" style="border: solid gray 1px; width: 250px; padding: 2rem 0.5rem 1rem 0.5rem; margin: 1rem 1rem; cursor: auto; pointer-events: none;" data-target="#addClassModal" data-toggle="modal" onclick="updateStep1(this);"> 
                                <i class="far fa-list-alt fa-2x fa-fw"></i>
                                <h4 style="font-weight: bold; margin-top: 0.5rem;">Link To A Class</h4>
                                <p style="font-size: small;margin-top: 0.5rem;">Create a public course linked to your existing class. <br>
                                  Some of your class details & latest lessons will be visible to public. 
                                </p>
                              </div>
                            </div>
                            <div class="col-md-2">

                            </div>
                          </div>
                              
                          <div class="button-row d-flex mt-4">
                            <button class="btn btn-primary ml-auto js-btn-next" type="button" title="Next" id="btnNextStep1" style="display: none;">Next</button>
                          </div>
                        </div>
                      </div>
                      <!--Subject panel-->
                      <div class="multisteps-form__panel shadow p-4 rounded bg-white" data-animation="scaleIn">
                        <h4 class="multisteps-form__title">Choose A Subject</h4>
                        <div class="multisteps-form__content">
                          
                          <!-- Level and Subject  -->
                          <div class="row" style="margin: 0.5rem 0 0 0;  display: flex;" id="levelSubjectTop">
                            <div class="col-md-6" style="padding-left: 0;">
                                <!-- Education Level -->
                              <div class="form-group" >
                                <span class="" style="font-size: smaller; font-weight: 300; color: gray;">Education Level*</span> 
                                <select class="form-control" name="tutor_course[]" id="level_drop" data-compulsory="true" oninput="this.className = 'form-control'">
                                  <option value="">Select education level</option>
                                </select>
                              </div>
                            </div>
                            <div class="col-md-6" style="padding-left: 0;">
                              <!-- Subjects -->
                              <div class="form-group">
                                <span class="" style="font-size: smaller; font-weight: 300; color: gray;" >Subject*</span>
                                <select class="form-control" name="tutor_course[]" id="subject_drop" data-compulsory="true" oninput="this.className = 'form-control'">
                                  <option value="">Select subject</option>
                                </select>
                              </div>
                            </div>
                          </div>

                          <div class="row" style="margin-top: 1rem;">
                            <div class="col-md-12" id="subjectCreated">
                              <p style="font-size: small; margin-bottom: 5px; display: none;" id="txtSubjectCreated">You have created the public course for </p>
                              <!-- <span style="padding: 3px 5px; margin-bottom: 2px; margin-right:2px; color: white; background-color: #2e74b6; border-radius: 5px; font-size: small; font-weight: 500;">asdada</span> -->
                            </div>
                          </div>
                  
                          <div class="button-row d-flex mt-4">
                            <button class="btn btn-primary js-btn-prev" type="button" title="Prev">Prev</button>
                            <button class="btn btn-primary ml-auto js-btn-next" type="button" title="Next">Next</button>
                          </div>
                        </div>
                      </div>
                      <!--General panel-->
                      <div class="multisteps-form__panel shadow p-4 rounded bg-white" data-animation="scaleIn">
                        <h4 class="multisteps-form__title">Title</h4>
                        <div class="multisteps-form__content">
                          <div class="col-md-12">

                            <div class="form-group" style="margin-top: 2rem;">
                              <span class="" style="font-size: smaller; font-weight: 300; color: gray; margin-bottom: 0;">Course Name* <span id="countCourseName" style="color: grey; margin-left: 1rem;">0/40</span></span> 
                              <input type="text" class="form-control" id="inCourseName" data-compulsory="true" oninput="this.className = 'form-control'" maxlength="40">
                            </div>
      
                            <div class="form-group" style="margin-top: 1.5rem;" >
                              <span class="" style="font-size: smaller; font-weight: 300; color: gray; margin-bottom: 0;">Course Description <span id="countCourseDesc" style="color: grey; margin-left: 1rem;">0/400</span></span> 
                              <textarea class="form-control" maxlength="400" rows="4" id="inCourseDesc" data-compulsory="false"></textarea>
                            </div>

                          </div>

                          <div class="button-row d-flex mt-4">
                            <button class="btn btn-primary js-btn-prev" type="button" title="Prev">Prev</button>
                            <button class="btn btn-primary ml-auto js-btn-next" type="button" title="Next">Next</button>
                          </div>
                        </div>
                      </div>
                      <!--Time Slot panel-->
                      <div class="multisteps-form__panel shadow p-4 rounded bg-white" data-animation="scaleIn">
                        <h4 class="multisteps-form__title">Class Schedule</h4>
                        <div class="multisteps-form__content">
                          <div class="col-md-12" id="timeSlotTop">
                          
                            <div class="container" id="timeSlot-container">
                              <div class="row" style="padding: 0rem 3rem 0rem 0rem; border: solid #2e74b6; border-width: thin; margin-top: 1rem;" id="timeSlot-1">
                                
                                <div class="col-md-5">
                                  <div class="form-group">
                                    <span class="" style="font-size: smaller; font-weight: 300; color: gray;">Day of Week*</span> 
                                    <select class="form-control" name="tutor_course[]" id="inDayOfWeek1" data-compulsory="true" oninput="this.className = 'form-control'">
                                      <option value="">Select Day Of Week</option>
                                      <option value="mon">Monday</option>
                                      <option value="tue">Tuesday</option>
                                      <option value="wed">Wednesday</option>
                                      <option value="thu">Thursday</option>
                                      <option value="fri">Friday</option>
                                      <option value="sat">Saturday</option>
                                      <option value="sun">Sunday</option>
                                    </select>
                                  </div>

                                  <!-- <div class="form-group">
                                    <span class="" style="font-size: smaller; font-weight: 300; color: gray;margin-bottom: 0;">Day of Week*</span> 
                                    <input type="text" class="form-control" id="DayOfWeek1">
                                  </div> -->
                                </div>
                                <div class="col-md-3">
                                  <div class="form-group"  >
                                    <span class="" style="font-size: smaller; font-weight: 300; color: gray;">Start Time*</span> 
                                    <div class="input-group clockpicker" data-placement="bottom" data-align="top" data-autoclose="true" style="margin-top: 0.3rem;">
                                      <input id="inStartTime1" type="text" class="form-control" value="" data-compulsory="true" oninput="this.className = 'form-control'" style="cursor: not-allowed; pointer-events: none;">
                                      <span class="d-flex align-items-center input-group-addon">
                                        <span class="material-icons">
                                          more_time
                                        </span>
                                      </span>
                                    </div>  
                                  </div>
                                </div>
                                <div class="col-md-3">
                                  <div class="form-group">
                                    <span class="" style="font-size: smaller; font-weight: 300; color: gray; margin-bottom: 0;">End Time*</span> 
                                    <div class="input-group clockpicker" data-placement="bottom" data-align="top" data-autoclose="true" style="margin-top: 0.3rem;">
                                      <input id="inEndTime1" type="text" class="form-control" value="" data-compulsory="true" oninput="this.className = 'form-control'" style="cursor: not-allowed; pointer-events: none;">
                                      <span class="d-flex align-items-center input-group-addon">
                                        <span class="material-icons">
                                          more_time
                                        </span>
                                      </span>
                                    </div>  
                                  </div>
                                </div>
                                <!-- <div class="col-md-1 d-flex align-items-center">
                                  <a href="#" class="btn btn-sm btn-outline-danger btn-round" id="btnRemoveTimeSlot"><i class="material-icons" style="color: red;">remove</i></a>
                                </div> -->
                              </div>

                            </div>

                            <div class="col-lg-4 col-md-4 col-sm-4">
                              <a class="btn btn-sm btn-outline-primary btn-round" id="btnAddTimeSlot"><i class="material-icons" style="color: #2e74b6;">add</i></a>
                            </div>
                          </div>

                          <div class="button-row d-flex mt-4">
                            <button class="btn btn-primary js-btn-prev" type="button" title="Prev">Prev</button>
                            <button class="btn btn-primary ml-auto js-btn-next" type="button" title="Next">Next</button>
                          </div>
                        </div>
                      </div>
                      <!--Mode panel-->
                      <!-- <div class="multisteps-form__panel shadow p-4 rounded bg-white" data-animation="scaleIn">
                        <h4 class="multisteps-form__title">Tutoring Mode</h4>
                        <div class="multisteps-form__content">
                          <div class="form-check" style="margin-top: 1.0rem;">
                            <label class="form-check-label">
                              <input class="form-check-input" type="checkbox" value="" id="modeOnlineGroup" checked>
                              <span class="form-check-sign">
                                <span class="check"></span>
                              </span>
                              Online Class
                            </label>
                          </div>
                          <div class="form-check" style="margin-top: 1.0rem;">
                            <label class="form-check-label">
                              <input class="form-check-input" type="checkbox" value="" id="modeGroup">
                              <span class="form-check-sign">
                                <span class="check"></span>
                              </span>
                              Physical Class
                            </label>
                          </div>
                          
                          <div class="form-check" style="margin-top: 1.0rem;">
                            <label class="form-check-label">
                              <input class="form-check-input" type="checkbox" value="" id="modeOnline">
                              <span class="form-check-sign">
                                <span class="check"></span>
                              </span>
                              1-to-1 Online Tutoring
                            </label>
                          </div>

                          <div class="multisteps-form__content">
                            <div class="form-check" style="margin-top: 1.0rem;">
                              <label class="form-check-label">
                                <input class="form-check-input" type="checkbox" value="" id="modeHomeTutorToStudent">
                                <span class="form-check-sign">
                                  <span class="check"></span>
                                </span>
                                1-to-1 Tutoring - Tutor to Student's Place
                              </label>
                            </div>
                          </div>
                          <div class="multisteps-form__content">
                            <div class="form-check" style="margin-top: 1.0rem;">
                              <label class="form-check-label">
                                <input class="form-check-input" type="checkbox" value="" id="modeHomeStudentToTutor">
                                <span class="form-check-sign">
                                  <span class="check"></span>
                                </span>
                                1-to-1 Tutoring - Student to Tutor's Place
                              </label>
                            </div>
                          </div>

                  
                          <div class="button-row d-flex mt-4">
                            <button class="btn btn-primary js-btn-prev" type="button" title="Prev">Prev</button>
                            <button class="btn btn-primary ml-auto js-btn-next" type="button" title="Next">Next</button>
                          </div>
                        </div>
                      </div> -->
                      <!--Fee panel-->
                      <div class="multisteps-form__panel shadow p-4 rounded bg-white" data-animation="scaleIn">
                        <h4 class="multisteps-form__title">Fee</h4>
                        <div class="multisteps-form__content">
    
                          <div class="form-group" style="margin-top: 2rem;">
                            <span class="" style="font-size: smaller; font-weight: 300; color: gray; margin-bottom: 0;">Fee* (RM)</span> 
                            <input type="number" step=".01" pattern="^\d*(\.\d{0,2})?$" class="form-control" id="inFee" data-compulsory="true" oninput="this.className = 'form-control'; checkFeeLimit();" max="9999">
                          </div>

                          <div style="margin-top: 1.0rem;"></div>
                          <span class="" style="font-size: smaller; font-weight: 300; color: gray; padding-right: 2rem;" >Fee Type</span> 
                          <div class="form-group" >
                            <div class="form-check form-check-radio form-check-inline">
                              <label class="form-check-label">
                                <input class="form-check-input" type="radio" name="exampleRadios" id="feeTypePerMonthRadio" value="option1" data-compulsory="false" checked>
                                Per Month
                                <span class="circle">
                                  <span class="check"></span>
                                </span>
                              </label>
                            </div>
                            <div class="form-check form-check-radio form-check-inline">
                              <label class="form-check-label">
                                <input class="form-check-input" type="radio" name="exampleRadios" id="feeTypePerHourRadio" value="option2" data-compulsory="false">
                                Per Hour
                                <span class="circle">
                                  <span class="check"></span>
                                </span>
                              </label>
                            </div>
                          </div>

                          <div class="form-group" style="margin-top: 1.5rem;" >
                            <span class="" style="font-size: smaller; font-weight: 300; color: gray; margin-bottom: 0;">Fee Description <span id="countCourseFeeDesc" style="color: grey; margin-left: 1rem;">0/400</span></span> 
                            <textarea class="form-control" maxlength="250" rows="4" id="inCourseFeeDesc" data-compulsory="false"></textarea>
                          </div>

                          
                          <div class="button-row d-flex mt-4">
                            <button class="btn btn-primary js-btn-prev" type="button" title="Prev">Prev</button>
                            <button class="btn btn-success ml-auto js-btn-send" type="button" title="Send" id="btnCreateCourse">Create Course</button>
                          </div>
                        </div>
                      </div>
           
                    </form>
                  </div>
                </div>
              </div>

            </div>
          </div>

        </div>
      </div>

      <footer class="footer">
        <div class="container-fluid">
          <nav class="float-left">
          <ul>
            <!-- <li>
            <a href="https://golearn.com.my/join-us" target="_blank">
              Visit GoLearn Tutor
            </a>
            </li> -->
          </ul>
          </nav>
          <!-- <div class="copyright float-right">
            &copy;
            <script>
              document.write(new Date().getFullYear())
            </script> 
            , made with <i class="material-icons">favorite</i> by <a href="#" >GoLearn Team</a>
          </div> -->
          <!-- your footer here -->
        </div>
      </footer>
    </div>
	  
  </div>

  
  <script src="../../assets/js/core/jquery.min.js"></script>
  <script src="../../assets/js/core/popper.min.js"></script>
  <script src="../../assets/js/core/bootstrap-material-design.min.js"></script>
  <script src="../../assets/js/plugins/perfect-scrollbar.jquery.min.js"></script>
  <!-- Plugin for the momentJs  -->
  <script src="../../assets/js/plugins/moment.min.js"></script>
  <!--  Plugin for Sweet Alert -->
  <script src="../../assets/js/plugins/sweetalert2.js"></script>
  <!-- Forms Validations Plugin -->
  <script src="../../assets/js/plugins/jquery.validate.min.js"></script>
  <!--  Notifications Plugin    -->
  <script src="../../assets/js/plugins/bootstrap-notify.js"></script>
  <!-- Control Center for Material Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="../../assets/js/material-dashboard.js?v=2.1.2" type="text/javascript"></script>
  
  <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.min.js" integrity="sha384-lpyLfhYuitXl2zRZ5Bn2fqnhNAKOAaM/0Kr9laMspuaMiZfGmfwRNFh8HlMy49eQ" crossorigin="anonymous"></script> -->
  <!-- Common constants -->
  <script src="../../assets/js/common.js" type="text/javascript"></script>
  <!-- General Info -->
  <script src="../../assets/js/const.js" type="text/javascript"></script>
  <!-- Global Var -->
  <script src="../../assets/js/globalvar.js" type="text/javascript"></script>
  <!-- Core Tutor Js -->
  <script src="../../assets/js/tutor-core.js" type="text/javascript"></script>
  <script>
  
    var latestClassDoc = '';// Store last document - Used for Class Load More btn

    var classId = ""; // classId

    // Time Slot
    var dayOfWeekArr = [];
    var startTimeArr = [];
    var endTimeArr = [];

    // var getAllCourse = true; // Bool to indicate if first Run

    // Initialization
    AuthCheck();

    // Page Specific Initialization
    function loadPageInitFunc(){

      // initPage();

      loadAllCourse();
    }

    // This function check the validity of imgUrl. Return true when invalid.
    function tutorImgUrlChecker(imgUrl){
      // Tutor Panel
      let isHelloGifExist = false ;
      let helloGifArr =  imgUrl.match(/hello.gif/gi)
      if ( helloGifArr != null) {
        if (helloGifArr.length > 0){
          isHelloGifExist = true;
        }
      }
      let isEmptyPhotoPngExist = false;
      let emptyPhotoPngArr = imgUrl.match(/empty-photo.png/gi)
      if ( emptyPhotoPngArr != null) {
        if (emptyPhotoPngArr.length > 0){
          isEmptyPhotoPngExist = true;
        }
      }
      let isGeneratedAvatar = false; 
      let generatedAvatarArr = imgUrl.match(/data:image\/png;base64,/gi)
      if ( generatedAvatarArr != null) {
        if (generatedAvatarArr.length > 0){
          isGeneratedAvatar = true;
        }
      }

      if (isHelloGifExist || isEmptyPhotoPngExist || isGeneratedAvatar)
        return true;
      else
        return false;
    }


    //---------- Init All Admin's Class details ----------//
    const classAdminLoadmore = document.getElementById('btnClassLoadMore');
    classAdminLoadmore.style.visibility='hidden';
    const classAdminLoadmoreHandleClick = () =>{
      loadAllAdminClasses();
    }
    classAdminLoadmore.addEventListener('click', classAdminLoadmoreHandleClick );

    // Initialized page view
    function initPage(){
      document.getElementById("loadingScreen").style.display = "none";

      // Start Panel
      document.getElementById("step1NewCourse").style.cursor = "pointer";
      document.getElementById("step1LinkToAClass").style.cursor = "pointer";
      document.getElementById("step1NewCourse").style.pointerEvents = "auto";
      document.getElementById("step1LinkToAClass").style.pointerEvents = "auto";

      // Subject Panel
      if (allCourseCat.length > 0){
        document.getElementById("txtSubjectCreated").style.display = "";

        const subjectCreated = document.getElementById("subjectCreated");

        allCourseCat.forEach((cat, index) => {

          let classTag = document.createElement('span');
          classTag.setAttribute("style", "padding: 3px 5px; display: inline-block; margin-bottom: 2px; margin-right:2px; color: white; background-color: #2e74b6; border-radius: 5px; font-size: small; font-weight: 500;")
          classTag.textContent = Category[CategoryId.indexOf(cat)] +"-"+ getSubjectBasedOnCategoryIdAndSubjectId(cat, allCourseSub[index]);

          subjectCreated.appendChild(classTag);
        });

      }
    }
    
    // Create Course
    function CreateCourse(){
      var courseDocRef = db.collection("course")
        .doc("v1")
        .collection("course")
        .doc();

      var contentDocRef = db.collection("course")
        .doc("v1")
        .collection("content")
        .doc();

      let courseId = courseDocRef.id;
      let contentId = contentDocRef.id;

      // let modeOnlineGroup = document.getElementById("modeOnlineGroup").checked;
      // let modeGroup = document.getElementById("modeGroup").checked;
      // let modeOnline = document.getElementById("modeOnline").checked;
      // let modeHomeTutorToStudent = document.getElementById("modeHomeTutorToStudent").checked;
      // let modeHomeStudentToTutor = document.getElementById("modeHomeStudentToTutor").checked;
      let mode = [MODE_ONLINE_GROUP];
      // if (modeOnlineGroup) mode.push(MODE_ONLINE_GROUP);
      // if (modeGroup) mode.push(MODE_GROUP);
      // if (modeOnline) mode.push(MODE_ONLINE);
      // if (modeHomeTutorToStudent) mode.push(MODE_HOME_TUTOR_TO_STUDENT);
      // if (modeHomeStudentToTutor) mode.push(MODE_HOME_STUDENT_TO_TUTOR);

      let lan = [LAN_ENGLISH]

      let docData = {
        [COURSE_ID]: courseId,
        [COURSE_ADMIN_ID]: tutorId,
        [COURSE_CLASS_ID]: classId,
        [COURSE_CONTENT_ID]: contentId,
        [COURSE_URL]: '',
        [COURSE_NAME]: document.getElementById("inCourseName").value,
        [COURSE_DESC]: document.getElementById("inCourseDesc").value,
        [COURSE_TIMESLOT_DAY_OF_WEEK_ARR]: dayOfWeekArr,
        [COURSE_TIMESLOT_START_ARR]: startTimeArr,
        [COURSE_TIMESLOT_END_ARR]: endTimeArr,
        [COURSE_OBJ_ARR]: [],
        [COURSE_MODE_ARR]: mode,
        [COURSE_LAN_ARR]: lan,
        [COURSE_INCLUDE]: [],
        [COURSE_FEE]: document.getElementById("inFee").value,
        [COURSE_FEE_TYPE]: document.getElementById("feeTypePerMonthRadio").checked ? FEES_TYPE_PER_MONTH_KEY : FEES_TYPE_PER_HOUR_KEY,
        [COURSE_FEE_DESC]: document.getElementById("inCourseFeeDesc").value,
        [COURSE_RATE]: 0,
        [COURSE_RATE_TIMES]: 0,
        [COURSE_RATE_FINAL]: 0,
        [COURSE_CAT_ID]: $('#level_drop').val(),
        [COURSE_SUB_ID]: $("#subject_drop").val(),
        [COURSE_STATE_ID]: '',
        [COURSE_AREA_ID]: '',
        [COURSE_DATE_CREATE]: new Date(),
        [COURSE_DATE_UPDATE]: new Date(),
        [COURSE_STATUS]: COURSE_STATUS_DRAFT,
      }

      console.log("Create Course");
      console.log(docData);

      contentData = {
        [COURSE_CONTENT_UID]: contentId,
        [COURSE_CONTENT_ADMIN_ID]: tutorId,
        [COURSE_CONTENT_COURSE_ID]: courseId,
        [COURSE_CONTENT_CLASS_ID]: classId,
        [COURSE_CONTENT_ITEM]: [],
        [COURSE_CONTENT_DATE_UPDATE]: new Date(),
      }

      console.log("Create Course Content ");
      console.log(contentData);

      var batch = db.batch();

      batch.set(courseDocRef, docData, {merge: true} )
      batch.set(contentDocRef, contentData, {merge: true})

      batch.commit().then(() => {
        window.location ="./manage.html?id=" + courseId;
      })

    }

    // Load All Class that owned by class admin. 
    var allClassData = []; 
    var allCourseId = []; // Used to disabled linked Class
    var allCourseCat = []; // Used to disabled used Category
    var allCourseSub = []; // Used to disabled used Subject
    function loadAllAdminClasses(){

      var docRef = db.collection("Class")
        .doc("v1")
        .collection("Class")
        .where(CLASS_ADMIN_ID, "==", tutorId)
        .where(STATUS_KEY, "==", true)
        .orderBy(CLASS_STATUS, 'asc')
        .orderBy(CLASS_NAME, 'asc')
        .startAfter(latestClassDoc)
        .limit(1);
      
      // var allCourseDocRef = db.collection("course")
      //   .doc("v1")
      //   .collection("course")
      //   .where(COURSE_ADMIN_ID, "==", tutorId)

      const promiseArr = [];
      // if (getAllCourse){
      //   promiseArr.push(docRef.get());
      //   promiseArr.push(allCourseDocRef.get());
      // }else {
      //   promiseArr.push(docRef.get());
      // }
      promiseArr.push(docRef.get());

      Promise.all(promiseArr).then((snapshots) => {
        
        // // For Course - Get the list of classId
        // if (getAllCourse){
        //   snapshots[1].forEach((doc) => {
        //     allCourseId.push(doc.data()[COURSE_CLASS_ID]);
        //     allCourseCat.push(doc.data()[COURSE_CAT_ID]);
        //     allCourseSub.push(doc.data()[COURSE_SUB_ID]);
        //   });

        //   getAllCourse = false; // Disable course items reload the next run
        // }
        // console.log(allCourseId);

        // For Class
        document.getElementById("card-load").style.display = "none";
        if (( snapshots[0].docs.length== null || snapshots[0].docs.length == 0) && latestClassDoc == null){
          document.getElementById("noDataPlaceholder").style.display = 'initial';
        }else{
          document.getElementById("noDataPlaceholder").style.display = 'none';
        }

        if (snapshots[0].empty){
          // Load empty data 
        }else {
          snapshots[0].forEach((doc) => {
            allClassData.push(doc.data());
            // console.log(doc.data());

            // Check if course already existed.
            let courseExist = false;
            allCourseId.forEach((courseId) => {
              if (courseId == doc.data()[CLASS_ID] && courseId != ""){
                courseExist = true;
              }

            });

            renderAllActiveClasses(doc, courseExist);

          });

          // console.log(allClassData)

        }

        // Load more handling
        latestClassDoc = snapshots[0].docs[snapshots[0].docs.length - 1];
        // console.log(snapshots[0].docs.length)

        // Handle Lesson Load more btn
        if (snapshots[0].empty){
          classAdminLoadmore.removeEventListener('click', classAdminLoadmoreHandleClick );
        }
        if (snapshots[0].docs.length == 1){
          classAdminLoadmore.style.visibility='visible';
        }else{
          classAdminLoadmore.style.visibility='hidden';
        }

      })

      // docRef
      // .get()
      // .then((querySnapshot) => {
        
      //   document.getElementById("card-load").style.display = "none";
        
      //   if (( querySnapshot.docs.length== null || querySnapshot.docs.length == 0) && latestClassDoc == null){
      //     document.getElementById("noDataPlaceholder").style.display = 'initial';
      //   }else{
      //     document.getElementById("noDataPlaceholder").style.display = 'none';
      //   }

      //   if (querySnapshot.empty){
      //     // Load empty data 
      //   }else {
      //     querySnapshot.forEach((doc) => {
      //       allClassData.push(doc.data());
      //       console.log(doc.data())
      //       renderAllActiveClasses(doc);
      //     });

      //     console.log(allClassData)

      //   }

      //   // Load more handling
      //   latestClassDoc = querySnapshot.docs[querySnapshot.docs.length - 1];
      //   // console.log(querySnapshot.docs.length)

      //   // Handle Lesson Load more btn
      //   if (querySnapshot.empty){
      //     classAdminLoadmore.removeEventListener('click', classAdminLoadmoreHandleClick );
      //   }
      //   if (querySnapshot.docs.length == 1){
      //     classAdminLoadmore.style.visibility='visible';
      //   }else{
      //     classAdminLoadmore.style.visibility='hidden';
      //   }
      // });

    }

    // Render all class view
    function renderAllActiveClasses(doc, courseExist){
      // <div class="row tutor-wrapper">
      //   <div class="col-md-1">
      //     <div style="height: 50px; width: 50px; display: inline-block; position: relative; overflow: hidden; border-radius: 50%;">
      //       <img id="viewTutorImgUrl" style="height: 100%;width: 100%; object-fit: cover;" src="../../assets/img/empty-photo.png"/>
      //     </div>
      //   </div>
      //   <div class="col-md-6">
      //     <p class="tutor-item">Y3 English Class</p>
      //   </div>
      //   <div class="col-md-3">
      //     <p class="tutor-item">Alric Liew </p>
      //   </div>
      //   <div class="col-md-2">
      //     <button type="button" class="btn btn-primary btn-sm" data-dismiss="modal" id="btnSelectTutor">Select</button>
      //   </div>
      // </div>

      let imgUrl_temp = "";
      let img = document.createElement('img');
      img.setAttribute('style', 'height: 100%; width: 100%; object-fit: cover;');

      // Check if img is valid. If no, create a 2 chars avatar
      if (doc.data()[CLASS_IMG_URL] == null || doc.data()[CLASS_IMG_URL] == "" 
      || doc.data()[CLASS_IMG_URL] == "data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D"
      || tutorImgUrlChecker(doc.data()[CLASS_IMG_URL])){

        let AvatarText = doc.data()[CLASS_NAME][0] + doc.data()[CLASS_NAME][1];
        img.src = generateAvatar(AvatarText, "#eaeaea", "#f6f6f6", "100px");
        imgUrl_temp = "";

      }
      else {
        img.src = doc.data()[CLASS_IMG_URL];
        imgUrl_temp = doc.data()[CLASS_IMG_URL];
      }

      let img_div = document.createElement('div');
      img_div.setAttribute('style', 'height: 50px; width: 50px; display: inline-block; position: relative; overflow: hidden; border-radius: 50%;');
      img_div.appendChild(img);
      let imgTop_div = document.createElement('div');
      imgTop_div.className = "col-md-1";
      imgTop_div.appendChild(img_div);

      // Class Name
      let className_p = document.createElement('p');
      className_p.className = "tutor-item";
      className_p.textContent = doc.data()[CLASS_NAME];
      let className_div = document.createElement('div');
      className_div.className = "col-md-6";
      className_div.appendChild(className_p);

      // Class Teacher Name
      let teacherText = '';
      if (doc.data()[CLASS_TUTOR_NAME_ARR][1] == null || doc.data()[CLASS_TUTOR_NAME_ARR][1] == ""){
        // Check if second teacher existed
        teacherText = doc.data()[CLASS_TUTOR_NAME_ARR][0];
      }else {
        teacherText = doc.data()[CLASS_TUTOR_NAME_ARR][0]+", "+doc.data()[CLASS_TUTOR_NAME_ARR][1];
      }
      let tutorName_p = document.createElement('p');
      tutorName_p.className = "tutor-item";
      tutorName_p.textContent = teacherText;
      let tutorName_div = document.createElement('div');
      tutorName_div.className = "col-md-3";
      tutorName_div.appendChild(tutorName_p);

      let sel_btn = document.createElement('button');
      sel_btn.className = "btn btn-primary btn-sm";
      if (courseExist){
        sel_btn.textContent = 'Linked';
        sel_btn.setAttribute('disabled', true);

      }else {
        sel_btn.textContent = 'Select';
      }
      sel_btn.setAttribute('data-dismiss','modal');
      sel_btn.setAttribute('type','button')
      sel_btn.setAttribute('onclick',"AddClassDetailsToField('"+doc.data()[CLASS_ID]+"')");
      let sel_div = document.createElement('div');
      sel_div.className = "col-md-2";
      sel_div.appendChild(sel_btn);

      let tutorDetail_div = document.createElement('div');
      tutorDetail_div.className = 'row tutor-wrapper';
      tutorDetail_div.appendChild(imgTop_div);
      tutorDetail_div.appendChild(className_div);
      tutorDetail_div.appendChild(tutorName_div);
      tutorDetail_div.appendChild(sel_div);

      const add_tutor_modal_container = document.getElementById("add-tutor-modal-container");
      add_tutor_modal_container.appendChild(tutorDetail_div);

      // add_tutor_modal_container.insertBefore(tutorDetail_div, add_tutor_modal_container.children[1])
    }

    // Load all course
    function loadAllCourse() {
      var allCourseDocRef = db.collection("course")
        .doc("v1")
        .collection("course")
        .where(COURSE_ADMIN_ID, "==", tutorId)

      allCourseDocRef.get().then((querySnapshot) => {

        querySnapshot.forEach((doc) => {
            allCourseId.push(doc.data()[COURSE_CLASS_ID]);
            allCourseCat.push(doc.data()[COURSE_CAT_ID]);
            allCourseSub.push(doc.data()[COURSE_SUB_ID]);
          });

      }).then(() => {
        // Init page
        initPage();
      })

      
    }

    // Remove Time Slot
    function removeTimeSlot(id){
      $( "#timeSlot-"+id ).remove();
    }

    // Populate class data to fields 
    function AddClassDetailsToField(class_id){

      console.log(allClassData);

      allClassData.forEach((item) => {
        if (item.id == class_id){
          fillDetails(item);

          classId = class_id; 

          func.showNotification('top','center', 'success', 'check_circle', "Linked to " +item[CLASS_NAME]);

        }
      });
    }

    function fillDetails(classItem){
      // Clear all fields
      clearAll();

      // General Panel
      document.getElementById("inCourseName").value = classItem[CLASS_NAME];
      document.getElementById("inCourseDesc").value = classItem[CLASS_DESC];

      // Time Slot Panel
      // Remove second and above time slot
      clearTimeSlot();
      // 1st Slot

      if (classItem[CLASS_TIMESLOT_DAY_OF_WEEK_ARR][0] == null || classItem[CLASS_TIMESLOT_DAY_OF_WEEK_ARR][0] == ""){
        // Someone removed the first Day of Week. So do nothing here
      }else {
        // $('#inDayOfWeek1').find('option[value='+classItem[CLASS_TIMESLOT_DAY_OF_WEEK_ARR][0]+']').attr('selected','selected');
        document.getElementById('inDayOfWeek1').value = classItem[CLASS_TIMESLOT_DAY_OF_WEEK_ARR][0];
      }
      document.getElementById("inStartTime1").value = classItem[CLASS_TIMESLOT_START_ARR][0];
      document.getElementById("inEndTime1").value = classItem[CLASS_TIMESLOT_END_ARR][0];
      if (classItem[CLASS_TIMESLOT_DAY_OF_WEEK_ARR].length > 1){
        // Add time slot
        for (let i = 1; i<classItem[CLASS_TIMESLOT_DAY_OF_WEEK_ARR].length; i++){
          addTimeSlot(classItem[CLASS_TIMESLOT_DAY_OF_WEEK_ARR][i], classItem[CLASS_TIMESLOT_START_ARR][i], classItem[CLASS_TIMESLOT_END_ARR][i]); 
        }
      }
      initTimePicker();

      // Mode Panel (init)
      // document.getElementById("modeOnlineGroup").checked = true;
      // document.getElementById("modeGroup").checked = false;
      // document.getElementById("modeOnline").checked = false;
      // document.getElementById("modeHomeTutorToStudent").checked = false;
      // document.getElementById("modeHomeStudentToTutor").checked = false;

      // Fee Panel
      document.getElementById("inFee").value = classItem[FEES_KEY];
      document.getElementById("feeTypePerMonthRadio").checked = classItem[FEES_TYPE_KEY] === FEES_TYPE_PER_MONTH_KEY ;
      document.getElementById("feeTypePerHourRadio").checked = classItem[FEES_TYPE_KEY] === FEES_TYPE_PER_HOUR_KEY ;

      // Complete Step 1 
      document.getElementById("step1LinkToAClass").style.background = "#B4C7E7"
      setActiveStep(1);
      setActivePanel(1);

      // Show next button on Step 1
      document.getElementById("btnNextStep1").style.display = "";
    }

    // Update Step 1
    function updateStep1(el) {
      let id = el.id;
      if (id === "step1NewCourse"){
        clearAll();
        setActiveStep(1);
        setActivePanel(1);
        el.style.background = "#B4C7E7";
        document.getElementById("step1LinkToAClass").style.background = "#fff"
        // Show next button on Step 1
        document.getElementById("btnNextStep1").style.display = "";

      }
      else if (id === "step1LinkToAClass"){
        document.getElementById("step1NewCourse").style.background = "#fff"

      }else {
        clearAll();
        // Do nothing
        document.getElementById("step1LinkToAClass").style.background = "#fff"
        document.getElementById("step1NewCourse").style.background = "#fff"
      }
    }

    // Clear all fields
    function clearAll() {

      // Subject Panel
      document.getElementById("level_drop").selectedIndex = 0;
      for(i=1; i <= 100; i++){
          subject_drop.remove(1);
      } 

      // General Panel
      document.getElementById("inCourseName").value = "";
      document.getElementById("inCourseDesc").value = "";
      
      document.getElementById("countCourseName").textContent = "0/40";
      document.getElementById("countCourseDesc").textContent = "0/400";

      // Time Slot Panel
      clearTimeSlot();
      let dayofweek_drop = document.getElementById("inDayOfWeek1");
      dayofweek_drop.selectedIndex = 0;
      document.getElementById("inStartTime1").value = '';
      document.getElementById("inEndTime1").value = '';

      initTimePicker();

      // Mode Panel
      // document.getElementById("modeOnlineGroup").checked = true;
      // document.getElementById("modeGroup").checked = false;
      // document.getElementById("modeOnline").checked = false;
      // document.getElementById("modeHomeTutorToStudent").checked = false;
      // document.getElementById("modeHomeStudentToTutor").checked = false;

      // Fee Panel
      document.getElementById("inFee").value = '';
      document.getElementById("feeTypePerMonthRadio").checked = true ;
      document.getElementById("feeTypePerHourRadio").checked = false ;
      document.getElementById("inCourseFeeDesc").value = "";
      document.getElementById("countCourseFeeDesc").textContent = "0/250";

    }
  
    // Add Time Slot
    function addTimeSlot(dayOfWeekVal, startTime, endTime){
      var x = document.getElementById("timeSlot-container").childElementCount;

      let dayOfWeek_form_label = document.createElement('span');
      dayOfWeek_form_label.className = "";
      dayOfWeek_form_label.textContent = "Day of Week";
      dayOfWeek_form_label.setAttribute("style", "font-size: smaller; font-weight: 300; color: gray; margin-bottom: 0;");

      // let blogsHtml_dayOfWeek = '';
      // blogsHtml_dayOfWeek += "<option value=''>Select Day Of Week</option><option value='mon'>Monday</option><option value='tue'>Tuesday</option><option value='wed'>Wednesday</option><option value='thu'>Thursday</option><option value='fri'>Friday</option><option value='sat'>Saturday</option><option value='sun'>Sunday</option>";
      let dayOfWeek_form_input = document.createElement('select');
      // dayOfWeek_form_input.innerHTML = blogsHtml_dayOfWeek;
      dayOfWeek_form_input.className = "form-control";
      dayOfWeek_form_input.selected = dayOfWeekVal;
      dayOfWeek_form_input.setAttribute("data-compulsory", "true");
      dayOfWeek_form_input.setAttribute("oninput", "this.className = 'form-control'");
      dayOfWeek_form_input.setAttribute("id", "DayOfWeek" + (x+1));
      let myDayOfWeekId = MyDayOfWeekId; 
      let myDayOfWeek = MyDayOfWeek; 
      // First items
      let el = document.createElement("option");
      el.textContent = 'Select Day Of Week';
      el.value = '';
      dayOfWeek_form_input.appendChild(el);
      //Create Mon - Sun options
      for (var i = 0; i < myDayOfWeekId.length; i++) {
        let el = document.createElement("option");
        el.textContent = myDayOfWeek[i];
        el.value = myDayOfWeekId[i];
        // Set default selection
        if (dayOfWeekVal === myDayOfWeekId[i]){
          el.selected =  true;
        }

        dayOfWeek_form_input.appendChild(el);
      }

      let dayOfWeek_form_div = document.createElement('div');
      dayOfWeek_form_div.className = "form-group bmd-form-group";
      dayOfWeek_form_div.appendChild(dayOfWeek_form_label)
      dayOfWeek_form_div.appendChild(dayOfWeek_form_input)
      let dayOfWeek_div = document.createElement('div');
      dayOfWeek_div.className = "col-md-5";
      dayOfWeek_div.appendChild(dayOfWeek_form_div)

      // Start Time
      let startTime_form_label = document.createElement('span');
      startTime_form_label.className = "";
      startTime_form_label.textContent = "Start Time";
      startTime_form_label.setAttribute("style", "font-size: smaller; font-weight: 300; color: gray; margin-bottom: 0;");

      let startTime_form_input = document.createElement('input');
      startTime_form_input.type = "text";
      startTime_form_input.className = "form-control";
      startTime_form_input.value = startTime;
      startTime_form_input.setAttribute("id", "StartTime" + (x+1));
      startTime_form_input.setAttribute("style", "cursor: not-allowed; pointer-events: none;");
      // startTime_form_input.setAttribute("value", "");
      startTime_form_input.setAttribute("data-compulsory", "true");
      startTime_form_input.setAttribute("oninput", "this.className = 'form-control'");

      let blogsHtml_startTimeIcon = '';
      blogsHtml_startTimeIcon += "<span class='material-icons'>more_time</span>";
      let startTime_span = document.createElement('span');
      startTime_span.innerHTML = blogsHtml_startTimeIcon;
      startTime_span.className = "d-flex align-items-center input-group-addon"

      let startTime_form_input_div = document.createElement('div');
      startTime_form_input_div.type = "text";
      startTime_form_input_div.className = "input-group clockpicker";
      startTime_form_input_div.setAttribute("data-placement", "bottom");
      startTime_form_input_div.setAttribute("data-align", "top");
      startTime_form_input_div.setAttribute("data-autoclose", "true");
      startTime_form_input_div.setAttribute("style", "margin-top: 0.3rem;");
      startTime_form_input_div.appendChild(startTime_form_input)
      startTime_form_input_div.appendChild(startTime_span)

      let startTime_form_div = document.createElement('div');
      startTime_form_div.className = "form-group bmd-form-group";
      startTime_form_div.appendChild(startTime_form_label)
      startTime_form_div.appendChild(startTime_form_input_div)
      let startTime_div = document.createElement('div');
      startTime_div.className = "col-md-3";
      startTime_div.appendChild(startTime_form_div)

      let endTime_form_label = document.createElement('span');
      endTime_form_label.className = "";
      endTime_form_label.textContent = "End Time";
      endTime_form_label.setAttribute("style", "font-size: smaller; font-weight: 300; color: gray; margin-bottom: 0;");

      // <div class="input-group clockpicker" data-placement="right" data-align="top" data-autoclose="true" style="margin-top: 0.3rem;">
      //   <input type="text" class="form-control" value="13:30" id="">
      // </div>

      let endTime_form_input = document.createElement('input');
      endTime_form_input.type = "text";
      endTime_form_input.className = "form-control";
      endTime_form_input.value = endTime;
      endTime_form_input.setAttribute("id", "EndTime" + (x+1));
      endTime_form_input.setAttribute("style", "trcursor: not-allowed; pointer-events: none;ue");
      // endTime_form_input.setAttribute("value", "");
      endTime_form_input.setAttribute("data-compulsory", "true");
      endTime_form_input.setAttribute("oninput", "this.className = 'form-control'");

      let blogsHtml_endTimeIcon = '';
      blogsHtml_endTimeIcon += "<span class='material-icons'>more_time</span>";
      let endTime_span = document.createElement('span');
      endTime_span.innerHTML = blogsHtml_endTimeIcon;
      endTime_span.className = "d-flex align-items-center input-group-addon"

      let endTime_form_input_div = document.createElement('div');
      endTime_form_input_div.type = "text";
      endTime_form_input_div.className = "input-group clockpicker";
      endTime_form_input_div.setAttribute("data-placement", "bottom");
      endTime_form_input_div.setAttribute("data-align", "top");
      endTime_form_input_div.setAttribute("data-autoclose", "true");
      endTime_form_input_div.setAttribute("style", "margin-top: 0.3rem;");
      endTime_form_input_div.appendChild(endTime_form_input)
      endTime_form_input_div.appendChild(endTime_span)

      let endTime_form_div = document.createElement('div');
      endTime_form_div.className = "form-group bmd-form-group";
      endTime_form_div.appendChild(endTime_form_label)
      endTime_form_div.appendChild(endTime_form_input_div)
      let endTime_div = document.createElement('div');
      endTime_div.className = "col-md-3";
      endTime_div.appendChild(endTime_form_div)
      
      let blogsHtml_btn = '';
      blogsHtml_btn += "<i class='material-icons' style='color: red;'>remove</i>";
      let btnRemove_a = document.createElement('a');
      btnRemove_a.innerHTML = blogsHtml_btn;
      btnRemove_a.className = "btn btn-sm btn-outline-danger btn-round"
      btnRemove_a.setAttribute("id", "btnRemoveTimeSlot" + (x+1))
      btnRemove_a.setAttribute("onclick", "removeTimeSlot("+(x+1)+")")
      let btnRemove_div = document.createElement('div');
      btnRemove_div.className = "col-md-1  d-flex align-items-center";
      btnRemove_div.appendChild(btnRemove_a)

      let timeSlotTop_div = document.createElement('div');
      timeSlotTop_div.setAttribute("id", "timeSlot-"+(x+1));
      timeSlotTop_div.setAttribute("style", "padding: 0rem 3rem 0rem 0rem; border: solid #2e74b6; border-width: thin; margin-top: 1rem;");
      timeSlotTop_div.className = "row"
      timeSlotTop_div.appendChild(dayOfWeek_div)
      timeSlotTop_div.appendChild(startTime_div)
      timeSlotTop_div.appendChild(endTime_div)
      timeSlotTop_div.appendChild(btnRemove_div)

      const timeSlot_container = document.getElementById("timeSlot-container");
      timeSlot_container.appendChild(timeSlotTop_div);
      
    }
    
    // Remove second and above Time Slot
    function clearTimeSlot(){
      var timeSlotContainerChildCount = document.getElementById("timeSlot-container").childElementCount;
      var timeSlotContainer = document.getElementById("timeSlot-container").children;

      // console.log(timeSlotContainer);
      Array.from(timeSlotContainer).forEach((row, index) => {

        if (index > 0){
          row.remove();
        }
        // console.log(row);
        // console.log(index);
      });

    }
    
    // Init Time picker
    function initTimePicker(){
      $('.clockpicker').clockpicker()
      .find('input').change(function(){
        // Time changed
        // console.log(this.value);
      });

    }

    // Check course fee limit
    function checkFeeLimit(){
      let fee = document.getElementById("inFee").value;
      if (fee > 9999){
        document.getElementById("inFee").value = 9999;
      }else if (fee < 0){
        document.getElementById("inFee").value = 1;
      }else {
        document.getElementById("inFee").value = fee;
      }
    }
  </script>

  <!-- Script -->
  <script>
    
    // Global var
    var gState ='';
    var gArea ='';
    var gLevel ='';
    var gSubject ='';
    var gOnlineOnly = false;

    var gStateName='';
    var gAreaName ='';
    var gLevelName = '';
    var gSubjectName = '';

    var categoryId= '';
    var category= ''; 
    var subjectId= ''; 
    var subject= ''; 
    var online = false;

    // Time Slot
    var dayOfWeekArr = [];
    var startTimeArr = [];
    var endTimeArr = [];

    $( document ).ready(function() {

      // Subject Panel
      // Populate Education Level
      var level_select = document.getElementById("level_drop"); 
      var level = Category; 
      var catId = CategoryId; 
      for (var i = 0; i < level.length; i++) {
        var opt = level[i];
        var el = document.createElement("option");
        el.setAttribute("value", catId[i]);
        el.textContent = opt;
        el.value = catId[i];
        level_select.appendChild(el);
      }

      // Populate Subject based on selected education level
      $('#level_drop').on('change', function(){
        // Initialization
        // Reasign subject after the level change. It suppose to be defaulted to "Select subject"
        subjectId = ''; 
        subject = '';

        // Get the text of the selected item
        let LevelId_selected = $(this).val(); // Value of the selected item
        let LevelTxt = $(this).find("option:selected").text(); 
        categoryId = LevelId_selected;
        category = LevelTxt;

        // Clear the area option first, except the first one. 100 is a just a huge number
        var subject_drop = document.getElementById("subject_drop");
        for(i=1; i <= 100; i++){
          subject_drop.remove(1);
        } 

        if  (!(categoryId == "" || categoryId == null )){
          let subjectInfo = selectSubjectListBasedOnLevelId(LevelId_selected);// Get the subject info
          let options = subjectInfo[0];
          let optionIds = subjectInfo[1];

          for (let i = 0; i < options.length; i++) {
            let opt = options[i];
            let optId = optionIds[i];
            let el = document.createElement("option");
            el.textContent = opt;
            el.value = optId;
            // Check if a subject already created, disable
            if (allCourseSub.includes(optId))
              el.disabled = true;

            subject_drop.appendChild(el);
          }
        }
      });

      $('#subject_drop').on('change', function(){
        // Get the val and text of the selected item
        subjectId = $(this).val() 
        subject = $(this).find("option:selected").text(); 
      });


      // General Panel: Character limitations
      $('#inCourseName').on('input', function(){        
        document.getElementById("countCourseName").textContent = this.value.length + '/40'
      });

      $('#inCourseDesc').on('input', function(){        
        document.getElementById("countCourseDesc").textContent = this.value.length + '/400'
      });
      
      $('#inCourseFeeDesc').on('input', function(){        
        document.getElementById("countCourseFeeDesc").textContent = this.value.length + '/250'
      });


      // Populate Time Slot 
      $('#btnAddTimeSlot').on('click', function(e) {

        e.preventDefault();
        var x = document.getElementById("timeSlot-container").childElementCount;
        // alert(x)
        // <span class="" style="font-size: smaller; font-weight: 300; color: gray; margin-bottom: 0;">End Time</span> 

        let dayOfWeek_form_label = document.createElement('span');
        dayOfWeek_form_label.className = "";
        dayOfWeek_form_label.textContent = "Day of Week";
        dayOfWeek_form_label.setAttribute("style", "font-size: smaller; font-weight: 300; color: gray; margin-bottom: 0;");

        let blogsHtml_dayOfWeek = '';
        blogsHtml_dayOfWeek += "<option value=''>Select Day Of Week</option><option value='mon'>Monday</option><option value='tue'>Tuesday</option><option value='wed'>Wednesday</option><option value='thu'>Thursday</option><option value='fri'>Friday</option><option value='sat'>Saturday</option><option value='sun'>Sunday</option>";
        let dayOfWeek_form_input = document.createElement('select');
        dayOfWeek_form_input.innerHTML = blogsHtml_dayOfWeek;
        dayOfWeek_form_input.className = "form-control";
        dayOfWeek_form_input.setAttribute("data-compulsory", "true");
        dayOfWeek_form_input.setAttribute("oninput", "this.className = 'form-control'");
        dayOfWeek_form_input.setAttribute("id", "DayOfWeek" + (x+1));
        // let dayOfWeek_form_input = document.createElement('input');
        // dayOfWeek_form_input.type = "text";
        // dayOfWeek_form_input.className = "form-control";
        // dayOfWeek_form_input.setAttribute("id", "DayOfWeek" + (x+1));
        let dayOfWeek_form_div = document.createElement('div');
        dayOfWeek_form_div.className = "form-group bmd-form-group";
        dayOfWeek_form_div.appendChild(dayOfWeek_form_label)
        dayOfWeek_form_div.appendChild(dayOfWeek_form_input)
        let dayOfWeek_div = document.createElement('div');
        dayOfWeek_div.className = "col-md-5";
        dayOfWeek_div.appendChild(dayOfWeek_form_div)

        // Start Time
        let startTime_form_label = document.createElement('span');
        startTime_form_label.className = "";
        startTime_form_label.textContent = "Start Time";
        startTime_form_label.setAttribute("style", "font-size: smaller; font-weight: 300; color: gray; margin-bottom: 0;");

        let startTime_form_input = document.createElement('input');
        startTime_form_input.type = "text";
        startTime_form_input.className = "form-control";
        startTime_form_input.setAttribute("id", "StartTime" + (x+1));
        startTime_form_input.setAttribute("style", "trcursor: not-allowed; pointer-events: none;ue");
        startTime_form_input.setAttribute("value", "");
        startTime_form_input.setAttribute("data-compulsory", "true");
        startTime_form_input.setAttribute("oninput", "this.className = 'form-control'");

        let blogsHtml_startTimeIcon = '';
        blogsHtml_startTimeIcon += "<span class='material-icons'>more_time</span>";
        let startTime_span = document.createElement('span');
        startTime_span.innerHTML = blogsHtml_startTimeIcon;
        startTime_span.className = "d-flex align-items-center input-group-addon"

        let startTime_form_input_div = document.createElement('div');
        startTime_form_input_div.type = "text";
        startTime_form_input_div.className = "input-group clockpicker";
        startTime_form_input_div.setAttribute("data-placement", "bottom");
        startTime_form_input_div.setAttribute("data-align", "top");
        startTime_form_input_div.setAttribute("data-autoclose", "true");
        startTime_form_input_div.setAttribute("style", "margin-top: 0.3rem;");
        startTime_form_input_div.appendChild(startTime_form_input)
        startTime_form_input_div.appendChild(startTime_span)

        let startTime_form_div = document.createElement('div');
        startTime_form_div.className = "form-group bmd-form-group";
        startTime_form_div.appendChild(startTime_form_label)
        startTime_form_div.appendChild(startTime_form_input_div)
        let startTime_div = document.createElement('div');
        startTime_div.className = "col-md-3";
        startTime_div.appendChild(startTime_form_div)

        let endTime_form_label = document.createElement('span');
        endTime_form_label.className = "";
        endTime_form_label.textContent = "End Time";
        endTime_form_label.setAttribute("style", "font-size: smaller; font-weight: 300; color: gray; margin-bottom: 0;");

        // <div class="input-group clockpicker" data-placement="right" data-align="top" data-autoclose="true" style="margin-top: 0.3rem;">
        //   <input type="text" class="form-control" value="13:30" id="">
        // </div>

        let endTime_form_input = document.createElement('input');
        endTime_form_input.type = "text";
        endTime_form_input.className = "form-control";
        endTime_form_input.setAttribute("id", "EndTime" + (x+1));
        endTime_form_input.setAttribute("value", "");
        endTime_form_input.setAttribute("id", "StartTime" + (x+1));
        endTime_form_input.setAttribute("style", "trcursor: not-allowed; pointer-events: none;ue");
        endTime_form_input.setAttribute("value", "");
        endTime_form_input.setAttribute("data-compulsory", "true");
        endTime_form_input.setAttribute("oninput", "this.className = 'form-control'");

        let blogsHtml_endTimeIcon = '';
        blogsHtml_endTimeIcon += "<span class='material-icons'>more_time</span>";
        let endTime_span = document.createElement('span');
        endTime_span.innerHTML = blogsHtml_endTimeIcon;
        endTime_span.className = "d-flex align-items-center input-group-addon"

        let endTime_form_input_div = document.createElement('div');
        endTime_form_input_div.type = "text";
        endTime_form_input_div.className = "input-group clockpicker";
        endTime_form_input_div.setAttribute("data-placement", "bottom");
        endTime_form_input_div.setAttribute("data-align", "top");
        endTime_form_input_div.setAttribute("data-autoclose", "true");
        endTime_form_input_div.setAttribute("style", "margin-top: 0.3rem;");
        endTime_form_input_div.appendChild(endTime_form_input)
        endTime_form_input_div.appendChild(endTime_span)

        let endTime_form_div = document.createElement('div');
        endTime_form_div.className = "form-group bmd-form-group";
        endTime_form_div.appendChild(endTime_form_label)
        endTime_form_div.appendChild(endTime_form_input_div)
        let endTime_div = document.createElement('div');
        endTime_div.className = "col-md-3";
        endTime_div.appendChild(endTime_form_div)
        
        let blogsHtml_btn = '';
        blogsHtml_btn += "<i class='material-icons' style='color: red;'>remove</i>";
        let btnRemove_a = document.createElement('a');
        btnRemove_a.innerHTML = blogsHtml_btn;
        btnRemove_a.className = "btn btn-sm btn-outline-danger btn-round"
        btnRemove_a.setAttribute("id", "btnRemoveTimeSlot" + (x+1))
        btnRemove_a.setAttribute("onclick", "removeTimeSlot("+(x+1)+")")
        let btnRemove_div = document.createElement('div');
        btnRemove_div.className = "col-md-1  d-flex align-items-center";
        btnRemove_div.appendChild(btnRemove_a)

        let timeSlotTop_div = document.createElement('div');
        timeSlotTop_div.setAttribute("id", "timeSlot-"+(x+1));
        timeSlotTop_div.setAttribute("style", "padding: 0rem 3rem 0rem 0rem; border: solid #2e74b6; border-width: thin; margin-top: 1rem;");
        timeSlotTop_div.className = "row"
        timeSlotTop_div.appendChild(dayOfWeek_div)
        timeSlotTop_div.appendChild(startTime_div)
        timeSlotTop_div.appendChild(endTime_div)
        timeSlotTop_div.appendChild(btnRemove_div)

        const timeSlot_container = document.getElementById("timeSlot-container");
        timeSlot_container.appendChild(timeSlotTop_div);

        // Reinit the time picker 
        initTimePicker()
      });


      // Load All Admin's Classes
      $('#addClassModal').on('show.bs.modal', function (event) {
        latestClassDoc = '';
        allClassData = [];

        loadAllAdminClasses();

        document.getElementById("card-load").style.display = "";

        // Add click listener to load more
        classAdminLoadmore.addEventListener('click', classAdminLoadmoreHandleClick );
        classAdminLoadmore.style.visibility='hidden';
      });
      
      // Remove all Admin's Teachers when the List Teacher Modal close
      $('#addClassModal').on('hidden.bs.modal', function (event) {
        latestClassDoc = '';
        allClassData = [];

        var classList = document.getElementById("add-tutor-modal-container").querySelectorAll(".tutor-wrapper")
        classList.forEach((item) => {
          item.remove();
        })
      });

    });

  </script>
  
 
  <!-- Multiform-specific script -->
  <script>
    //DOM elements
    const DOMstrings = {
      stepsBtnClass: 'multisteps-form__progress-btn',
      stepsBtns: document.querySelectorAll(`.multisteps-form__progress-btn`),
      stepsBar: document.querySelector('.multisteps-form__progress'),
      stepsForm: document.querySelector('.multisteps-form__form'),
      stepsFormTextareas: document.querySelectorAll('.multisteps-form__textarea'),
      stepFormPanelClass: 'multisteps-form__panel',
      stepFormPanels: document.querySelectorAll('.multisteps-form__panel'),
      stepPrevBtnClass: 'js-btn-prev',
      stepNextBtnClass: 'js-btn-next',
      stepSendBtnClass: 'js-btn-send' };


    //remove class from a set of items
    const removeClasses = (elemSet, className) => {

      elemSet.forEach(elem => {

        elem.classList.remove(className);

      });

    };

    //return exect parent node of the element
    const findParent = (elem, parentClass) => {

      let currentNode = elem;

      while (!currentNode.classList.contains(parentClass)) {
        currentNode = currentNode.parentNode;
      }

      return currentNode;

    };

    //get active button step number
    const getActiveStep = elem => {
      return Array.from(DOMstrings.stepsBtns).indexOf(elem);
    };

    //set all steps before clicked (and clicked too) to active
    const setActiveStep = activeStepNum => {

      //remove active state from all the state
      removeClasses(DOMstrings.stepsBtns, 'js-active');

      //set picked items to active
      DOMstrings.stepsBtns.forEach((elem, index) => {

        if (index <= activeStepNum) {
          elem.classList.add('js-active');
        }

      });
    };

    //get active panel
    const getActivePanel = () => {

      let activePanel;

      DOMstrings.stepFormPanels.forEach(elem => {

        if (elem.classList.contains('js-active')) {

          activePanel = elem;

        }

      });

      return activePanel;

    };

    //open active panel (and close unactive panels)
    const setActivePanel = activePanelNum => {

      //remove active class from all the panels
      removeClasses(DOMstrings.stepFormPanels, 'js-active');

      //show active panel
      DOMstrings.stepFormPanels.forEach((elem, index) => {
        if (index === activePanelNum) {

          elem.classList.add('js-active');

          setFormHeight(elem);

        }
      });

    };

    //set form height equal to current panel height
    const formHeight = activePanel => {

      const activePanelHeight = activePanel.offsetHeight;

      DOMstrings.stepsForm.style.height = `${activePanelHeight}px`;

    };

    const setFormHeight = () => {
      const activePanel = getActivePanel();

      formHeight(activePanel);
    };

    //STEPS BAR CLICK FUNCTION
    DOMstrings.stepsBar.addEventListener('click', e => {

      //check if click target is a step button
      const eventTarget = e.target;

      if (!eventTarget.classList.contains(`${DOMstrings.stepsBtnClass}`)) {
        return;
      }


      //get active button step number
      const activeStep = getActiveStep(eventTarget);

      // TODO: Disable both line below to disable panel click
      // //set all steps before clicked (and clicked too) to active
      // setActiveStep(activeStep);

      // //open active panel
      // setActivePanel(activeStep);
    });

    //PREV/NEXT BTNS CLICK
    DOMstrings.stepsForm.addEventListener('click', e => {
       
      const eventTarget = e.target;

      //check if we clicked on `PREV` or NEXT` buttons
      if (eventTarget.classList.contains(`${DOMstrings.stepSendBtnClass}`))
      {
        // Create Class btn is clicked and redirect to class.html

        document.getElementById("btnCreateCourse").setAttribute("disabled", true);
        document.getElementById("btnCreateCourse").textContent = "Creating. Please wait...";

        CreateCourse();
        
        return;

        // func.showNotification('top','center', 'success', 'check_circle', "Class created.");

      }
      else if (eventTarget.classList.contains(`${DOMstrings.stepPrevBtnClass}`) || eventTarget.classList.contains(`${DOMstrings.stepNextBtnClass}`))
      {
        // Proceed to move to next / prev page
      }else{
        // Do nothing and return 
        return;
        
      }

      //find active panel
      const activePanel = findParent(eventTarget, `${DOMstrings.stepFormPanelClass}`);

      let activePanelNum = Array.from(DOMstrings.stepFormPanels).indexOf(activePanel);
      getAllTimeSlots()
      //set active step and active panel onclick
      if (eventTarget.classList.contains(`${DOMstrings.stepPrevBtnClass}`)) {
        activePanelNum--;

        setActiveStep(activePanelNum);
        setActivePanel(activePanelNum);
      } else {

        if (!validateForm(activePanelNum)){
          
        }else{
          activePanelNum++;
          setActiveStep(activePanelNum);
          setActivePanel(activePanelNum);
        }
      }
      // setActiveStep(activePanelNum);
      // setActivePanel(activePanelNum);
    });

    //SETTING PROPER FORM HEIGHT ONLOAD
    window.addEventListener('load', setFormHeight, false);

    //SETTING PROPER FORM HEIGHT ONRESIZE
    window.addEventListener('resize', setFormHeight, false);

    //changing animation via animation select !!!YOU DON'T NEED THIS CODE (if you want to change animation type, just change form panels data-attr)

    const setAnimationType = newType => {
      DOMstrings.stepFormPanels.forEach(elem => {
        elem.dataset.animation = newType;
      });
    };

    //selector onchange - changing animation
    // const animationSelect = document.querySelector('.pick-animation__select');

    // animationSelect.addEventListener('change', () => {
    //   const newAnimationType = animationSelect.value;

    //   setAnimationType(newAnimationType);
    // });

    function validateForm(activePanelNum) {
      // This function deals with validation of the form fields with data-compulsory = 'true'
      var x, y, i, valid = true;
      x = document.getElementsByClassName("multisteps-form__panel");
      // y = x[activePanelNum].getElementsByTagName("input") && x[activePanelNum].querySelectorAll('[type="text"]');
      y =x[activePanelNum].querySelectorAll('[data-compulsory="true"]');

      // A loop that checks every input field in the current tab:
      for (i = 0; i < y.length; i++) {
        // console.log(y[i].value)
        // If a field is empty...
        if (y[i].value == "") {
          // add an "invalid" class to the field:
          y[i].className += " invalid";
          y[i].removeAttribute('style');
          // and set the current valid status to false:
          valid = false;
        }
      }
      // If the valid status is true, mark the step as finished and valid:
      if (valid) {
        // document.getElementsByClassName("step")[activePanelNum].className += " finish";
      }
      return valid; // return the valid status
    }

    function getAllTimeSlots() {
      dayOfWeekArr = [];
      startTimeArr = [];
      endTimeArr = [];
      // This function deals with validation of the form fields with data-compulsory = 'true'
      var x, y, i, valid = true;
      x = document.getElementById("timeSlotTop");
      // console.log(x)
      // y = x[activePanelNum].getElementsByTagName("input") && x[activePanelNum].querySelectorAll('[type="text"]');
      y =x.querySelectorAll('[data-compulsory="true"]');

      // A loop that checks every input field in the current tab:
      for (i = 0; i < y.length; i++) {

        if (i % 3 === 0){
          dayOfWeekArr.push(y[i].value)
        }
        if (i % 3 === 1){
          startTimeArr.push(y[i].value)
        }
        if (i % 3 === 2){
          endTimeArr.push(y[i].value)
        }
   
        // If a field is empty...
        if (y[i].value == "") {
          // add an "invalid" class to the field:
          // y[i].className += " invalid";
          // and set the current valid status to false:
          valid = false;
        }
      }

      // console.log(dayOfWeekArr)
      // console.log(startTimeArr)
      // console.log(endTimeArr)
      return valid; // return the valid status
    }


  </script>

  <!-- ClockPicker script 1 -->
  <script type="text/javascript" src="../../assets/js/bootstrap-clockpicker.min.js"></script>
  <!-- ClockPicker script 2 -->
  <script type="text/javascript">
    $('.clockpicker').clockpicker()
      .find('input').change(function(){
        // TODO: time changed
        // console.log(this.value);
      });
    // $('#demo-input').clockpicker({
    //   autoclose: true
    // });

    // if (something) {
    //   // Manual operations (after clockpicker is initialized).
    //   $('#demo-input').clockpicker('show') // Or hide, remove ...
    //       .clockpicker('toggleView', 'minutes');
    // }

    function initTimePicker(){
      $('.clockpicker').clockpicker()
      .find('input').change(function(){
        // TODO: time changed
        // console.log(this.value);
      });

    }
  </script>

</body>

</html>