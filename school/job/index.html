<!doctype html>
<html lang="en">

<head>
  <!-- Meta -->
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <title>GoLearn School</title>
  <meta name=description content="GoLearn School&trade; is Malaysia #1 teaching platform to run your tuition business and manage your lessons. Start now for Free!">
  <meta property=og:title content="GoLearn School">
  <meta property=og:site_name content="GoLearn School">
  <meta property=og:type content=website>
  <meta property=og:url content=https://app.golearn.com.my/school/job >
  <meta property=og:image content=https://app.golearn.com.my/assets/img/icon-apple-touch-180x180.png>
  <meta property=og:description content="GoLearn School&trade; is Malaysia #1 teaching platform to run your tuition business and manage your lessons. Start now for Free!">
  <link rel=apple-touch-icon sizes=180x180 href=https://app.golearn.com.my/assets/img/icon-apple-touch-180x180.png>
  <link rel=icon type=image/png sizes=32x32 href=https://app.golearn.com.my/assets/img/icon-32x32.png>
  <link rel=icon type=image/png sizes=16x16 href=https://app.golearn.com.my/assets/img/icon-16x16.png>
  <!-- Fonts and icons -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" rel="stylesheet" type="text/css" />
  <script src="https://kit.fontawesome.com/2bdd669e92.js" crossorigin="anonymous"></script>
  <!-- Material Kit CSS -->
  <link href="../../assets/css/material-dashboard.css?v=2.1.2" rel="stylesheet" />
  <!-- Firebase Init -->
  <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-storage.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-firestore.js"></script>
  <script src="../../assets/js/firebase.js"></script>
  <!-- Tutor Portal specific CSS -->
  <link href="../../assets/css/tutor-portal.css" rel="stylesheet" />
  <!-- Card-course -->
  <style>
    /* Course Specific */
    .card-course {
      margin-top: 1rem;
      border-radius: 4px;
      background: #fff;
      box-shadow: 0 6px 10px rgba(0, 0, 0, 0.08), 0 0 6px rgba(0, 0, 0, 0.05);
      transition: 0.3s transform cubic-bezier(0.155, 1.105, 0.295, 1.12),
        0.3s box-shadow,
        0.3s -webkit-transform cubic-bezier(0.155, 1.105, 0.295, 1.12);
      padding: 14px 50px 14px 24px;
      cursor: pointer;
    }
    .card-course:hover {
      transform: scale(1.02);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.12), 0 4px 8px rgba(0, 0, 0, 0.06);
    }
    .card-course-online-label {
      font-size: x-small;
      font-weight: 400;
      margin-left: 0.5em;
      color: white;
      background-color: rgb(253, 114, 0);
      border-radius: 10px;
      padding-left: 0.5rem;
      padding-right: 0.5rem;
      padding-top: 0.3rem;
      padding-bottom: 0.3rem;
      box-shadow: 2px 2px 4px rgb(46, 46, 46);
      vertical-align: middle;

    }
    .card-course-item-wrapper {
      display: flex;

    }
    .card-course-item {
      vertical-align: middle;
      font-weight: 500;
      color: #6d6d6d;
      margin-bottom: 6px;
    }
    .card-course h3 {
      font-weight: 300;
      font-size: 20px;

    }

    .card-course h4 {
      font-weight: 300;
    }
    .card-cambridge {
      background-image: url("../../assets/img/card-course-cambridge.png");
      background-repeat: no-repeat;
      background-position: right;
      background-size: 80px;
    }

    .card-kpm {
      background-image: url("../../assets/img/card-course-kpm.png");
      background-repeat: no-repeat;
      background-position: right;
      background-size: 80px;
    }

    .card-uec {
      background-image: url("../../assets/img/card-course-uec.png");
      background-repeat: no-repeat;
      background-position: right;
      background-size: 80px;
    }

    .card-pearson {
      background-image: url("../../assets/img/card-course-pearson.png");
      background-repeat: no-repeat;
      background-position: right;
      background-size: 80px;
    }

    .card-ib {
      background-image: url("../../assets/img/card-course-ib.png");
      background-repeat: no-repeat;
      background-position: right;
      background-size: 80px;
    }
    .card-language-and-english-exam {
      background-image: url("../../assets/img/card-course-language-and-english.png");
      background-repeat: no-repeat;
      background-position: right;
      background-size: 80px;
    }

    .card-music {
      background-image: url("../../assets/img/card-course-music.png");
      background-repeat: no-repeat;
      background-position: right;
      background-size: 80px;
    }

    .card-computer-programming {
      background-image: url("../../assets/img/card-course-programming.png");
      background-repeat: no-repeat;
      background-position: right;
      background-size: 80px;
    }
    .request-label{
      position: relative;
      font-size: 9px;
      font-weight: 400;
      min-width: 20px;
      padding: 0px 10px;
      height: 20px;
      border-radius: 10px;
      text-align: center;
      line-height: 19px;
      vertical-align: middle;
      float: right;
    }
  
  </style>

  <style>
    .br {
      border-radius: 8px;  
    }
    .w30 {
      width: 30%;
    }
    .w50 {
      width: 50%;
    }
    .w80 {
      width: 80%;
    }
    .card {
      border: 2px solid #fff;
      /* box-shadow:0px 0px 10px 0 #a9a9a9; */
      padding: 12px 20px;
      /* width: 80%; */
      /* margin: 50px auto; */
      margin-top: 0.2rem;
    }
    .card-shimmer-wrapper {
      width: 0px;
      animation: fullView 0.5s forwards cubic-bezier(0.250, 0.460, 0.450, 0.940);
    }
    .profilePic {
      height: 60px;
      width: 60px;
      border-radius: 50%;
    }
    .comment {
      height: 10px;
      background: #777;
      margin-top: 15px;
    }

    @keyframes fullView {
      100% {
        width: 100%;
      }
    }

    .animate {
      animation : shimmer 2s infinite linear;
      background: linear-gradient(to right, #eff1f3 4%, #e2e2e2 25%, #eff1f3 36%);
        background-size: 1000px 100%;
    }

    @keyframes shimmer {
      0% {
        background-position: -1000px 0;
      }
      100% {
        background-position: 1000px 0;
      }
    }
  </style>
</head>

<body>

  <div class="wrapper ">
    <div class="sidebar" data-color="purple" data-background-color="white" data-image="../../assets/img/sidebar-3.jpg">
      <div class="logo">
        <a href="../" class="simple-text logo-mini" style="padding: 0.5rem">
			    <img src="../../assets/img/golearn-school-logo.svg" style="width: 200px; height: auto;" alt=""></img>
        </a>
      </div>
      <div class="sidebar-wrapper">
        <ul class="nav" style="margin-bottom: 50px;">
          <li class="nav-item">
            <a class="nav-link" href="../">
              <i class="far fa-chart-bar fa-fw nav-icon"></i>
              <p>Dashboard</p>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../report/">
              <i class="far fa-lightbulb fa-fw nav-icon"></i>
              <p>Insight</p>
            </a>
          </li>
          <li class="nav-item">
            <h4 class="nav-link" style="margin-left: 1rem;">Teaching</h4>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../class/">
              <i class="fas fa-chalkboard fa-fw nav-icon"></i>
              <p>Classes</p>
            </a>
          </li>
		  		<li class="nav-item">
            <a class="nav-link" href="../student/">
              <i class="fas fa-user-graduate fa-fw nav-icon"></i>
              <p>Students</p>
            </a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" href="../teacher/">
              <i class="fas fa-chalkboard-teacher fa-fw nav-icon"></i>
              <p>Teachers</p>
            </a>
          </li>
          <li class="nav-item">
            <h4 class="nav-link" style="margin-left: 1rem;">Financial</h4>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../invoice/">
              <i class="fas fa-file-invoice-dollar fa-fw nav-icon"></i>
              <p>Invoices</p>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../salary/">
              <i class="fas fa-money-bill-wave fa-fw nav-icon"></i>
              <p>Salaries</p>
            </a>
          </li>
          <li class="nav-item" id="navPayroll" style="display: none;">
            <a class="nav-link" href="../payroll/">
              <i class="fas fa-hand-holding-usd fa-fw nav-icon"></i>
              <p>Payroll <span style="visibility: hidden;">PRO</span></p>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../transaction/">
              <i class="fas fa-exchange-alt fa-fw nav-icon"></i>
              <p>Transactions</p>
            </a>
          </li>
          <li class="nav-item">
            <h4 class="nav-link" style="margin-left: 1rem;">Public</h4>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../course/">
              <i class="fas fa-book-open fa-fw nav-icon"></i>
              <p>My Public Courses 
                <span style="background-color: #2e74b6;padding: 0.2em 0.5em 0.2em 0.5em;color: white;border-radius: 3px;font-size: x-small;">New</span>
              </p>
            </a>
          </li>
		  		<li class="nav-item active">
            <a class="nav-link" href="./">
              <i class="fas fa-briefcase fa-fw nav-icon"></i>
              <p>Tuition Jobs</p>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../settings/">
              <i class="fas fa-user-cog fa-fw nav-icon"></i>
              <p>Update Information</p>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="main-panel">
      <!-- Navbar -->
      <nav class="navbar navbar-expand-lg navbar-transparent navbar-absolute fixed-top ">
        <div class="container-fluid">
          <div class="navbar-wrapper">
            <a class="navbar-brand" href="javascript:;">Tuition Jobs</a>
          </div>
          <button class="navbar-toggler" type="button" data-toggle="collapse" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
            <span class="sr-only">Toggle navigation</span>
            <span class="navbar-toggler-icon icon-bar"></span>
            <span class="navbar-toggler-icon icon-bar"></span>
            <span class="navbar-toggler-icon icon-bar"></span>
          </button>
          <div class="collapse navbar-collapse justify-content-end">
            <form class="navbar-form">
              <!-- Put empty placeholder here -->
            </form>

            <ul class="navbar-nav">
              <li class="nav-item" id="activationNavItem">
                <a href="#" class="btn btn-primary btn-round btn-sm" style="visibility: hidden;" id="btnActivateAccount"></a>
              </li>
              <li class="nav-item">
                <a class="navbar-brand" href="javascript:;">
                   Hi <span id="user"></span> !
                </a> 
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link" href="javascript:;" id="navbarDropdownNotification" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <i class="material-icons">notifications</i> Notifications
                </a>
                <!-- <a class="nav-link" href="http://example.com" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <i class="material-icons">notifications</i>
                  <span class="notification">5</span>
                  <p class="d-lg-none d-md-block">
                    Some Actions
                  </p>
                </a> -->
								<div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
									<p style="padding: 1em;" >No notification</p>
                  <!-- <a class="dropdown-item" href="#">Mike John responded to your email</a>
                  <a class="dropdown-item" href="#">You have 5 new tasks</a>
                  <a class="dropdown-item" href="#">You're now friend with Andrew</a>
                  <a class="dropdown-item" href="#">Another Notification</a>
                  <a class="dropdown-item" href="#">Another One</a> -->
                </div>
              </li>
              <!-- your navbar here -->
			  
			  			<li class="nav-item dropdown">
                <a class="nav-link" href="javascript:;" id="navbarDropdownProfile" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <i class="material-icons">person</i>
                  <p class="d-lg-none d-md-block">
                    Account
                  </p>
                </a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownProfile">
                  <a class="dropdown-item" href="../edit-profile.html">Edit Profile</a>
                  <a id="navPublicProfile" class="dropdown-item" href="#">My Public Profile</a>
									<a class="display:block; dropdown-item" href="../about.html">About</a>
									<div class="dropdown-divider"></div>
                  <a class="dropdown-item" href="javascript:;" data-toggle="modal" data-target="#signOutModal" onclick="signOutFunction()" id="btn-logout">Log out</a>
									<div class="dropdown-divider"></div>
									<a style="font-weight: 500 ;padding: 0.5em ;text-align: center; width: 200px; background-color: #428dd4 ;display: block; color: #fff;" href="https://golearn.com.my/pricing/" target="_blank" id="btnUpgradeToPro">Upgrade to Pro</a>

                </div>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <!-- End Navbar -->

			<!-- Modal Start -->
      <!-- Apply Job modal -->
      <div class="row">
        <div class="modal fade" id="applyModal" tabindex="-1" role="dialog" aria-labelledby="applyModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title">Apply This Job? </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <div class="row">
                  <div class="col-md-12" id="comPolText">
                    <p>Here's how you will be paid when you get matched:</p>
                    <p>1. Parents will pay you the full amount with <strong style="color: #2e74b6 ;">RM 600 (RM50/hr x 1.5 hours/lesson x 2 classes/week x 4 weeks in a month)</strong> at the end of a month or in any form agreed by both of you.</p>
                    <p> 2. We will collect <strong style="color: #2e74b6 ;">50% of the first month's fee or RM 300</strong> as a deposit from you. Once you've done that, we will share the parent's contact for you to make the necessary arrangements to conduct the lesson.</p> 
                    <p>3. We <strong style="color: #2e74b6 ;">GUARANTEE a full refund</strong> of your deposit if your lesson is terminated within 2 weeks starting from the first class. Else, the deposit will turn to the commission.</p>
                    <p>Are you ready to go with this?👨🏻‍🏫</p>
                  </div>
                </div>
   
                <div class="row">
                  <div class="col-md-12">
                    <p> Please type <strong id="applyEnableText">OK</strong> to apply!</p>
                    <input type="text" class="form-control" id="applyModalConfirmText">
                  </div>
                </div>

                <div class="row" style="margin-top: 1rem;">
                  <div class="col-md-12">
                    <p>Recommend to others? Share this job🔊</p>
                    <div class="input-group">
                      <span class="d-flex align-items-center input-group-addon" style="margin-right: 0.5em; cursor: pointer;" onclick="copyText('inJobLink')">
                        <span class="material-icons">
                          content_copy
                        </span>
                      </span>
                      <textarea type="text" class="form-control" style="background-color: #f5f5f5;" id="inJobLink" row="auto" readonly></textarea>
                    </div>

                  </div>
                </div>

              </div>
              <div class="modal-footer">

                <button type="button" class="btn btn-primary" id="btnApplyModalConfirm" disabled>Apply</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Job Closed Notification modal -->
      <div class="row">
        <div class="modal fade" id="jobClosedModal" tabindex="-1" role="dialog" aria-labelledby="jobClosedModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title">Ops. This job is no longer available!</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <p>Please try applying for jobs with <span class="request-label" style="color: #21896c; background: #c1e1d2; float: initial; padding: 5px 10px;">New <i class="fas fa-circle"></i></span> status</p>
                
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary"  data-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>
      </div>


      <!-- Sign-out modal -->
      <div class="row">
        <div class="modal fade" id="signOutModal" tabindex="-1" role="dialog" aria-labelledby="signOutModalLabel" aria-hidden="true">
          <div class="modal-dialog  modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="signOutLabel">Logging Out</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body" id="signOutModalBody">
                Are you sure you want to continue?
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" id="btnSignOutModalUpdate">Confirm</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="container-fluid">
          <!-- All Job Requests -->

          <div class="row">
            <div class="col-md-12 text-right">
              <a class="d-flex justify-content-end" href="https://golearn.com.my/job/" target="_blank" id="btnUpdate" style="margin-top: 1rem;" >View Older Jobs</a>
            </div>
          </div>

          
          <div class="row" id="card-all-job-requests">
            <!-- <div class="col-md-3">
              <div class="card-course card-kpm" data-toggle="modal" data-target="#applyModal" data-id="axoquhdoadozncuhoaijsidao">
                <span class="request-label" style="color: #21896c; background: #c1e1d2;">New <i class="fas fa-circle"></i></span>
                <h6 style="position: relative; margin: 0;"><span>PV01008</span> &middot; <span>12/05/2020</span></h6>
                <h3 style="margin-top: 8px;">SPM Bahasa Malaysia, SPM Mathematics <span class="card-course-online-label">ONLINE</span> </h3>
                <p style="font-size: 0.9rem; margin-bottom: 6px; font-style: italic;">Bandar Tun Razak, Kuala Lumpur</p>
                <p class="card-course-item" >
                  <i class="material-icons" style="color: #969696; margin-right: 8px; vertical-align: middle;" >paid</i> 
                  <span style="vertical-align: middle;"> RM 20/hour</span>
                </p>
                <p class="card-course-item" >
                  <i class="material-icons" style="color: #969696; margin-right: 8px; vertical-align: middle;" >schedule</i>
                  <span style="vertical-align: middle;"> 2 hours / class</span> 
                </p>
                <p class="card-course-item" >
                  <i class="material-icons" style="color: #969696; margin-right: 8px; vertical-align: middle;" >date_range</i>
                  <span style="vertical-align: middle;"> 1 class / week</span>
                </p>
                <p class="card-course-item" >
                  <i class="material-icons" style="color: #969696; margin-right: 8px; vertical-align: middle;" >description</i>
                  <span style="vertical-align: middle;">Description</span> 
                </p>
                <p style="font-size: 0.9rem; ">Tutoring Type: Home Tuition, Parents want exam focused tuition with pearson text book</p>
                <p style="color: #21896c; font-weight: bold; margin: 0;">Applied</p>
              </div>
            </div> -->
          
          </div>

          <!-- Load more -->
          <div class="row">
            <div class="col-md-12" style="margin-top: 1rem;">
              <a href="javascript:;" class="btn btn-outline-primary btn-round" id="loadmore">Load More <i class="material-icons" style="color: #2e74b6; margin-left: 0.5em; padding-bottom: 0.2em;">expand_more</i></a>
            </div>
          </div>

		  	</div>
      </div>

      <footer class="footer">
        <div class="container-fluid">
          <nav class="float-left">
          <ul>
            <!-- <li>
            <a href="https://golearn.com.my/join-us" target="_blank">
              Visit GoLearn Tutor
            </a>
            </li> -->
          </ul>
          </nav>
          <!-- <div class="copyright float-right">
            &copy;
            <script>
              document.write(new Date().getFullYear())
            </script> 
            , made with <i class="material-icons">favorite</i> by <a href="#" >GoLearn Team</a>
          </div> -->
          <!-- your footer here -->
        </div>
      </footer>
    </div>
	  
  </div>


  <script src="../../assets/js/core/jquery.min.js"></script>
  <script src="../../assets/js/core/popper.min.js"></script>
  <script src="../../assets/js/core/bootstrap-material-design.min.js"></script>
  <script src="../../assets/js/plugins/perfect-scrollbar.jquery.min.js"></script>
  <!-- Plugin for the momentJs  -->
  <script src="../../assets/js/plugins/moment.min.js"></script>
  <!--  Plugin for Sweet Alert -->
  <script src="../../assets/js/plugins/sweetalert2.js"></script>
  <!-- Forms Validations Plugin -->
  <script src="../../assets/js/plugins/jquery.validate.min.js"></script>
  <!--  Notifications Plugin    -->
  <script src="../../assets/js/plugins/bootstrap-notify.js"></script>
  <!-- Control Center for Material Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="../../assets/js/material-dashboard.js?v=2.1.2" type="text/javascript"></script>
    <!-- Common constants -->
  <script src="../../assets/js/common.js" type="text/javascript"></script>
  <!-- General Info -->
  <script src="../../assets/js/const.js" type="text/javascript"></script>
  <!-- Global Var -->
  <script src="../../assets/js/globalvar.js" type="text/javascript"></script>
  <!-- Core Tutor Js -->
  <script src="../../assets/js/tutor-core.js" type="text/javascript"></script>
	
  <script>
 
    // Store last document - Used for Load More btn
    var latestDoc = null;

    var docsObj = [];
    // Initialization
    AuthCheck();

    // Page Specific Initialization
    function loadPageInitFunc(){

      updateInfoInAllActiveJob()
    }

    function updateInfoInAllActiveJob(){

      // Suppose to put a future date, i.e 2099, but it's work to just put current date.
      var today = new Date();

      var colRef = db.collection("Jobs")
        .doc("v1")
        .collection("job")
        .where(JOB_STATUS, "==" , true)
        .orderBy(JOB_DATE_CREATE, 'desc')
        .startAfter(latestDoc || today)
        .limit(12);
      
      colRef
      .get()
      .then((querySnapshot) => {
   

        querySnapshot.forEach((doc) => {
          console.log(doc.data())

          docsObj.push(doc.data());
          
          renderAllActiveJobs(doc);
        });

        // Update latest doc.
        latestDoc = querySnapshot.docs[querySnapshot.docs.length - 1];
        
        if (querySnapshot.empty){
          loadmore.removeEventListener('click', handleClick );
        }

        if (querySnapshot.docs.length < 12){
          loadmore.style.visibility='hidden';
        }else{
          loadmore.style.visibility='visible';
        }
      })
      .catch((error) => {
        console.log("Error getting documents: ", error);
      });
      
    }

    // Load More Button
    const loadmore = document.querySelector('#loadmore');
    loadmore.style.visibility='hidden';

    const handleClick = () =>{
        // alert('Load more');
        updateInfoInAllActiveJob();
    }

    loadmore.addEventListener('click', handleClick );

    function renderAllActiveJobs(doc){
      // <div class="col-md-3">
      //   <div class="card-course card-kpm" data-toggle="modal" data-target="#applyModal" data-id="axoquhdoadozncuhoaijsidao">
      //     <span class="request-label" style="color: #21896c; background: #c1e1d2;">New <i class="fas fa-circle"></i></span>
      //     <h6 style="position: relative; margin: 0;"><span>PV01008</span> &middot; <span>12/05/2020</span></h6>
      //     <h3 style="margin-top: 8px;">SPM Bahasa Malaysia, SPM Mathematics <span class="card-course-online-label">ONLINE</span> </h3>
      //     <p style="font-size: 0.9rem; margin-bottom: 6px; font-style: italic;">Bandar Tun Razak, Kuala Lumpur</p>
      //     <p class="card-course-item" >
      //       <i class="material-icons" style="color: #969696; margin-right: 8px; vertical-align: middle;" >paid</i> 
      //       <span style="vertical-align: middle;"> RM 20/hour</span>
      //     </p>
      //     <p class="card-course-item" >
      //       <i class="material-icons" style="color: #969696; margin-right: 8px; vertical-align: middle;" >schedule</i>
      //       <span> 2 hours / class</span> 
      //     </p>
      //     <p class="card-course-item" >
      //       <i class="material-icons" style="color: #969696; margin-right: 8px; vertical-align: middle;" >date_range</i>
      //       <span> 1 class / week</span>
      //     </p>
      //     <p class="card-course-item" >
      //       <i class="material-icons" style="color: #969696; margin-right: 8px; vertical-align: middle;" >description</i>
      //       <span>Description</span> 
      //     </p>
      //     <p style="font-size: 0.9rem; ">Tutoring Type: Home Tuition, Parents want exam focused tuition with pearson text book</p>
      //     <p style="color: #21896c; font-weight: bold; margin: 0;">Applied</p>
      //   </div>
      // </div>

      // Status 
      let status_span = document.createElement('span');
      status_span.className = "request-label";
      let closeList = [REQ_ADMIN_REQ_STATUS_JOB_NO_RESPONSE, REQ_ADMIN_REQ_STATUS_JOB_REJECT, REQ_ADMIN_REQ_STATUS_JOB_STOP_AFTER_TRIAL,  
        REQ_ADMIN_REQ_STATUS_JOB_NO_TUTOR, REQ_ADMIN_REQ_STATUS_JOB_TIME, REQ_ADMIN_REQ_STATUS_SUCCESS]
      if( doc.data()[JOB_JOB_STATUS] == REQ_ADMIN_REQ_STATUS_JOB_IN_PROGRESS ){
        status_span.setAttribute('style', "color: #21896c; background: #c1e1d2;");
        status_span.innerHTML = `New <i class="fas fa-circle"></i>`;
      }
      else if( doc.data()[JOB_JOB_STATUS] == REQ_ADMIN_REQ_STATUS_JOB_SENT){
        status_span.setAttribute('style', "color: #ff5f00; background: #fed8c1;");
        status_span.innerHTML = `Last Call <i class="fas fa-circle"></i>`;
      }
      else if( closeList.includes(doc.data()[JOB_JOB_STATUS])){
        status_span.setAttribute('style', "color: red; background: #ffcccb;");
        status_span.innerHTML = `Closed <i class="fas fa-circle"></i>`;
      }
      else {
        status_span.setAttribute('style', "color: #21896c; background: #c1e1d2;");
        status_span.innerHTML = `New <i class="fas fa-circle"></i>`;
      }
      
      // Details
      let detail_h6 = document.createElement('h6');
      detail_h6.setAttribute('style',"position: relative; margin: 0;");
      let detail_html = doc.data()[JOB_REF_NO] + '&middot;' + doc.data()[JOB_DATE_CREATE].toDate().toLocaleDateString("en-gb");
      detail_h6.innerHTML =  detail_html;

      // Title
      let title_h3 = document.createElement('h3');
      title_h3.setAttribute('style',"margin-top: 8px;");
      let subjectL_html = "";
      doc.data()[JOB_CAT_ARR].forEach((cat, index) => {
        let category = Category[CategoryId.indexOf(cat)];
        let subject = getSubjectBasedOnCategoryIdAndSubjectId(cat, doc.data()[JOB_SUB_ARR][index])
        subjectL_html += category + '-' +subject;
        
        if (index < doc.data()[JOB_CAT_ARR].length - 1){
          subjectL_html += ", ";
        }
      });
      subjectL_html += (doc.data()[JOB_ONLINE]) ? `<span class="card-course-online-label">ONLINE</span>` : "";
      title_h3.innerHTML =  subjectL_html;

      // Area
      let area = getCityNameBasedOnCityIdAndStateId2(doc.data()[JOB_STATE], doc.data()[JOB_AREA]);
      area  = (area == null) ? "" : area;
      let state = MYAllState[MYAllStateId.indexOf(doc.data()[JOB_STATE])];
      state  = (state == null) ? "" : state;
      console.log(area, state)
      let area_p = document.createElement('p');
      area_p.setAttribute('style',"font-size: 0.9rem; margin-bottom: 6px; font-style: italic;");
      area_p.textContent = (doc.data()[JOB_ONLINE]) ? "" :  area + ", " + state ;
      
      // fee
      let blogsHtml_fee = '';
      if (doc.data()[JOB_FEE_TYPE] == "Per Hour"){
        blogsHtml_fee += "<i class='material-icons' style='color: #969696; margin-right: 8px; vertical-align: middle' >paid</i><span style='vertical-align: middle'> RM"+doc.data()[JOB_FEE]+" / hour</span>";
      }else{
        blogsHtml_fee += "<i class='material-icons' style='color: #969696; margin-right: 8px; vertical-align: middle' >paid</i><span style='vertical-align: middle'> RM"+ doc.data()[JOB_FEE] +" / month</span>";
      }
      let fee_p = document.createElement('p');
      fee_p.className = "card-course-item";
      fee_p.innerHTML = blogsHtml_fee;

      // duration
      let blogsHtml_duration = '';
      if (parseFloat(doc.data()[JOB_DURATION]) > 1)
        blogsHtml_duration += "<i class='material-icons' style='color: #969696; margin-right: 8px; vertical-align: middle' >schedule</i><span style='vertical-align: middle'>"+doc.data()[JOB_DURATION]+" hours / week</span>";
      else
        blogsHtml_duration += "<i class='material-icons' style='color: #969696; margin-right: 8px; vertical-align: middle' >schedule</i><span style='vertical-align: middle'>"+doc.data()[JOB_DURATION]+" hour / week</span>";
      let duration_p = document.createElement('p');
      duration_p.className = "card-course-item";
      duration_p.innerHTML = blogsHtml_duration;

      // Class / week
      let blogsHtml_classPerWeek = '';
      if (parseInt(doc.data()[JOB_LESS_PER_WEEK]) > 1)
        blogsHtml_classPerWeek += "<i class='material-icons' style='color: #969696; margin-right: 8px; vertical-align: middle' >date_range</i><span style='vertical-align: middle'>"+doc.data()[JOB_LESS_PER_WEEK]+" classes / week</span>";
      else
        blogsHtml_classPerWeek += "<i class='material-icons' style='color: #969696; margin-right: 8px; vertical-align: middle' >date_range</i><span style='vertical-align: middle'>"+doc.data()[JOB_LESS_PER_WEEK]+" class / week</span>";
      let classPerWeek_p = document.createElement('p');
      classPerWeek_p.className = "card-course-item";
      classPerWeek_p.innerHTML = blogsHtml_classPerWeek;

      // Description
      let blogsHtml_description = '';
      blogsHtml_description += "<i class='material-icons' style='color: #969696; margin-right: 8px; vertical-align: middle;' >description</i> <span style='vertical-align: middle'>Description</span>";
      let description_p = document.createElement('p');
      description_p.className = "card-course-item";
      description_p.innerHTML = blogsHtml_description;

      let description_content_p = document.createElement('p');
      description_content_p.setAttribute('style',"font-size: 0.9rem;");
      if (doc.data()[JOB_DETAIL] == null || doc.data()[JOB_DETAIL] == ""){
        description_content_p.textContent = "No description.";

      }else{
        description_content_p.textContent = doc.data()[JOB_DETAIL];
      }

      // Aplication status 
      let apply_p = document.createElement('p');
      apply_p.setAttribute('style',"color: #21896c; font-weight: bold; margin: 0;");
      if (doc.data()[JOB_APPLICANT_ID_ARR].includes(tutorId)){
        apply_p.textContent = "Applied";
      }else {
        apply_p.textContent = "";
      }

      // Card top
      let card_div = document.createElement('div');
      if (doc.data()[JOB_CAT_ARR][0] == "recep" || doc.data()[JOB_CAT_ARR][0] == "camPri" ||
      doc.data()[JOB_CAT_ARR][0] == "camLowerSec" || doc.data()[JOB_CAT_ARR][0] == "igcse" ||
      doc.data()[JOB_CAT_ARR][0] == "alevel"){
        card_div.className = "card-course card-cambridge";
      }else if(doc.data()[JOB_CAT_ARR][0] == "ibEyp" || doc.data()[JOB_CAT_ARR][0] == "ibPyp" ||
      doc.data()[JOB_CAT_ARR][0] == "ibMyp" || doc.data()[JOB_CAT_ARR][0] == "ibDiploma"){
        card_div.className = "card-course card-ib";
      }else if(doc.data()[JOB_CAT_ARR][0] == "kindergarten" || doc.data()[JOB_CAT_ARR][0] == "upsr" ||
      doc.data()[JOB_CAT_ARR][0] == "pt3" || doc.data()[JOB_CAT_ARR][0] == "spm" || 
      doc.data()[JOB_CAT_ARR][0] == "stpm"){
        card_div.className = "card-course card-kpm";
      }else if(doc.data()[JOB_CAT_ARR][0] == "uecJun" || doc.data()[JOB_CAT_ARR][0] == "uecSen"){
        card_div.className = "card-course card-uec";
      }else if(doc.data()[JOB_CAT_ARR][0] == "engExam" || doc.data()[JOB_CAT_ARR][0] == "adultLanguage"){
        card_div.className = "card-course card-language-and-english-exam";
      }else if(doc.data()[JOB_CAT_ARR][0] == "music"){
        card_div.className = "card-course card-music";
      }else if(doc.data()[JOB_CAT_ARR][0] == "computer"){
        card_div.className = "card-course card-computer-programming";
      }else{
        card_div.className = "card-course card-language-and-english-exam";
      }

      if (closeList.includes(doc.data()[JOB_JOB_STATUS])){
        card_div.setAttribute("data-toggle", 'modal');
        card_div.setAttribute("data-target", "#jobClosedModal");
      }
      else {
        card_div.setAttribute("data-toggle", 'modal');
        card_div.setAttribute("data-target", "#applyModal");
        card_div.setAttribute("data-id", doc.data()[JOB_ID]);
      }
      card_div.appendChild(status_span);
      card_div.appendChild(detail_h6);
      card_div.appendChild(title_h3);
      card_div.appendChild(area_p);
      card_div.appendChild(fee_p);
      card_div.appendChild(duration_p);
      card_div.appendChild(classPerWeek_p);
      card_div.appendChild(description_p);
      card_div.appendChild(description_content_p);
      card_div.appendChild(apply_p);

      let card_top = document.createElement('div');
      card_top.className = "col-md-3";
      card_top.appendChild(card_div);

      const card_all_job_requests = document.getElementById("card-all-job-requests");
      card_all_job_requests.appendChild(card_top);

    }

    function renderAllActiveJobs2(doc, courseId, renderNull){
  
      // Reference: https://codepen.io/Corsurath/pen/abbxNpj
      // Code + Date
      let blogsHtml_code = '';
      blogsHtml_code += "<span style='margin-right: 0.3rem;'>"+doc.data().id.toUpperCase()+"</span> &middot; <span style='margin-left: 0.3rem;'>"+doc.data()[DATE_CREATED_KEY].toDate().toDateString().slice(-12)+"</span>";
      
      if (doc.data()[JOB_STATUS_KEY] == JOB_STATUS_OPEN_KEY)
      blogsHtml_code += "<span class='card-course-status-label' style='background-color: green;''>OPEN</span>";
      else if (doc.data()[JOB_STATUS_KEY] == JOB_STATUS_CLOSED_KEY || doc.data()[JOB_STATUS_KEY] == JOB_STATUS_SUCCESS_KEY)
      blogsHtml_code += "<span class='card-course-status-label' style='background-color: red;''>CLOSED</span>";
      else if (doc.data()[JOB_STATUS_KEY] == JOB_STATUS_FULL_KEY)
      blogsHtml_code += "<span class='card-course-status-label' style='background-color: #ffd000;''>FULL</span>";
      else
      blogsHtml_code += "<span class='card-course-status-label' style='background-color: red;''>CLOSED</span>";

      let code_h6 = document.createElement('h6');
      code_h6.innerHTML = blogsHtml_code;

      // Status
      // let blogsHtml_status = '';
      // if (doc.data()[JOB_STATUS_KEY] == JOB_STATUS_OPEN_KEY)
      //   blogsHtml_status += "<span class='card-course-status-label' style='background-color: green;''>OPEN</span>";
      // else if (doc.data()[JOB_STATUS_KEY] == JOB_STATUS_CLOSED_KEY || doc.data()[JOB_STATUS_KEY] == JOB_STATUS_SUCCESS_KEY)
      //   blogsHtml_status += "<span class='card-course-status-label' style='background-color: red;''>CLOSED</span>";
      // else if (doc.data()[JOB_STATUS_KEY] == JOB_STATUS_FULL_KEY)
      //   blogsHtml_status += "<span class='card-course-status-label' style='background-color: #ffd000;''>FULL</span>";
      // else
      //   blogsHtml_status += "<span class='card-course-status-label' style='background-color: red;''>CLOSED</span>";
      // let status_h6 = document.createElement('h6');
      // status_h6.innerHTML = blogsHtml_status;

      // subject
      let blogsHtml_subject = '';
      if (doc.data().online){
        blogsHtml_subject += doc.data()[CATEGORY_KEY]+"  "+doc.data()[SUBJECT_KEY]+"<span class='card-course-online-label' style='font-size: 0.8rem;'>ONLINE</span>";
      }else{
        blogsHtml_subject += doc.data()[CATEGORY_KEY]+"  "+doc.data()[SUBJECT_KEY];
      }
      let subject_h3 = document.createElement('h3');
      subject_h3.innerHTML = blogsHtml_subject;

      // Area
      let area_h5 = document.createElement('h5');
      if (doc.data()[ONLINE_KEY]){
        // Do nothing
      }else{
        area_h5.textContent = doc.data()[AREA_KEY] +", "+MYAllState[MYAllStateId.indexOf(doc.data()[STATE_ID_KEY])];
      }
      
      // fee
      let blogsHtml_fee = '';
      if (doc.data().feeType == "Per Hour"){
        blogsHtml_fee += "<i class='material-icons' style='color: #6d6d6d; margin-right: 8px;' >paid</i> RM"+doc.data()[FEES_KEY]+" / hour";
      }else{
        blogsHtml_fee += "<i class='material-icons' style='color: #6d6d6d; margin-right: 8px;' >paid</i> RM"+ doc.data()[FEES_KEY] +" / month";
      }
      let fee_p = document.createElement('p');
      fee_p.className = "card-course-item";
      fee_p.innerHTML = blogsHtml_fee;
      let fee_a = document.createElement('a');
      fee_a.className = "card-course-item-wrapper"
      fee_a.appendChild(fee_p);

      // duration
      let blogsHtml_duration = '';
      if (doc.data().duration > 1)
        blogsHtml_duration += "<i class='material-icons' style='color: #6d6d6d; margin-right: 8px;' >schedule</i>"+doc.data()[DURATION_KEY]+" hours / week";
      else
        blogsHtml_duration += "<i class='material-icons' style='color: #6d6d6d; margin-right: 8px;' >schedule</i>"+doc.data()[DURATION_KEY]+" hour / week";
      let duration_p = document.createElement('p');
      duration_p.className = "card-course-item";
      duration_p.innerHTML = blogsHtml_duration;
      let duration_a = document.createElement('a');
      duration_a.className = "card-course-item-wrapper"
      duration_a.appendChild(duration_p);

      // Class / week
      let blogsHtml_classPerWeek = '';
      if (doc.data().classPerWeek > 1)
        blogsHtml_classPerWeek += "<i class='material-icons' style='color: #6d6d6d; margin-right: 8px;' >date_range</i>"+doc.data()[CLASSPERWEEK_KEY]+" classes / week";
      else
        blogsHtml_classPerWeek += "<i class='material-icons' style='color: #6d6d6d; margin-right: 8px;' >date_range</i>"+doc.data()[CLASSPERWEEK_KEY]+" class / week";

      let classPerWeek_p = document.createElement('p');
      classPerWeek_p.className = "card-course-item";
      classPerWeek_p.innerHTML = blogsHtml_classPerWeek;
      let classPerWeek_a = document.createElement('a');
      classPerWeek_a.className = "card-course-item-wrapper"
      classPerWeek_a.appendChild(classPerWeek_p);

      // Description
      let blogsHtml_description = '';
      blogsHtml_description += "<i class='material-icons' style='color: #6d6d6d; margin-right: 8px;' >description</i> Description";
      let description_p = document.createElement('p');
      description_p.className = "card-course-item";
      description_p.innerHTML = blogsHtml_description;
      let description_a = document.createElement('a');
      description_a.className = "card-course-item-wrapper"
      description_a.appendChild(description_p);

      let description_content_p = document.createElement('p');
      if (doc.data()[JOB_DETAIL_KEY] == null || doc.data()[JOB_DETAIL_KEY] == ""){
        description_content_p.textContent = "No description.";

      }else{
        description_content_p.textContent = doc.data()[JOB_DETAIL_KEY];
      }

      // Card top
      let card_div = document.createElement('div');
      if (doc.data()[CATEGORY_ID_KEY] == "recep" || doc.data()[CATEGORY_ID_KEY] == "camPri" ||
      doc.data()[CATEGORY_ID_KEY] == "camLowerSec" || doc.data()[CATEGORY_ID_KEY] == "igcse" ||
      doc.data()[CATEGORY_ID_KEY] == "alevel"){
        card_div.className = "card-course card-cambridge";
      }else if(doc.data()[CATEGORY_ID_KEY] == "ibEyp" || doc.data()[CATEGORY_ID_KEY] == "ibPyp" ||
      doc.data()[CATEGORY_ID_KEY] == "ibMyp" || doc.data()[CATEGORY_ID_KEY] == "ibDiploma"){
        card_div.className = "card-course card-ib";
      }else if(doc.data()[CATEGORY_ID_KEY] == "kindergarten" || doc.data()[CATEGORY_ID_KEY] == "upsr" ||
      doc.data()[CATEGORY_ID_KEY] == "pt3" || doc.data()[CATEGORY_ID_KEY] == "spm" || 
      doc.data()[CATEGORY_ID_KEY] == "stpm"){
        card_div.className = "card-course card-kpm";
      }else if(doc.data()[CATEGORY_ID_KEY] == "uecJun" || doc.data()[CATEGORY_ID_KEY] == "uecSen"){
        card_div.className = "card-course card-uec";
      }else if(doc.data()[CATEGORY_ID_KEY] == "engExam" || doc.data()[CATEGORY_ID_KEY] == "adultLanguage"){
        card_div.className = "card-course card-language-and-english-exam";
      }else if(doc.data()[CATEGORY_ID_KEY] == "music"){
        card_div.className = "card-course card-music";
      }else if(doc.data()[CATEGORY_ID_KEY] == "computer"){
        card_div.className = "card-course card-computer-programming";
      }else{
        card_div.className = "card-course card-language-and-english-exam";
      }

      card_div.setAttribute("data-category",doc.data()[CATEGORY_KEY]);
      card_div.setAttribute("data-category-id",doc.data()[CATEGORY_ID_KEY]);
      card_div.setAttribute("data-subject", doc.data()[SUBJECT_KEY]);
      card_div.setAttribute("data-subject-id", doc.data()[SUBJECT_ID_KEY]);
      card_div.setAttribute("data-online", doc.data()[ONLINE_KEY]);
      card_div.setAttribute("data-course-id",courseId);
      // card_div.setAttribute("onclick","editCourseFunction(this)");
      card_div.appendChild(code_h6);
      // card_div.appendChild(status_h6);
      card_div.appendChild(subject_h3);
      if (doc.data()[ONLINE_KEY]){
        // Do nothing
      }else{
        // Append area
        card_div.appendChild(area_h5);
      }
      card_div.appendChild(fee_a);
      card_div.appendChild(duration_a);
      card_div.appendChild(classPerWeek_a);
      card_div.appendChild(description_a);
      card_div.appendChild(description_content_p);


      let card_top = document.createElement('div');
      card_top.className = "col-md-4 col-lg-4";

      // If the course size is less than 2, we need to render empty placeholder so bootstrap looks good.
      if (renderNull){
        // render nothing
      }else{
        card_top.appendChild(card_div);
      }
      const card_all_job_requests = document.getElementById("card-all-job-requests");
      card_all_job_requests.appendChild(card_top);

      }

    // Copy a text based on element ID
    function copyText(targetElemId){
      /* Get the text field */
      let copyText = document.getElementById(targetElemId);
      // console.log(copyText)
      // console.log(copyText.select())
      /* Select the text field */
      copyText.focus();
      copyText.select();
      copyText.setSelectionRange(0, 99999); /* For mobile devices */

      /* Copy the text inside the text field */
      navigator.clipboard.writeText(copyText.value);
      func.showNotification('top','center', 'success', 'check_circle', "Link copied.");
    }

  </script>
  <script>
		$( document ).ready(function() {

      // Apply Modal
      var APPLY_JOB_ID = "";
      var APPLY_JOB_REF_NO = "";
      $('#applyModal').on('show.bs.modal', function (event) {
        var target = $(event.relatedTarget) // Button/Components that triggered the modal
        APPLY_JOB_ID = target.data('id') // Extract info from data-* attributes
        console.log(APPLY_JOB_ID);

        docsObj.forEach((doc) => {

          if (doc.id == APPLY_JOB_ID){

            APPLY_JOB_REF_NO = doc[JOB_REF_NO];
            console.log( APPLY_JOB_REF_NO);
            
            document.getElementById("applyEnableText").textContent = APPLY_JOB_REF_NO;


            let comPol = doc[JOB_COMMISSION_POLICY];

            var applyHtml = "";
            var comType1Time = [COMMISSION_POLICY_50_KEY, COMMISSION_POLICY_40_KEY, COMMISSION_POLICY_30_KEY, COMMISSION_POLICY_20_KEY, COMMISSION_POLICY_10_KEY];

            // With 1 time commission: 
            if (comType1Time.includes(comPol)){
              // <div class="col-md-12" id="comPolText">
              //   <p>Here's how you will be paid when you get matched:</p>
              //   <p>1. Parents will pay you the full amount with <strong style="color: #2e74b6 ;">RM 600 (RM50/hr x 1.5 hours/lesson x 2 classes/week x 4 weeks in a month)</strong> at the end of a month or in any form agreed by both of you.</p>
              //   <p> 2. We will collect <strong style="color: #2e74b6 ;">50% of the first month's fee or RM 300</strong> as a deposit from you. Once you've done that, we will share the parent's contact for you to make the necessary arrangements to conduct the lesson.</p> 
              //   <p>3. We <strong style="color: #2e74b6 ;">GUARANTEE a full refund</strong> of your deposit if your lesson is terminated within 2 weeks starting from the first class. Else, the deposit will turn to the commission.</p>
              //   <p>Are you ready to go with this?👨🏻‍🏫</p>
              // </div>

              let fee = parseFloat(doc[JOB_FEE]).toFixed(2);
              let duration = parseFloat(doc[JOB_DURATION]).toFixed(1);
              let lessPerWeek = parseInt(doc[JOB_LESS_PER_WEEK]);

              let feeHalfText = 0;
              let feePerMonth = 0;
              // Fee Complete text
              let feeCompleteText = "";
              if (doc[JOB_FEE_TYPE] === FEES_TYPE_PER_HOUR_KEY){
                feePerMonth = fee * duration * lessPerWeek * 4;
                feeCompleteText = "RM" + feePerMonth +  " (RM" + fee +"/hr x " + doc[JOB_DURATION] + " hour(s)/class x " + doc[JOB_LESS_PER_WEEK] + " class(es)/week x 4 weeks in a month)";
              }
              else {
                feePerMonth = fee
                feeCompleteText = "RM" + feePerMonth +  " per month";
              }

              // Commission Text 
              let commissionText = "";
              if (comPol === COMMISSION_POLICY_50_KEY){
                commissionText = "50% of the first month's fee or RM" + (feePerMonth/2).toFixed(2);
              }
              else if (comPol === COMMISSION_POLICY_40_KEY){
                commissionText = "40% of the first month's fee or RM" + (feePerMonth * 0.4).toFixed(2);
              }
              else if (comPol === COMMISSION_POLICY_30_KEY){
                commissionText = "30% of the first month's fee or RM" + (feePerMonth * 0.3).toFixed(2);
              }
              else if (comPol === COMMISSION_POLICY_20_KEY){
                commissionText = "20% of the first month's fee or RM" + (feePerMonth * 0.2).toFixed(2);
              }
              else if (comPol === COMMISSION_POLICY_10_KEY){
                commissionText = "10% of the first month's fee or RM" + (feePerMonth * 0.1).toFixed(2);
              }

              applyHtml = 
              `
              <p>Here's how you will be paid when you get matched:</p>
              <p>1. Parents will pay you the full amount with <strong style="color: #2e74b6 ;">`+feeCompleteText+`</strong> at the end of a month or in any form agreed by both of you.</p>
              <p> 2. We will collect <strong style="color: #2e74b6 ;">`+commissionText+`</strong> as a deposit from you. Once you've done that, we will share the parent's contact for you to make the necessary arrangements to conduct the lesson.</p> 
              <p>3. We <strong style="color: #2e74b6 ;">GUARANTEE a full refund</strong> of your deposit if your lesson is terminated within 2 weeks starting from the first class. Else, the deposit will turn to the commission.</p>
              <p>Are you ready to go with this?👨🏻‍🏫</p>
              `
            }
            // No commission
            else if (comPol === COMMISSION_POLICY_NO_COMMISSION_KEY ){
              applyHtml = 
              `
              <p>Are you ready to go with this?👨🏻‍🏫</p>
              `
            }
            // Progressive Increment Plan
            else if (comPol === COMMISSION_POLICY_PROGRESSIVE_INCREMENT_PLAN_KEY){
              // <p>2. Once the class is confirmed, we'll create a Whatsapp/Messenger group for you and the parents to understand what the kid needs and make the necessary arrangements to conduct the lesson.</p>
              // <p>3. GoLearn will send an invoice and collect the tuition fee from parents. You will be getting your pay based on the percentage of the monthly tuition fee. If the class starts in the middle of a month, it is calculated based on the start date of the first class.</p>

              applyHtml = 
              `
              <p>Here's how you will get paid when you get matched (after trial class if any):</p>
              <p>1. <strong style="color: #2e74b6 ;">0% deposit</strong></p>
              <p style="margin: 0;">2. Tuition fee that you will be receiving:</p>
              <p style="margin: 0; font-size: 900; color: #2e74b6;">1st month - 74%</p>
              <p style="margin: 0; font-size: 900; color: #2e74b6;">2nd month - 78%</p>
              <p style="margin: 0; font-size: 900; color: #2e74b6;">3rd month - 82%</p>
              <p style="margin: 0; font-size: 900; color: #2e74b6;">4th month - 84%</p>
              <p style="margin: 0; font-size: 900; color: #2e74b6;">5th month and onward - 86%</p>
              <p>Are you ready to go with this?👨🏻‍🏫</p>
              `
            }
            else {
              applyHtml = 
              `
              <p>Are you ready to go with this?👨🏻‍🏫</p>
              `
            }
           
            // <div class="col-md-12" id="comPolText">
            document.getElementById("comPolText").innerHTML = applyHtml;


            // View job Links
            let link = "https://app.golearn.com.my/school/job/view.html?id=" + APPLY_JOB_ID;
            document.getElementById("inJobLink").textContent = link;
          }

        })

      });

      // Add new applicant hide 
      $('#applyModal').on('hidden.bs.modal', function (event) {

        APPLY_JOB_ID = "";
        APPLY_JOB_REF_NO = "";

        document.getElementById("comPolText").innerHTML = "";
        document.getElementById("applyEnableText").textContent = ""
        document.getElementById('applyModalConfirmText').value = "";
        document.getElementById('btnApplyModalConfirm').textContent = 'Apply';
        document.getElementById('btnApplyModalConfirm').setAttribute('disabled', true);

      });

      // Check if Job Ref No valid
      $("#btnApplyModalConfirm").click(function(){
        
        document.getElementById('btnApplyModalConfirm').textContent = "Applying...";
        document.getElementById('btnApplyModalConfirm').setAttribute("disabled", true);

        var docRef = db.collection("Jobs")
          .doc("v1")
          .collection("job")
          .doc(APPLY_JOB_ID);

        return db.runTransaction((transaction) => {
          return transaction.get(docRef).then((doc) => {
            if (!doc.exists) {
                throw "Document does not exist!";
            }

            var applicantIdArr = doc.data()[JOB_APPLICANT_ID_ARR];
            var applicantNameArr = doc.data()[JOB_APPLICANT_NAME_ARR];

            // console.log("applicantIdArr")
            // console.log(applicantIdArr)

            if(applicantIdArr.includes(tutorId)){
              // Applied. Do nothing
            }
            else {
              applicantIdArr.push(tutorId);
              applicantNameArr.push(current_name);
            }

            var docData = {
              [JOB_APPLICANT_ID_ARR] : applicantIdArr,
              [JOB_APPLICANT_NAME_ARR]: applicantNameArr,
            }

            transaction.update(docRef, docData);
          });
        }).then(() => {
            console.log("Transaction successfully committed!");

            // Show applied text;
            let eleList = document.querySelector("[data-id='"+APPLY_JOB_ID+"']").children
            // console.log(eleList[eleList.length - 1])
            eleList[eleList.length - 1].textContent = "Applied";

            $('#applyModal').modal("hide");
            document.getElementById('btnApplyModalConfirm').textContent = "Apply";
            document.getElementById('btnApplyModalConfirm').removeAttribute("disabled");
            func.showNotification('top','center', 'success', 'check_circle', "You applied to a job!" );


        })
        .catch((error) => {
            console.log("Transaction failed: ", error);
            $('#applyModal').modal("hide");
            document.getElementById('btnApplyModalConfirm').textContent = "Apply";
            document.getElementById('btnApplyModalConfirm').removeAttribute("disabled");
            func.showNotification('top','center', 'danger', 'error_outline', "Cannot apply this job now. Please try again!" );

        });

      });

      // Apply Modal Confirm Text
      $('#applyModalConfirmText').on('input', function(){
        if (this.value === APPLY_JOB_REF_NO){
          $('#btnApplyModalConfirm').prop('disabled', false);
        }
        else{
          $('#btnApplyModalConfirm').prop('disabled', true);
        }
      });

		});

  </script>

</body>

</html>